import{aI as Fn}from"./mermaid.esm.min-dc7d33f7.js";import"./app-020a15b4.js";import"./framework-546207d5.js";function El(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function kl(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var rr=kl,Cl=typeof Fn=="object"&&Fn&&Fn.Object===Object&&Fn,Dl=Cl,Tl=Dl,_l=typeof self=="object"&&self&&self.Object===Object&&self,Pl=Tl||_l||Function("return this")(),Wr=Pl,Ml=Wr,Sl=function(){return Ml.Date.now()},Bl=Sl,Nl=/\s/;function Al(e){for(var t=e.length;t--&&Nl.test(e.charAt(t)););return t}var Il=Al,Ol=Il,zl=/^\s+/;function Ll(e){return e&&e.slice(0,Ol(e)+1).replace(zl,"")}var Rl=Ll,Vl=Wr,Fl=Vl.Symbol,Fa=Fl,fi=Fa,No=Object.prototype,jl=No.hasOwnProperty,ql=No.toString,On=fi?fi.toStringTag:void 0;function Xl(e){var t=jl.call(e,On),n=e[On];try{e[On]=void 0;var r=!0}catch{}var a=ql.call(e);return r&&(t?e[On]=n:delete e[On]),a}var Yl=Xl,Hl=Object.prototype,Wl=Hl.toString;function Ul(e){return Wl.call(e)}var Zl=Ul,gi=Fa,Gl=Yl,Kl=Zl,$l="[object Null]",Ql="[object Undefined]",vi=gi?gi.toStringTag:void 0;function Jl(e){return e==null?e===void 0?Ql:$l:vi&&vi in Object(e)?Gl(e):Kl(e)}var Ao=Jl;function eu(e){return e!=null&&typeof e=="object"}var tu=eu,nu=Ao,ru=tu,au="[object Symbol]";function iu(e){return typeof e=="symbol"||ru(e)&&nu(e)==au}var ar=iu,ou=Rl,mi=rr,su=ar,yi=0/0,lu=/^[-+]0x[0-9a-f]+$/i,uu=/^0b[01]+$/i,cu=/^0o[0-7]+$/i,du=parseInt;function hu(e){if(typeof e=="number")return e;if(su(e))return yi;if(mi(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=mi(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ou(e);var n=uu.test(e);return n||cu.test(e)?du(e.slice(2),n?2:8):lu.test(e)?yi:+e}var pu=hu,fu=rr,pa=Bl,bi=pu,gu="Expected a function",vu=Math.max,mu=Math.min;function yu(e,t,n){var r,a,i,o,u,s,l=0,c=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(gu);t=bi(t)||0,fu(n)&&(c=!!n.leading,d="maxWait"in n,i=d?vu(bi(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h);function p(k){var x=r,C=a;return r=a=void 0,l=k,o=e.apply(C,x),o}function f(k){return l=k,u=setTimeout(g,t),c?p(k):o}function v(k){var x=k-s,C=k-l,D=t-x;return d?mu(D,i-C):D}function b(k){var x=k-s,C=k-l;return s===void 0||x>=t||x<0||d&&C>=i}function g(){var k=pa();if(b(k))return m(k);u=setTimeout(g,v(k))}function m(k){return u=void 0,h&&r?p(k):(r=a=void 0,o)}function y(){u!==void 0&&clearTimeout(u),l=0,r=s=a=u=void 0}function w(){return u===void 0?o:m(pa())}function _(){var k=pa(),x=b(k);if(r=arguments,a=this,s=k,x){if(u===void 0)return f(s);if(d)return clearTimeout(u),u=setTimeout(g,t),p(s)}return u===void 0&&(u=setTimeout(g,t)),o}return _.cancel=y,_.flush=w,_}var bu=yu,Ta={},xu={get exports(){return Ta},set exports(e){Ta=e}},_a={},wu={get exports(){return _a},set exports(e){_a=e}};(function(e,t){(function(){var n,r,a,i,o,u,s,l,c,d,h,p,f,v,b;a=Math.floor,d=Math.min,r=function(g,m){return g<m?-1:g>m?1:0},c=function(g,m,y,w,_){var k;if(y==null&&(y=0),_==null&&(_=r),y<0)throw new Error("lo must be non-negative");for(w==null&&(w=g.length);y<w;)k=a((y+w)/2),_(m,g[k])<0?w=k:y=k+1;return[].splice.apply(g,[y,y-y].concat(m)),m},u=function(g,m,y){return y==null&&(y=r),g.push(m),v(g,0,g.length-1,y)},o=function(g,m){var y,w;return m==null&&(m=r),y=g.pop(),g.length?(w=g[0],g[0]=y,b(g,0,m)):w=y,w},l=function(g,m,y){var w;return y==null&&(y=r),w=g[0],g[0]=m,b(g,0,y),w},s=function(g,m,y){var w;return y==null&&(y=r),g.length&&y(g[0],m)<0&&(w=[g[0],m],m=w[0],g[0]=w[1],b(g,0,y)),m},i=function(g,m){var y,w,_,k,x,C;for(m==null&&(m=r),k=function(){C=[];for(var D=0,P=a(g.length/2);0<=P?D<P:D>P;0<=P?D++:D--)C.push(D);return C}.apply(this).reverse(),x=[],w=0,_=k.length;w<_;w++)y=k[w],x.push(b(g,y,m));return x},f=function(g,m,y){var w;if(y==null&&(y=r),w=g.indexOf(m),w!==-1)return v(g,0,w,y),b(g,w,y)},h=function(g,m,y){var w,_,k,x,C;if(y==null&&(y=r),_=g.slice(0,m),!_.length)return _;for(i(_,y),C=g.slice(m),k=0,x=C.length;k<x;k++)w=C[k],s(_,w,y);return _.sort(y).reverse()},p=function(g,m,y){var w,_,k,x,C,D,P,M,T;if(y==null&&(y=r),m*10<=g.length){if(k=g.slice(0,m).sort(y),!k.length)return k;for(_=k[k.length-1],P=g.slice(m),x=0,D=P.length;x<D;x++)w=P[x],y(w,_)<0&&(c(k,w,0,null,y),k.pop(),_=k[k.length-1]);return k}for(i(g,y),T=[],C=0,M=d(m,g.length);0<=M?C<M:C>M;0<=M?++C:--C)T.push(o(g,y));return T},v=function(g,m,y,w){var _,k,x;for(w==null&&(w=r),_=g[y];y>m;){if(x=y-1>>1,k=g[x],w(_,k)<0){g[y]=k,y=x;continue}break}return g[y]=_},b=function(g,m,y){var w,_,k,x,C;for(y==null&&(y=r),_=g.length,C=m,k=g[m],w=2*m+1;w<_;)x=w+1,x<_&&!(y(g[w],g[x])<0)&&(w=x),g[m]=g[w],m=w,w=2*m+1;return g[m]=k,v(g,C,m,y)},n=function(){g.push=u,g.pop=o,g.replace=l,g.pushpop=s,g.heapify=i,g.updateItem=f,g.nlargest=h,g.nsmallest=p;function g(m){this.cmp=m??r,this.nodes=[]}return g.prototype.push=function(m){return u(this.nodes,m,this.cmp)},g.prototype.pop=function(){return o(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},g.prototype.replace=function(m){return l(this.nodes,m,this.cmp)},g.prototype.pushpop=function(m){return s(this.nodes,m,this.cmp)},g.prototype.heapify=function(){return i(this.nodes,this.cmp)},g.prototype.updateItem=function(m){return f(this.nodes,m,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var m;return m=new g,m.nodes=this.nodes.slice(0),m},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),function(g,m){return e.exports=m()}(this,function(){return n})}).call(Fn)})(wu);(function(e){e.exports=_a})(xu);var Eu=Array.isArray,Ur=Eu,ku=Ur,Cu=ar,Du=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tu=/^\w*$/;function _u(e,t){if(ku(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Cu(e)?!0:Tu.test(e)||!Du.test(e)||t!=null&&e in Object(t)}var Pu=_u,Mu=Ao,Su=rr,Bu="[object AsyncFunction]",Nu="[object Function]",Au="[object GeneratorFunction]",Iu="[object Proxy]";function Ou(e){if(!Su(e))return!1;var t=Mu(e);return t==Nu||t==Au||t==Bu||t==Iu}var zu=Ou,Lu=Wr,Ru=Lu["__core-js_shared__"],Vu=Ru,fa=Vu,xi=function(){var e=/[^.]+$/.exec(fa&&fa.keys&&fa.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Fu(e){return!!xi&&xi in e}var ju=Fu,qu=Function.prototype,Xu=qu.toString;function Yu(e){if(e!=null){try{return Xu.call(e)}catch{}try{return e+""}catch{}}return""}var Hu=Yu,Wu=zu,Uu=ju,Zu=rr,Gu=Hu,Ku=/[\\^$.*+?()[\]{}|]/g,$u=/^\[object .+?Constructor\]$/,Qu=Function.prototype,Ju=Object.prototype,ec=Qu.toString,tc=Ju.hasOwnProperty,nc=RegExp("^"+ec.call(tc).replace(Ku,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rc(e){if(!Zu(e)||Uu(e))return!1;var t=Wu(e)?nc:$u;return t.test(Gu(e))}var ac=rc;function ic(e,t){return e==null?void 0:e[t]}var oc=ic,sc=ac,lc=oc;function uc(e,t){var n=lc(e,t);return sc(n)?n:void 0}var ja=uc,cc=ja,dc=cc(Object,"create"),Zr=dc,wi=Zr;function hc(){this.__data__=wi?wi(null):{},this.size=0}var pc=hc;function fc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var gc=fc,vc=Zr,mc="__lodash_hash_undefined__",yc=Object.prototype,bc=yc.hasOwnProperty;function xc(e){var t=this.__data__;if(vc){var n=t[e];return n===mc?void 0:n}return bc.call(t,e)?t[e]:void 0}var wc=xc,Ec=Zr,kc=Object.prototype,Cc=kc.hasOwnProperty;function Dc(e){var t=this.__data__;return Ec?t[e]!==void 0:Cc.call(t,e)}var Tc=Dc,_c=Zr,Pc="__lodash_hash_undefined__";function Mc(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=_c&&t===void 0?Pc:t,this}var Sc=Mc,Bc=pc,Nc=gc,Ac=wc,Ic=Tc,Oc=Sc;function kn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}kn.prototype.clear=Bc;kn.prototype.delete=Nc;kn.prototype.get=Ac;kn.prototype.has=Ic;kn.prototype.set=Oc;var zc=kn;function Lc(){this.__data__=[],this.size=0}var Rc=Lc;function Vc(e,t){return e===t||e!==e&&t!==t}var Io=Vc,Fc=Io;function jc(e,t){for(var n=e.length;n--;)if(Fc(e[n][0],t))return n;return-1}var Gr=jc,qc=Gr,Xc=Array.prototype,Yc=Xc.splice;function Hc(e){var t=this.__data__,n=qc(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Yc.call(t,n,1),--this.size,!0}var Wc=Hc,Uc=Gr;function Zc(e){var t=this.__data__,n=Uc(t,e);return n<0?void 0:t[n][1]}var Gc=Zc,Kc=Gr;function $c(e){return Kc(this.__data__,e)>-1}var Qc=$c,Jc=Gr;function ed(e,t){var n=this.__data__,r=Jc(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var td=ed,nd=Rc,rd=Wc,ad=Gc,id=Qc,od=td;function Cn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Cn.prototype.clear=nd;Cn.prototype.delete=rd;Cn.prototype.get=ad;Cn.prototype.has=id;Cn.prototype.set=od;var sd=Cn,ld=ja,ud=Wr,cd=ld(ud,"Map"),dd=cd,Ei=zc,hd=sd,pd=dd;function fd(){this.size=0,this.__data__={hash:new Ei,map:new(pd||hd),string:new Ei}}var gd=fd;function vd(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var md=vd,yd=md;function bd(e,t){var n=e.__data__;return yd(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Kr=bd,xd=Kr;function wd(e){var t=xd(this,e).delete(e);return this.size-=t?1:0,t}var Ed=wd,kd=Kr;function Cd(e){return kd(this,e).get(e)}var Dd=Cd,Td=Kr;function _d(e){return Td(this,e).has(e)}var Pd=_d,Md=Kr;function Sd(e,t){var n=Md(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Bd=Sd,Nd=gd,Ad=Ed,Id=Dd,Od=Pd,zd=Bd;function Dn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Dn.prototype.clear=Nd;Dn.prototype.delete=Ad;Dn.prototype.get=Id;Dn.prototype.has=Od;Dn.prototype.set=zd;var Ld=Dn,Oo=Ld,Rd="Expected a function";function qa(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Rd);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(qa.Cache||Oo),n}qa.Cache=Oo;var Vd=qa,Fd=Vd,jd=500;function qd(e){var t=Fd(e,function(r){return n.size===jd&&n.clear(),r}),n=t.cache;return t}var Xd=qd,Yd=Xd,Hd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wd=/\\(\\)?/g,Ud=Yd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Hd,function(n,r,a,i){t.push(a?i.replace(Wd,"$1"):r||n)}),t}),zo=Ud;function Zd(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var Lo=Zd,ki=Fa,Gd=Lo,Kd=Ur,$d=ar,Qd=1/0,Ci=ki?ki.prototype:void 0,Di=Ci?Ci.toString:void 0;function Ro(e){if(typeof e=="string")return e;if(Kd(e))return Gd(e,Ro)+"";if($d(e))return Di?Di.call(e):"";var t=e+"";return t=="0"&&1/e==-Qd?"-0":t}var Jd=Ro,eh=Jd;function th(e){return e==null?"":eh(e)}var Vo=th,nh=Ur,rh=Pu,ah=zo,ih=Vo;function oh(e,t){return nh(e)?e:rh(e,t)?[e]:ah(ih(e))}var Fo=oh,sh=ar,lh=1/0;function uh(e){if(typeof e=="string"||sh(e))return e;var t=e+"";return t=="0"&&1/e==-lh?"-0":t}var Xa=uh,ch=Fo,dh=Xa;function hh(e,t){t=ch(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[dh(t[n++])];return n&&n==r?e:void 0}var ph=hh,fh=ph;function gh(e,t,n){var r=e==null?void 0:fh(e,t);return r===void 0?n:r}var vh=gh,mh=ja,yh=function(){try{var e=mh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),bh=yh,Ti=bh;function xh(e,t,n){t=="__proto__"&&Ti?Ti(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var wh=xh,Eh=wh,kh=Io,Ch=Object.prototype,Dh=Ch.hasOwnProperty;function Th(e,t,n){var r=e[t];(!(Dh.call(e,t)&&kh(r,n))||n===void 0&&!(t in e))&&Eh(e,t,n)}var _h=Th,Ph=9007199254740991,Mh=/^(?:0|[1-9]\d*)$/;function Sh(e,t){var n=typeof e;return t=t??Ph,!!t&&(n=="number"||n!="symbol"&&Mh.test(e))&&e>-1&&e%1==0&&e<t}var Bh=Sh,Nh=_h,Ah=Fo,Ih=Bh,_i=rr,Oh=Xa;function zh(e,t,n,r){if(!_i(e))return e;t=Ah(t,e);for(var a=-1,i=t.length,o=i-1,u=e;u!=null&&++a<i;){var s=Oh(t[a]),l=n;if(s==="__proto__"||s==="constructor"||s==="prototype")return e;if(a!=o){var c=u[s];l=r?r(c,s,u):void 0,l===void 0&&(l=_i(c)?c:Ih(t[a+1])?[]:{})}Nh(u,s,l),u=u[s]}return e}var Lh=zh,Rh=Lh;function Vh(e,t,n){return e==null?e:Rh(e,t,n)}var Fh=Vh;function jh(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var qh=jh,Xh=Lo,Yh=qh,Hh=Ur,Wh=ar,Uh=zo,Zh=Xa,Gh=Vo;function Kh(e){return Hh(e)?Xh(e,Zh):Wh(e)?[e]:Yh(Uh(Gh(e)))}var $h=Kh,Qh=bu,Jh=Ta,ep=vh,tp=Fh,np=$h;function ir(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var $r=ir(Qh),or=ir(Jh),rp=ir(ep),ap=ir(tp),ip=ir(np);function Ve(e){return Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(e)}function Ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ha(e,t,n){return t&&Pi(e.prototype,t),n&&Pi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e,t){return op(e)||sp(e,t)||lp(e,t)||up()}function op(e){if(Array.isArray(e))return e}function sp(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,i=!1,o,u;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(s){i=!0,u=s}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw u}}return r}}function lp(e,t){if(e){if(typeof e=="string")return Mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mi(e,t)}}function Mi(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function up(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ie=typeof window>"u"?null:window,Si=Ie?Ie.navigator:null;Ie&&Ie.document;var cp=Ve(""),qo=Ve({}),dp=Ve(function(){}),hp=typeof HTMLElement>"u"?"undefined":Ve(HTMLElement),sr=function(e){return e&&e.instanceString&&Oe(e.instanceString)?e.instanceString():null},se=function(e){return e!=null&&Ve(e)==cp},Oe=function(e){return e!=null&&Ve(e)===dp},Se=function(e){return!lt(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Ee=function(e){return e!=null&&Ve(e)===qo&&!Se(e)&&e.constructor===Object},pp=function(e){return e!=null&&Ve(e)===qo},J=function(e){return e!=null&&Ve(e)===Ve(1)&&!isNaN(e)},fp=function(e){return J(e)&&Math.floor(e)===e},Lr=function(e){if(hp!=="undefined")return e!=null&&e instanceof HTMLElement},lt=function(e){return lr(e)||Xo(e)},lr=function(e){return sr(e)==="collection"&&e._private.single},Xo=function(e){return sr(e)==="collection"&&!e._private.single},Wa=function(e){return sr(e)==="core"},Yo=function(e){return sr(e)==="stylesheet"},gp=function(e){return sr(e)==="event"},Ft=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},vp=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},mp=function(e){return Ee(e)&&J(e.x1)&&J(e.x2)&&J(e.y1)&&J(e.y2)},yp=function(e){return pp(e)&&Oe(e.then)},bp=function(){return Si&&Si.userAgent.match(/msie|trident|edge/i)},Un=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var r=[],a=0;a<arguments.length;a++)r.push(arguments[a]);return r.join("$")});var n=function r(){var a=this,i=arguments,o,u=t.apply(a,i),s=r.cache;return(o=s[u])||(o=s[u]=e.apply(a,i)),o};return n.cache={},n},Ua=Un(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),Qr=Un(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),Ho=Un(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),Bi=function(e){return Ft(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Re="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",xp="rgb[a]?\\(("+Re+"[%]?)\\s*,\\s*("+Re+"[%]?)\\s*,\\s*("+Re+"[%]?)(?:\\s*,\\s*("+Re+"))?\\)",wp="rgb[a]?\\((?:"+Re+"[%]?)\\s*,\\s*(?:"+Re+"[%]?)\\s*,\\s*(?:"+Re+"[%]?)(?:\\s*,\\s*(?:"+Re+"))?\\)",Ep="hsl[a]?\\(("+Re+")\\s*,\\s*("+Re+"[%])\\s*,\\s*("+Re+"[%])(?:\\s*,\\s*("+Re+"))?\\)",kp="hsl[a]?\\((?:"+Re+")\\s*,\\s*(?:"+Re+"[%])\\s*,\\s*(?:"+Re+"[%])(?:\\s*,\\s*(?:"+Re+"))?\\)",Cp="\\#[0-9a-fA-F]{3}",Dp="\\#[0-9a-fA-F]{6}",Wo=function(e,t){return e<t?-1:e>t?1:0},Tp=function(e,t){return-1*Wo(e,t)},ue=Object.assign!=null?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(r!=null)for(var a=Object.keys(r),i=0;i<a.length;i++){var o=a[i];e[o]=r[o]}}return e},_p=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,r,a,i=16;return t?(n=parseInt(e[1]+e[1],i),r=parseInt(e[2]+e[2],i),a=parseInt(e[3]+e[3],i)):(n=parseInt(e[1]+e[2],i),r=parseInt(e[3]+e[4],i),a=parseInt(e[5]+e[6],i)),[n,r,a]}},Pp=function(e){var t,n,r,a,i,o,u,s;function l(p,f,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?p+(f-p)*6*v:v<1/2?f:v<2/3?p+(f-p)*(2/3-v)*6:p}var c=new RegExp("^"+Ep+"$").exec(e);if(c){if(n=parseInt(c[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,r=parseFloat(c[2]),r<0||r>100||(r=r/100,a=parseFloat(c[3]),a<0||a>100)||(a=a/100,i=c[4],i!==void 0&&(i=parseFloat(i),i<0||i>1)))return;if(r===0)o=u=s=Math.round(a*255);else{var d=a<.5?a*(1+r):a+r-a*r,h=2*a-d;o=Math.round(255*l(h,d,n+1/3)),u=Math.round(255*l(h,d,n)),s=Math.round(255*l(h,d,n-1/3))}t=[o,u,s,i]}return t},Mp=function(e){var t,n=new RegExp("^"+xp+"$").exec(e);if(n){t=[];for(var r=[],a=1;a<=3;a++){var i=n[a];if(i[i.length-1]==="%"&&(r[a]=!0),i=parseFloat(i),r[a]&&(i=i/100*255),i<0||i>255)return;t.push(Math.floor(i))}var o=r[1]||r[2]||r[3],u=r[1]&&r[2]&&r[3];if(o&&!u)return;var s=n[4];if(s!==void 0){if(s=parseFloat(s),s<0||s>1)return;t.push(s)}}return t},Sp=function(e){return Np[e.toLowerCase()]},Bp=function(e){return(Se(e)?e:null)||Sp(e)||_p(e)||Mp(e)||Pp(e)},Np={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Uo=function(e){for(var t=e.map,n=e.keys,r=n.length,a=0;a<r;a++){var i=n[a];if(Ee(i))throw Error("Tried to set map with object key");a<n.length-1?(t[i]==null&&(t[i]={}),t=t[i]):t[i]=e.value}},Zo=function(e){for(var t=e.map,n=e.keys,r=n.length,a=0;a<r;a++){var i=n[a];if(Ee(i))throw Error("Tried to get map with object key");if(t=t[i],t==null)return t}return t},ga=Ie?Ie.performance:null,Go=ga&&ga.now?function(){return ga.now()}:function(){return Date.now()},Ap=function(){if(Ie){if(Ie.requestAnimationFrame)return function(e){Ie.requestAnimationFrame(e)};if(Ie.mozRequestAnimationFrame)return function(e){Ie.mozRequestAnimationFrame(e)};if(Ie.webkitRequestAnimationFrame)return function(e){Ie.webkitRequestAnimationFrame(e)};if(Ie.msRequestAnimationFrame)return function(e){Ie.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(Go())},1e3/60)}}(),Rr=function(e){return Ap(e)},Tt=Go,pn=9261,Ko=65599,jn=5381,$o=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pn,n=t,r;r=e.next(),!r.done;)n=n*Ko+r.value|0;return n},Zn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pn;return t*Ko+e|0},Gn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jn;return(t<<5)+t+e|0},Ip=function(e,t){return e*2097152+t},It=function(e){return e[0]*2097152+e[1]},br=function(e,t){return[Zn(e[0],t[0]),Gn(e[1],t[1])]},Op=function(e,t){var n={value:0,done:!1},r=0,a=e.length,i={next:function(){return r<a?n.value=e[r++]:n.done=!0,n}};return $o(i,t)},Qt=function(e,t){var n={value:0,done:!1},r=0,a=e.length,i={next:function(){return r<a?n.value=e.charCodeAt(r++):n.done=!0,n}};return $o(i,t)},Qo=function(){return zp(arguments)},zp=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];n===0?t=Qt(r):t=Qt(r,t)}return t},Ni=!0,Lp=console.warn!=null,Rp=console.trace!=null,Za=Number.MAX_SAFE_INTEGER||9007199254740991,Jo=function(){return!0},Vr=function(){return!1},Ai=function(){return 0},Ga=function(){},ze=function(e){throw new Error(e)},es=function(e){if(e!==void 0)Ni=!!e;else return Ni},_e=function(e){es()&&(Lp?console.warn(e):(console.log(e),Rp&&console.trace()))},Vp=function(e){return ue({},e)},xt=function(e){return e==null?e:Se(e)?e.slice():Ee(e)?Vp(e):e},Fp=function(e){return e.slice()},ts=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},jp={},ns=function(){return jp},Ue=function(e){var t=Object.keys(e);return function(n){for(var r={},a=0;a<t.length;a++){var i=t[a],o=n==null?void 0:n[i];r[i]=o===void 0?e[i]:o}return r}},jt=function(e,t,n){for(var r=e.length-1;r>=0&&!(e[r]===t&&(e.splice(r,1),n));r--);},Ka=function(e){e.splice(0,e.length)},qp=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}},yt=function(e,t,n){return n&&(t=Ho(n,t)),e[t]},zt=function(e,t,n,r){n&&(t=Ho(n,t)),e[t]=r},Xp=function(){function e(){Ya(this,e),this._obj={}}return Ha(e,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}]),e}(),wt=typeof Map<"u"?Map:Xp,Yp="undefined",Hp=function(){function e(t){if(Ya(this,e),this._obj=Object.create(null),this.size=0,t!=null){var n;t.instanceString!=null&&t.instanceString()===this.instanceString()?n=t.toArray():n=t;for(var r=0;r<n.length;r++)this.add(n[r])}}return Ha(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}]),e}(),Tn=(typeof Set>"u"?"undefined":Ve(Set))!==Yp?Set:Hp,Jr=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!Wa(e)){ze("An element must have a core reference and parameters set");return}var r=t.group;if(r==null&&(t.data&&t.data.source!=null&&t.data.target!=null?r="edges":r="nodes"),r!=="nodes"&&r!=="edges"){ze("An element must be of type `nodes` or `edges`; you specified `"+r+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?r==="edges":!!t.pannable,active:!1,classes:new Tn,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),t.renderedPosition){var i=t.renderedPosition,o=e.pan(),u=e.zoom();a.position={x:(i.x-o.x)/u,y:(i.y-o.y)/u}}var s=[];Se(t.classes)?s=t.classes:se(t.classes)&&(s=t.classes.split(/\s+/));for(var l=0,c=s.length;l<c;l++){var d=s[l];!d||d===""||a.classes.add(d)}this.createEmitter();var h=t.style||t.css;h&&(_e("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h)),(n===void 0||n)&&this.restore()},Ii=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,r){var a;Ee(t)&&!lt(t)&&(a=t,t=a.roots||a.root,n=a.visit,r=a.directed),r=arguments.length===2&&!Oe(n)?n:r,n=Oe(n)?n:function(){};for(var i=this._private.cy,o=t=se(t)?this.filter(t):t,u=[],s=[],l={},c={},d={},h=0,p,f=this.byGroup(),v=f.nodes,b=f.edges,g=0;g<o.length;g++){var m=o[g],y=m.id();m.isNode()&&(u.unshift(m),e.bfs&&(d[y]=!0,s.push(m)),c[y]=0)}for(var w=function(){var P=e.bfs?u.shift():u.pop(),M=P.id();if(e.dfs){if(d[M])return"continue";d[M]=!0,s.push(P)}var T=c[M],B=l[M],S=B!=null?B.source():null,A=B!=null?B.target():null,N=B==null?void 0:P.same(S)?A[0]:S[0],O=void 0;if(O=n(P,B,N,h++,T),O===!0)return p=P,"break";if(O===!1)return"break";for(var I=P.connectedEdges().filter(function(j){return(!r||j.source().same(P))&&b.has(j)}),z=0;z<I.length;z++){var Y=I[z],V=Y.connectedNodes().filter(function(j){return!j.same(P)&&v.has(j)}),H=V.id();V.length!==0&&!d[H]&&(V=V[0],u.push(V),e.bfs&&(d[H]=!0,s.push(V)),l[H]=Y,c[H]=c[M]+1)}};u.length!==0;){var _=w();if(_!=="continue"&&_==="break")break}for(var k=i.collection(),x=0;x<s.length;x++){var C=s[x],D=l[C.id()];D!=null&&k.push(D),k.push(C)}return{path:i.collection(k),found:i.collection(p)}}},Kn={breadthFirstSearch:Ii({bfs:!0}),depthFirstSearch:Ii({dfs:!0})};Kn.bfs=Kn.breadthFirstSearch;Kn.dfs=Kn.depthFirstSearch;var Wp=Ue({root:null,weight:function(e){return 1},directed:!1}),Up={dijkstra:function(e){if(!Ee(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=Wp(e),r=n.root,a=n.weight,i=n.directed,o=this,u=a,s=se(r)?this.filter(r)[0]:r[0],l={},c={},d={},h=this.byGroup(),p=h.nodes,f=h.edges;f.unmergeBy(function(S){return S.isLoop()});for(var v=function(S){return l[S.id()]},b=function(S,A){l[S.id()]=A,g.updateItem(S)},g=new or.default(function(S,A){return v(S)-v(A)}),m=0;m<p.length;m++){var y=p[m];l[y.id()]=y.same(s)?0:1/0,g.push(y)}for(var w=function(S,A){for(var N=(i?S.edgesTo(A):S.edgesWith(A)).intersect(f),O=1/0,I,z=0;z<N.length;z++){var Y=N[z],V=u(Y);(V<O||!I)&&(O=V,I=Y)}return{edge:I,dist:O}};g.size()>0;){var _=g.pop(),k=v(_),x=_.id();if(d[x]=k,k!==1/0)for(var C=_.neighborhood().intersect(p),D=0;D<C.length;D++){var P=C[D],M=P.id(),T=w(_,P),B=k+T.dist;B<v(P)&&(b(P,B),c[M]={node:_,edge:T.edge})}}return{distanceTo:function(S){var A=se(S)?p.filter(S)[0]:S[0];return d[A.id()]},pathTo:function(S){var A=se(S)?p.filter(S)[0]:S[0],N=[],O=A,I=O.id();if(A.length>0)for(N.unshift(A);c[I];){var z=c[I];N.unshift(z.edge),N.unshift(z.node),O=z.node,I=O.id()}return o.spawn(N)}}}},Zp={kruskal:function(e){e=e||function(m){return 1};for(var t=this.byGroup(),n=t.nodes,r=t.edges,a=n.length,i=new Array(a),o=n,u=function(m){for(var y=0;y<i.length;y++){var w=i[y];if(w.has(m))return y}},s=0;s<a;s++)i[s]=this.spawn(n[s]);for(var l=r.sort(function(m,y){return e(m)-e(y)}),c=0;c<l.length;c++){var d=l[c],h=d.source()[0],p=d.target()[0],f=u(h),v=u(p),b=i[f],g=i[v];f!==v&&(o.merge(d),b.merge(g),i.splice(v,1))}return o}},Gp=Ue({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Kp={aStar:function(e){var t=this.cy(),n=Gp(e),r=n.root,a=n.goal,i=n.heuristic,o=n.directed,u=n.weight;r=t.collection(r)[0],a=t.collection(a)[0];var s=r.id(),l=a.id(),c={},d={},h={},p=new or.default(function(z,Y){return d[z.id()]-d[Y.id()]}),f=new Tn,v={},b={},g=function(z,Y){p.push(z),f.add(Y)},m,y,w=function(){m=p.pop(),y=m.id(),f.delete(y)},_=function(z){return f.has(z)};g(r,s),c[s]=0,d[s]=i(r);for(var k=0;p.size()>0;){if(w(),k++,y===l){for(var x=[],C=a,D=l,P=b[D];x.unshift(C),P!=null&&x.unshift(P),C=v[D],C!=null;)D=C.id(),P=b[D];return{found:!0,distance:c[y],path:this.spawn(x),steps:k}}h[y]=!0;for(var M=m._private.edges,T=0;T<M.length;T++){var B=M[T];if(this.hasElementWithId(B.id())&&!(o&&B.data("source")!==y)){var S=B.source(),A=B.target(),N=S.id()!==y?S:A,O=N.id();if(this.hasElementWithId(O)&&!h[O]){var I=c[y]+u(B);if(!_(O)){c[O]=I,d[O]=I+i(N),g(N,O),v[O]=m,b[O]=B;continue}I<c[O]&&(c[O]=I,d[O]=I+i(N),v[O]=m,b[O]=B)}}}}return{found:!1,distance:void 0,path:void 0,steps:k}}},$p=Ue({weight:function(e){return 1},directed:!1}),Qp={floydWarshall:function(e){for(var t=this.cy(),n=$p(e),r=n.weight,a=n.directed,i=r,o=this.byGroup(),u=o.nodes,s=o.edges,l=u.length,c=l*l,d=function(V){return u.indexOf(V)},h=function(V){return u[V]},p=new Array(c),f=0;f<c;f++){var v=f%l,b=(f-v)/l;b===v?p[f]=0:p[f]=1/0}for(var g=new Array(c),m=new Array(c),y=0;y<s.length;y++){var w=s[y],_=w.source()[0],k=w.target()[0];if(_!==k){var x=d(_),C=d(k),D=x*l+C,P=i(w);if(p[D]>P&&(p[D]=P,g[D]=C,m[D]=w),!a){var M=C*l+x;!a&&p[M]>P&&(p[M]=P,g[M]=x,m[M]=w)}}}for(var T=0;T<l;T++)for(var B=0;B<l;B++)for(var S=B*l+T,A=0;A<l;A++){var N=B*l+A,O=T*l+A;p[S]+p[O]<p[N]&&(p[N]=p[S]+p[O],g[N]=g[S])}var I=function(V){return(se(V)?t.filter(V):V)[0]},z=function(V){return d(I(V))},Y={distance:function(V,H){var j=z(V),W=z(H);return p[j*l+W]},path:function(V,H){var j=z(V),W=z(H),ee=h(j);if(j===W)return ee.collection();if(g[j*l+W]==null)return t.collection();var L=t.collection(),F=j,U;for(L.merge(ee);j!==W;)F=j,j=g[j*l+W],U=m[F*l+j],L.merge(U),L.merge(h(j));return L}};return Y}},Jp=Ue({weight:function(e){return 1},directed:!1,root:null}),ef={bellmanFord:function(e){var t=this,n=Jp(e),r=n.weight,a=n.directed,i=n.root,o=r,u=this,s=this.cy(),l=this.byGroup(),c=l.edges,d=l.nodes,h=d.length,p=new wt,f=!1,v=[];i=s.collection(i)[0],c.unmergeBy(function(te){return te.isLoop()});for(var b=c.length,g=function(te){var ne=p.get(te.id());return ne||(ne={},p.set(te.id(),ne)),ne},m=function(te){return(se(te)?s.$(te):te)[0]},y=function(te){return g(m(te)).dist},w=function(te){for(var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,oe=m(te),de=[],fe=oe;;){if(fe==null)return t.spawn();var ce=g(fe),xe=ce.edge,E=ce.pred;if(de.unshift(fe[0]),fe.same(ne)&&de.length>0)break;xe!=null&&de.unshift(xe),fe=E}return u.spawn(de)},_=0;_<h;_++){var k=d[_],x=g(k);k.same(i)?x.dist=0:x.dist=1/0,x.pred=null,x.edge=null}for(var C=!1,D=function(te,ne,oe,de,fe,ce){var xe=de.dist+ce;xe<fe.dist&&!oe.same(de.edge)&&(fe.dist=xe,fe.pred=te,fe.edge=oe,C=!0)},P=1;P<h;P++){C=!1;for(var M=0;M<b;M++){var T=c[M],B=T.source(),S=T.target(),A=o(T),N=g(B),O=g(S);D(B,S,T,N,O,A),a||D(S,B,T,O,N,A)}if(!C)break}if(C)for(var I=[],z=0;z<b;z++){var Y=c[z],V=Y.source(),H=Y.target(),j=o(Y),W=g(V).dist,ee=g(H).dist;if(W+j<ee||!a&&ee+j<W)if(f||(_e("Graph contains a negative weight cycle for Bellman-Ford"),f=!0),e.findNegativeWeightCycles!==!1){var L=[];W+j<ee&&L.push(V),!a&&ee+j<W&&L.push(H);for(var F=L.length,U=0;U<F;U++){var Q=L[U],$=[Q];$.push(g(Q).edge);for(var le=g(Q).pred;$.indexOf(le)===-1;)$.push(le),$.push(g(le).edge),le=g(le).pred;$=$.slice($.indexOf(le));for(var ve=$[0].id(),me=0,K=2;K<$.length;K+=2)$[K].id()<ve&&(ve=$[K].id(),me=K);$=$.slice(me).concat($.slice(0,me)),$.push($[0]);var ae=$.map(function(te){return te.id()}).join(",");I.indexOf(ae)===-1&&(v.push(u.spawn($)),I.push(ae))}}else break}return{distanceTo:y,pathTo:w,hasNegativeWeightCycle:f,negativeWeightCycles:v}}},tf=Math.sqrt(2),nf=function(e,t,n){n.length===0&&ze("Karger-Stein must be run on a connected (sub)graph");for(var r=n[e],a=r[1],i=r[2],o=t[a],u=t[i],s=n,l=s.length-1;l>=0;l--){var c=s[l],d=c[1],h=c[2];(t[d]===o&&t[h]===u||t[d]===u&&t[h]===o)&&s.splice(l,1)}for(var p=0;p<s.length;p++){var f=s[p];f[1]===u?(s[p]=f.slice(),s[p][1]=o):f[2]===u&&(s[p]=f.slice(),s[p][2]=o)}for(var v=0;v<t.length;v++)t[v]===u&&(t[v]=o);return s},va=function(e,t,n,r){for(;n>r;){var a=Math.floor(Math.random()*t.length);t=nf(a,e,t),n--}return t},rf={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,r=t.edges;r.unmergeBy(function(O){return O.isLoop()});var a=n.length,i=r.length,o=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),u=Math.floor(a/tf);if(a<2){ze("At least 2 nodes are required for Karger-Stein algorithm");return}for(var s=[],l=0;l<i;l++){var c=r[l];s.push([l,n.indexOf(c.source()),n.indexOf(c.target())])}for(var d=1/0,h=[],p=new Array(a),f=new Array(a),v=new Array(a),b=function(O,I){for(var z=0;z<a;z++)I[z]=O[z]},g=0;g<=o;g++){for(var m=0;m<a;m++)f[m]=m;var y=va(f,s.slice(),a,u),w=y.slice();b(f,v);var _=va(f,y,u,2),k=va(v,w,u,2);_.length<=k.length&&_.length<d?(d=_.length,h=_,b(f,p)):k.length<=_.length&&k.length<d&&(d=k.length,h=k,b(v,p))}for(var x=this.spawn(h.map(function(O){return r[O[0]]})),C=this.spawn(),D=this.spawn(),P=p[0],M=0;M<p.length;M++){var T=p[M],B=n[M];T===P?C.merge(B):D.merge(B)}var S=function(O){var I=e.spawn();return O.forEach(function(z){I.merge(z),z.connectedEdges().forEach(function(Y){e.contains(Y)&&!x.contains(Y)&&I.merge(Y)})}),I},A=[S(C),S(D)],N={cut:x,components:A,partition1:C,partition2:D};return N}},af=function(e){return{x:e.x,y:e.y}},ea=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},rs=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},fn=function(e){return{x:e[0],y:e[1]}},of=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=1/0,a=t;a<n;a++){var i=e[a];isFinite(i)&&(r=Math.min(i,r))}return r},sf=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=-1/0,a=t;a<n;a++){var i=e[a];isFinite(i)&&(r=Math.max(i,r))}return r},lf=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=0,a=0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(r+=o,a++)}return r/a},uf=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;r?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var o=0,u=e.length-1;u>=0;u--){var s=e[u];i?isFinite(s)||(e[u]=-1/0,o++):e.splice(u,1)}a&&e.sort(function(d,h){return d-h});var l=e.length,c=Math.floor(l/2);return l%2!==0?e[c+1+o]:(e[c-1+o]+e[c+o])/2},cf=function(e){return Math.PI*e/180},xr=function(e,t){return Math.atan2(t,e)-Math.PI/2},$a=Math.log2||function(e){return Math.log(e)/Math.log(2)},as=function(e){return e>0?1:e<0?-1:0},Jt=function(e,t){return Math.sqrt(Gt(e,t))},Gt=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},df=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(var a=0;a<t;a++)e[a]=e[a]/n;return e},je=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},vn=function(e,t,n,r){return{x:je(e.x,t.x,n.x,r),y:je(e.y,t.y,n.y,r)}},hf=function(e,t,n,r){var a={x:t.x-e.x,y:t.y-e.y},i=Jt(e,t),o={x:a.x/i,y:a.y/i};return n=n??0,r=r??n*i,{x:e.x+o.x*r,y:e.y+o.y*r}},$n=function(e,t,n){return Math.max(e,Math.min(n,t))},st=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},pf=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},ff=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},gf=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},vf=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Sr=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},ma=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,r,a,i;if(t.length===1)n=r=a=i=t[0];else if(t.length===2)n=a=t[0],i=r=t[1];else if(t.length===4){var o=Dt(t,4);n=o[0],r=o[1],a=o[2],i=o[3]}return e.x1-=i,e.x2+=r,e.y1-=n,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Oi=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Qa=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},xn=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},mf=function(e,t){return xn(e,t.x,t.y)},is=function(e,t){return xn(e,t.x1,t.y1)&&xn(e,t.x2,t.y2)},os=function(e,t,n,r,a,i,o){var u=ur(a,i),s=a/2,l=i/2,c;{var d=n-s+u-o,h=r-l-o,p=n+s-u+o,f=h;if(c=Lt(e,t,n,r,d,h,p,f,!1),c.length>0)return c}{var v=n+s+o,b=r-l+u-o,g=v,m=r+l-u+o;if(c=Lt(e,t,n,r,v,b,g,m,!1),c.length>0)return c}{var y=n-s+u-o,w=r+l+o,_=n+s-u+o,k=w;if(c=Lt(e,t,n,r,y,w,_,k,!1),c.length>0)return c}{var x=n-s-o,C=r-l+u-o,D=x,P=r+l-u+o;if(c=Lt(e,t,n,r,x,C,D,P,!1),c.length>0)return c}var M;{var T=n-s+u,B=r-l+u;if(M=qn(e,t,n,r,T,B,u+o),M.length>0&&M[0]<=T&&M[1]<=B)return[M[0],M[1]]}{var S=n+s-u,A=r-l+u;if(M=qn(e,t,n,r,S,A,u+o),M.length>0&&M[0]>=S&&M[1]<=A)return[M[0],M[1]]}{var N=n+s-u,O=r+l-u;if(M=qn(e,t,n,r,N,O,u+o),M.length>0&&M[0]>=N&&M[1]>=O)return[M[0],M[1]]}{var I=n-s+u,z=r+l-u;if(M=qn(e,t,n,r,I,z,u+o),M.length>0&&M[0]<=I&&M[1]>=z)return[M[0],M[1]]}return[]},yf=function(e,t,n,r,a,i,o){var u=o,s=Math.min(n,a),l=Math.max(n,a),c=Math.min(r,i),d=Math.max(r,i);return s-u<=e&&e<=l+u&&c-u<=t&&t<=d+u},bf=function(e,t,n,r,a,i,o,u,s){var l={x1:Math.min(n,o,a)-s,x2:Math.max(n,o,a)+s,y1:Math.min(r,u,i)-s,y2:Math.max(r,u,i)+s};return!(e<l.x1||e>l.x2||t<l.y1||t>l.y2)},xf=function(e,t,n,r){n-=r;var a=t*t-4*e*n;if(a<0)return[];var i=Math.sqrt(a),o=2*e,u=(-t+i)/o,s=(-t-i)/o;return[u,s]},wf=function(e,t,n,r,a){var i=1e-5;e===0&&(e=i),t/=e,n/=e,r/=e;var o,u,s,l,c,d,h,p;if(u=(3*n-t*t)/9,s=-(27*r)+t*(9*n-2*(t*t)),s/=54,o=u*u*u+s*s,a[1]=0,h=t/3,o>0){c=s+Math.sqrt(o),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),d=s-Math.sqrt(o),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),a[0]=-h+c+d,h+=(c+d)/2,a[4]=a[2]=-h,h=Math.sqrt(3)*(-d+c)/2,a[3]=h,a[5]=-h;return}if(a[5]=a[3]=0,o===0){p=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),a[0]=-h+2*p,a[4]=a[2]=-(p+h);return}u=-u,l=u*u*u,l=Math.acos(s/Math.sqrt(l)),p=2*Math.sqrt(u),a[0]=-h+p*Math.cos(l/3),a[2]=-h+p*Math.cos((l+2*Math.PI)/3),a[4]=-h+p*Math.cos((l+4*Math.PI)/3)},Ef=function(e,t,n,r,a,i,o,u){var s=1*n*n-4*n*a+2*n*o+4*a*a-4*a*o+o*o+r*r-4*r*i+2*r*u+4*i*i-4*i*u+u*u,l=1*9*n*a-3*n*n-3*n*o-6*a*a+3*a*o+9*r*i-3*r*r-3*r*u-6*i*i+3*i*u,c=1*3*n*n-6*n*a+n*o-n*e+2*a*a+2*a*e-o*e+3*r*r-6*r*i+r*u-r*t+2*i*i+2*i*t-u*t,d=1*n*a-n*n+n*e-a*e+r*i-r*r+r*t-i*t,h=[];wf(s,l,c,d,h);for(var p=1e-7,f=[],v=0;v<6;v+=2)Math.abs(h[v+1])<p&&h[v]>=0&&h[v]<=1&&f.push(h[v]);f.push(1),f.push(0);for(var b=-1,g,m,y,w=0;w<f.length;w++)g=Math.pow(1-f[w],2)*n+2*(1-f[w])*f[w]*a+f[w]*f[w]*o,m=Math.pow(1-f[w],2)*r+2*(1-f[w])*f[w]*i+f[w]*f[w]*u,y=Math.pow(g-e,2)+Math.pow(m-t,2),b>=0?y<b&&(b=y):b=y;return b},kf=function(e,t,n,r,a,i){var o=[e-n,t-r],u=[a-n,i-r],s=u[0]*u[0]+u[1]*u[1],l=o[0]*o[0]+o[1]*o[1],c=o[0]*u[0]+o[1]*u[1],d=c*c/s;return c<0?l:d>s?(e-a)*(e-a)+(t-i)*(t-i):l-d},ot=function(e,t,n){for(var r,a,i,o,u,s=0,l=0;l<n.length/2;l++)if(r=n[l*2],a=n[l*2+1],l+1<n.length/2?(i=n[(l+1)*2],o=n[(l+1)*2+1]):(i=n[(l+1-n.length/2)*2],o=n[(l+1-n.length/2)*2+1]),!(r==e&&i==e))if(r>=e&&e>=i||r<=e&&e<=i)u=(e-r)/(i-r)*(o-a)+a,u>t&&s++;else continue;return s%2!==0},_t=function(e,t,n,r,a,i,o,u,s){var l=new Array(n.length),c;u[0]!=null?(c=Math.atan(u[1]/u[0]),u[0]<0?c=c+Math.PI/2:c=-c-Math.PI/2):c=u;for(var d=Math.cos(-c),h=Math.sin(-c),p=0;p<l.length/2;p++)l[p*2]=i/2*(n[p*2]*d-n[p*2+1]*h),l[p*2+1]=o/2*(n[p*2+1]*d+n[p*2]*h),l[p*2]+=r,l[p*2+1]+=a;var f;if(s>0){var v=ls(l,-s);f=ss(v)}else f=l;return ot(e,t,f)},Cf=function(e,t,n,r,a,i,o){for(var u=new Array(n.length),s=i/2,l=o/2,c=Ja(i,o),d=c*c,h=0;h<n.length/4;h++){var p=void 0,f=void 0;h===0?p=n.length-2:p=h*4-2,f=h*4+2;var v=r+s*n[h*4],b=a+l*n[h*4+1],g=-n[p]*n[f]-n[p+1]*n[f+1],m=c/Math.tan(Math.acos(g)/2),y=v-m*n[p],w=b-m*n[p+1],_=v+m*n[f],k=b+m*n[f+1];u[h*4]=y,u[h*4+1]=w,u[h*4+2]=_,u[h*4+3]=k;var x=n[p+1],C=-n[p],D=x*n[f]+C*n[f+1];D<0&&(x*=-1,C*=-1);var P=y+x*c,M=w+C*c,T=Math.pow(P-e,2)+Math.pow(M-t,2);if(T<=d)return!0}return ot(e,t,u)},ss=function(e){for(var t=new Array(e.length/2),n,r,a,i,o,u,s,l,c=0;c<e.length/4;c++){n=e[c*4],r=e[c*4+1],a=e[c*4+2],i=e[c*4+3],c<e.length/4-1?(o=e[(c+1)*4],u=e[(c+1)*4+1],s=e[(c+1)*4+2],l=e[(c+1)*4+3]):(o=e[0],u=e[1],s=e[2],l=e[3]);var d=Lt(n,r,a,i,o,u,s,l,!0);t[c*2]=d[0],t[c*2+1]=d[1]}return t},ls=function(e,t){for(var n=new Array(e.length*2),r,a,i,o,u=0;u<e.length/2;u++){r=e[u*2],a=e[u*2+1],u<e.length/2-1?(i=e[(u+1)*2],o=e[(u+1)*2+1]):(i=e[0],o=e[1]);var s=o-a,l=-(i-r),c=Math.sqrt(s*s+l*l),d=s/c,h=l/c;n[u*4]=r+d*t,n[u*4+1]=a+h*t,n[u*4+2]=i+d*t,n[u*4+3]=o+h*t}return n},Df=function(e,t,n,r,a,i){var o=n-e,u=r-t;o/=a,u/=i;var s=Math.sqrt(o*o+u*u),l=s-1;if(l<0)return[];var c=l/s;return[(n-e)*c+e,(r-t)*c+t]},$t=function(e,t,n,r,a,i,o){return e-=a,t-=i,e/=n/2+o,t/=r/2+o,e*e+t*t<=1},qn=function(e,t,n,r,a,i,o){var u=[n-e,r-t],s=[e-a,t-i],l=u[0]*u[0]+u[1]*u[1],c=2*(s[0]*u[0]+s[1]*u[1]),d=s[0]*s[0]+s[1]*s[1]-o*o,h=c*c-4*l*d;if(h<0)return[];var p=(-c+Math.sqrt(h))/(2*l),f=(-c-Math.sqrt(h))/(2*l),v=Math.min(p,f),b=Math.max(p,f),g=[];if(v>=0&&v<=1&&g.push(v),b>=0&&b<=1&&g.push(b),g.length===0)return[];var m=g[0]*u[0]+e,y=g[0]*u[1]+t;if(g.length>1){if(g[0]==g[1])return[m,y];var w=g[1]*u[0]+e,_=g[1]*u[1]+t;return[m,y,w,_]}else return[m,y]},ya=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},Lt=function(e,t,n,r,a,i,o,u,s){var l=e-a,c=n-e,d=o-a,h=t-i,p=r-t,f=u-i,v=d*h-f*l,b=c*h-p*l,g=f*c-d*p;if(g!==0){var m=v/g,y=b/g,w=.001,_=0-w,k=1+w;return _<=m&&m<=k&&_<=y&&y<=k?[e+m*c,t+m*p]:s?[e+m*c,t+m*p]:[]}else return v===0||b===0?ya(e,n,o)===o?[o,u]:ya(e,n,a)===a?[a,i]:ya(a,o,n)===n?[n,r]:[]:[]},Qn=function(e,t,n,r,a,i,o,u){var s=[],l,c=new Array(n.length),d=!0;i==null&&(d=!1);var h;if(d){for(var p=0;p<c.length/2;p++)c[p*2]=n[p*2]*i+r,c[p*2+1]=n[p*2+1]*o+a;if(u>0){var f=ls(c,-u);h=ss(f)}else h=c}else h=n;for(var v,b,g,m,y=0;y<h.length/2;y++)v=h[y*2],b=h[y*2+1],y<h.length/2-1?(g=h[(y+1)*2],m=h[(y+1)*2+1]):(g=h[0],m=h[1]),l=Lt(e,t,r,a,v,b,g,m),l.length!==0&&s.push(l[0],l[1]);return s},Tf=function(e,t,n,r,a,i,o,u){for(var s=[],l,c=new Array(n.length),d=i/2,h=o/2,p=Ja(i,o),f=0;f<n.length/4;f++){var v=void 0,b=void 0;f===0?v=n.length-2:v=f*4-2,b=f*4+2;var g=r+d*n[f*4],m=a+h*n[f*4+1],y=-n[v]*n[b]-n[v+1]*n[b+1],w=p/Math.tan(Math.acos(y)/2),_=g-w*n[v],k=m-w*n[v+1],x=g+w*n[b],C=m+w*n[b+1];f===0?(c[n.length-2]=_,c[n.length-1]=k):(c[f*4-2]=_,c[f*4-1]=k),c[f*4]=x,c[f*4+1]=C;var D=n[v+1],P=-n[v],M=D*n[b]+P*n[b+1];M<0&&(D*=-1,P*=-1);var T=_+D*p,B=k+P*p;l=qn(e,t,r,a,T,B,p),l.length!==0&&s.push(l[0],l[1])}for(var S=0;S<c.length/4;S++)l=Lt(e,t,r,a,c[S*4],c[S*4+1],c[S*4+2],c[S*4+3],!1),l.length!==0&&s.push(l[0],l[1]);if(s.length>2){for(var A=[s[0],s[1]],N=Math.pow(A[0]-e,2)+Math.pow(A[1]-t,2),O=1;O<s.length/2;O++){var I=Math.pow(s[O*2]-e,2)+Math.pow(s[O*2+1]-t,2);I<=N&&(A[0]=s[O*2],A[1]=s[O*2+1],N=I)}return A}return s},wr=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(r[0]*r[0]+r[1]*r[1]),i=(a-n)/a;return i<0&&(i=1e-5),[t[0]+i*r[0],t[1]+i*r[1]]},tt=function(e,t){var n=Pa(e,t);return n=us(n),n},us=function(e){for(var t,n,r=e.length/2,a=1/0,i=1/0,o=-1/0,u=-1/0,s=0;s<r;s++)t=e[2*s],n=e[2*s+1],a=Math.min(a,t),o=Math.max(o,t),i=Math.min(i,n),u=Math.max(u,n);for(var l=2/(o-a),c=2/(u-i),d=0;d<r;d++)t=e[2*d]=e[2*d]*l,n=e[2*d+1]=e[2*d+1]*c,a=Math.min(a,t),o=Math.max(o,t),i=Math.min(i,n),u=Math.max(u,n);if(i<-1)for(var h=0;h<r;h++)n=e[2*h+1]=e[2*h+1]+(-1-i);return e},Pa=function(e,t){var n=1/e*2*Math.PI,r=e%2===0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var a=new Array(e*2),i,o=0;o<e;o++)i=o*n+r,a[2*o]=Math.cos(i),a[2*o+1]=Math.sin(-i);return a},ur=function(e,t){return Math.min(e/4,t/4,8)},Ja=function(e,t){return Math.min(e/10,t/10,8)},cs=function(){return 8},_f=function(e,t,n){return[e-2*t+n,2*(t-e),e]},Ma=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},Pf=Ue({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Mf={pageRank:function(e){for(var t=Pf(e),n=t.dampingFactor,r=t.precision,a=t.iterations,i=t.weight,o=this._private.cy,u=this.byGroup(),s=u.nodes,l=u.edges,c=s.length,d=c*c,h=l.length,p=new Array(d),f=new Array(c),v=(1-n)/c,b=0;b<c;b++){for(var g=0;g<c;g++){var m=b*c+g;p[m]=0}f[b]=0}for(var y=0;y<h;y++){var w=l[y],_=w.data("source"),k=w.data("target");if(_!==k){var x=s.indexOfId(_),C=s.indexOfId(k),D=i(w),P=C*c+x;p[P]+=D,f[x]+=D}}for(var M=1/c+v,T=0;T<c;T++)if(f[T]===0)for(var B=0;B<c;B++){var S=B*c+T;p[S]=M}else for(var A=0;A<c;A++){var N=A*c+T;p[N]=p[N]/f[T]+v}for(var O=new Array(c),I=new Array(c),z,Y=0;Y<c;Y++)O[Y]=1;for(var V=0;V<a;V++){for(var H=0;H<c;H++)I[H]=0;for(var j=0;j<c;j++)for(var W=0;W<c;W++){var ee=j*c+W;I[j]+=p[ee]*O[W]}df(I),z=O,O=I,I=z;for(var L=0,F=0;F<c;F++){var U=z[F]-O[F];L+=U*U}if(L<r)break}var Q={rank:function($){return $=o.collection($)[0],O[s.indexOf($)]}};return Q}},zi=Ue({root:null,weight:function(e){return 1},directed:!1,alpha:0}),mn={degreeCentralityNormalized:function(e){e=zi(e);var t=this.cy(),n=this.nodes(),r=n.length;if(e.directed){for(var a={},i={},o=0,u=0,s=0;s<r;s++){var l=n[s],c=l.id();e.root=l;var d=this.degreeCentrality(e);o<d.indegree&&(o=d.indegree),u<d.outdegree&&(u=d.outdegree),a[c]=d.indegree,i[c]=d.outdegree}return{indegree:function(g){return o==0?0:(se(g)&&(g=t.filter(g)),a[g.id()]/o)},outdegree:function(g){return u===0?0:(se(g)&&(g=t.filter(g)),i[g.id()]/u)}}}else{for(var h={},p=0,f=0;f<r;f++){var v=n[f];e.root=v;var b=this.degreeCentrality(e);p<b.degree&&(p=b.degree),h[v.id()]=b.degree}return{degree:function(g){return p===0?0:(se(g)&&(g=t.filter(g)),h[g.id()]/p)}}}},degreeCentrality:function(e){e=zi(e);var t=this.cy(),n=this,r=e,a=r.root,i=r.weight,o=r.directed,u=r.alpha;if(a=t.collection(a)[0],o){for(var s=a.connectedEdges(),l=s.filter(function(_){return _.target().same(a)&&n.has(_)}),c=s.filter(function(_){return _.source().same(a)&&n.has(_)}),d=l.length,h=c.length,p=0,f=0,v=0;v<l.length;v++)p+=i(l[v]);for(var b=0;b<c.length;b++)f+=i(c[b]);return{indegree:Math.pow(d,1-u)*Math.pow(p,u),outdegree:Math.pow(h,1-u)*Math.pow(f,u)}}else{for(var g=a.connectedEdges().intersection(n),m=g.length,y=0,w=0;w<g.length;w++)y+=i(g[w]);return{degree:Math.pow(m,1-u)*Math.pow(y,u)}}}};mn.dc=mn.degreeCentrality;mn.dcn=mn.degreeCentralityNormalised=mn.degreeCentralityNormalized;var Li=Ue({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),yn={closenessCentralityNormalized:function(e){for(var t=Li(e),n=t.harmonic,r=t.weight,a=t.directed,i=this.cy(),o={},u=0,s=this.nodes(),l=this.floydWarshall({weight:r,directed:a}),c=0;c<s.length;c++){for(var d=0,h=s[c],p=0;p<s.length;p++)if(c!==p){var f=l.distance(h,s[p]);n?d+=1/f:d+=f}n||(d=1/d),u<d&&(u=d),o[h.id()]=d}return{closeness:function(v){return u==0?0:(se(v)?v=i.filter(v)[0].id():v=v.id(),o[v]/u)}}},closenessCentrality:function(e){var t=Li(e),n=t.root,r=t.weight,a=t.directed,i=t.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:r,directed:a}),u=0,s=this.nodes(),l=0;l<s.length;l++){var c=s[l];if(!c.same(n)){var d=o.distanceTo(c);i?u+=1/d:u+=d}}return i?u:1/u}};yn.cc=yn.closenessCentrality;yn.ccn=yn.closenessCentralityNormalised=yn.closenessCentralityNormalized;var Sf=Ue({weight:null,directed:!1}),Sa={betweennessCentrality:function(e){for(var t=Sf(e),n=t.directed,r=t.weight,a=r!=null,i=this.cy(),o=this.nodes(),u={},s={},l=0,c={set:function(g,m){s[g]=m,m>l&&(l=m)},get:function(g){return s[g]}},d=0;d<o.length;d++){var h=o[d],p=h.id();n?u[p]=h.outgoers().nodes():u[p]=h.openNeighborhood().nodes(),c.set(p,0)}for(var f=function(g){for(var m=o[g].id(),y=[],w={},_={},k={},x=new or.default(function(j,W){return k[j]-k[W]}),C=0;C<o.length;C++){var D=o[C].id();w[D]=[],_[D]=0,k[D]=1/0}for(_[m]=1,k[m]=0,x.push(m);!x.empty();){var P=x.pop();if(y.push(P),a)for(var M=0;M<u[P].length;M++){var T=u[P][M],B=i.getElementById(P),S=void 0;B.edgesTo(T).length>0?S=B.edgesTo(T)[0]:S=T.edgesTo(B)[0];var A=r(S);T=T.id(),k[T]>k[P]+A&&(k[T]=k[P]+A,x.nodes.indexOf(T)<0?x.push(T):x.updateItem(T),_[T]=0,w[T]=[]),k[T]==k[P]+A&&(_[T]=_[T]+_[P],w[T].push(P))}else for(var N=0;N<u[P].length;N++){var O=u[P][N].id();k[O]==1/0&&(x.push(O),k[O]=k[P]+1),k[O]==k[P]+1&&(_[O]=_[O]+_[P],w[O].push(P))}}for(var I={},z=0;z<o.length;z++)I[o[z].id()]=0;for(;y.length>0;){for(var Y=y.pop(),V=0;V<w[Y].length;V++){var H=w[Y][V];I[H]=I[H]+_[H]/_[Y]*(1+I[Y])}Y!=o[g].id()&&c.set(Y,c.get(Y)+I[Y])}},v=0;v<o.length;v++)f(v);var b={betweenness:function(g){var m=i.collection(g).id();return c.get(m)},betweennessNormalized:function(g){if(l==0)return 0;var m=i.collection(g).id();return c.get(m)/l}};return b.betweennessNormalised=b.betweennessNormalized,b}};Sa.bc=Sa.betweennessCentrality;var Bf=Ue({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),Nf=function(e){return Bf(e)},Af=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r](e);return n},If=function(e,t,n){for(var r=0;r<t;r++)e[r*t+r]=n},ds=function(e,t){for(var n,r=0;r<t;r++){n=0;for(var a=0;a<t;a++)n+=e[a*t+r];for(var i=0;i<t;i++)e[i*t+r]=e[i*t+r]/n}},Of=function(e,t,n){for(var r=new Array(n*n),a=0;a<n;a++){for(var i=0;i<n;i++)r[a*n+i]=0;for(var o=0;o<n;o++)for(var u=0;u<n;u++)r[a*n+u]+=e[a*n+o]*t[o*n+u]}return r},zf=function(e,t,n){for(var r=e.slice(0),a=1;a<n;a++)e=Of(e,r,t);return e},Lf=function(e,t,n){for(var r=new Array(t*t),a=0;a<t*t;a++)r[a]=Math.pow(e[a],n);return ds(r,t),r},Rf=function(e,t,n,r){for(var a=0;a<n;a++){var i=Math.round(e[a]*Math.pow(10,r))/Math.pow(10,r),o=Math.round(t[a]*Math.pow(10,r))/Math.pow(10,r);if(i!==o)return!1}return!0},Vf=function(e,t,n,r){for(var a=[],i=0;i<t;i++){for(var o=[],u=0;u<t;u++)Math.round(e[i*t+u]*1e3)/1e3>0&&o.push(n[u]);o.length!==0&&a.push(r.collection(o))}return a},Ff=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},jf=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&Ff(e[t],e[n])&&e.splice(n,1);return e},Ri=function(e){for(var t=this.nodes(),n=this.edges(),r=this.cy(),a=Nf(e),i={},o=0;o<t.length;o++)i[t[o].id()]=o;for(var u=t.length,s=u*u,l=new Array(s),c,d=0;d<s;d++)l[d]=0;for(var h=0;h<n.length;h++){var p=n[h],f=i[p.source().id()],v=i[p.target().id()],b=Af(p,a.attributes);l[f*u+v]+=b,l[v*u+f]+=b}If(l,u,a.multFactor),ds(l,u);for(var g=!0,m=0;g&&m<a.maxIterations;)g=!1,c=zf(l,u,a.expandFactor),l=Lf(c,u,a.inflateFactor),Rf(l,c,s,4)||(g=!0),m++;var y=Vf(l,u,t,r);return y=jf(y),y},qf={markovClustering:Ri,mcl:Ri},Xf=function(e){return e},hs=function(e,t){return Math.abs(t-e)},Vi=function(e,t,n){return e+hs(t,n)},Fi=function(e,t,n){return e+Math.pow(n-t,2)},Yf=function(e){return Math.sqrt(e)},Hf=function(e,t,n){return Math.max(e,hs(t,n))},zn=function(e,t,n,r,a){for(var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Xf,o=r,u,s,l=0;l<e;l++)u=t(l),s=n(l),o=a(o,u,s);return i(o)},wn={euclidean:function(e,t,n){return e>=2?zn(e,t,n,0,Fi,Yf):zn(e,t,n,0,Vi)},squaredEuclidean:function(e,t,n){return zn(e,t,n,0,Fi)},manhattan:function(e,t,n){return zn(e,t,n,0,Vi)},max:function(e,t,n){return zn(e,t,n,-1/0,Hf)}};wn["squared-euclidean"]=wn.squaredEuclidean;wn.squaredeuclidean=wn.squaredEuclidean;function ta(e,t,n,r,a,i){var o;return Oe(e)?o=e:o=wn[e]||wn.euclidean,t===0&&Oe(e)?o(a,i):o(t,n,r,a,i)}var Wf=Ue({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),ei=function(e){return Wf(e)},Fr=function(e,t,n,r,a){var i=a!=="kMedoids",o=i?function(c){return n[c]}:function(c){return r[c](n)},u=function(c){return r[c](t)},s=n,l=t;return ta(e,r.length,o,u,s,l)},ba=function(e,t,n){for(var r=n.length,a=new Array(r),i=new Array(r),o=new Array(t),u=null,s=0;s<r;s++)a[s]=e.min(n[s]).value,i[s]=e.max(n[s]).value;for(var l=0;l<t;l++){u=[];for(var c=0;c<r;c++)u[c]=Math.random()*(i[c]-a[c])+a[c];o[l]=u}return o},ps=function(e,t,n,r,a){for(var i=1/0,o=0,u=0;u<t.length;u++){var s=Fr(n,e,t[u],r,a);s<i&&(i=s,o=u)}return o},fs=function(e,t,n){for(var r=[],a=null,i=0;i<t.length;i++)a=t[i],n[a.id()]===e&&r.push(a);return r},Uf=function(e,t,n){return Math.abs(t-e)<=n},Zf=function(e,t,n){for(var r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++){var i=Math.abs(e[r][a]-t[r][a]);if(i>n)return!1}return!0},Gf=function(e,t,n){for(var r=0;r<n;r++)if(e===t[r])return!0;return!1},ji=function(e,t){var n=new Array(t);if(e.length<50)for(var r=0;r<t;r++){for(var a=e[Math.floor(Math.random()*e.length)];Gf(a,n,r);)a=e[Math.floor(Math.random()*e.length)];n[r]=a}else for(var i=0;i<t;i++)n[i]=e[Math.floor(Math.random()*e.length)];return n},qi=function(e,t,n){for(var r=0,a=0;a<t.length;a++)r+=Fr("manhattan",t[a],e,n,"kMedoids");return r},Kf=function(e){var t=this.cy(),n=this.nodes(),r=null,a=ei(e),i=new Array(a.k),o={},u;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,u=ba(n,a.k,a.attributes)):Ve(a.testCentroids)==="object"?u=a.testCentroids:u=ba(n,a.k,a.attributes):u=ba(n,a.k,a.attributes);for(var s=!0,l=0;s&&l<a.maxIterations;){for(var c=0;c<n.length;c++)r=n[c],o[r.id()]=ps(r,u,a.distance,a.attributes,"kMeans");s=!1;for(var d=0;d<a.k;d++){var h=fs(d,n,o);if(h.length!==0){for(var p=a.attributes.length,f=u[d],v=new Array(p),b=new Array(p),g=0;g<p;g++){b[g]=0;for(var m=0;m<h.length;m++)r=h[m],b[g]+=a.attributes[g](r);v[g]=b[g]/h.length,Uf(v[g],f[g],a.sensitivityThreshold)||(s=!0)}u[d]=v,i[d]=t.collection(h)}}l++}return i},$f=function(e){var t=this.cy(),n=this.nodes(),r=null,a=ei(e),i=new Array(a.k),o,u={},s,l=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(Ve(a.testCentroids)==="object"?o=a.testCentroids:o=ji(n,a.k)):o=ji(n,a.k);for(var c=!0,d=0;c&&d<a.maxIterations;){for(var h=0;h<n.length;h++)r=n[h],u[r.id()]=ps(r,o,a.distance,a.attributes,"kMedoids");c=!1;for(var p=0;p<o.length;p++){var f=fs(p,n,u);if(f.length!==0){l[p]=qi(o[p],f,a.attributes);for(var v=0;v<f.length;v++)s=qi(f[v],f,a.attributes),s<l[p]&&(l[p]=s,o[p]=f[v],c=!0);i[p]=t.collection(f)}}d++}return i},Qf=function(e,t,n,r,a){for(var i,o,u=0;u<t.length;u++)for(var s=0;s<e.length;s++)r[u][s]=Math.pow(n[u][s],a.m);for(var l=0;l<e.length;l++)for(var c=0;c<a.attributes.length;c++){i=0,o=0;for(var d=0;d<t.length;d++)i+=r[d][l]*a.attributes[c](t[d]),o+=r[d][l];e[l][c]=i/o}},Jf=function(e,t,n,r,a){for(var i=0;i<e.length;i++)t[i]=e[i].slice();for(var o,u,s,l=2/(a.m-1),c=0;c<n.length;c++)for(var d=0;d<r.length;d++){o=0;for(var h=0;h<n.length;h++)u=Fr(a.distance,r[d],n[c],a.attributes,"cmeans"),s=Fr(a.distance,r[d],n[h],a.attributes,"cmeans"),o+=Math.pow(u/s,l);e[d][c]=1/o}},eg=function(e,t,n,r){for(var a=new Array(n.k),i=0;i<a.length;i++)a[i]=[];for(var o,u,s=0;s<t.length;s++){o=-1/0,u=-1;for(var l=0;l<t[0].length;l++)t[s][l]>o&&(o=t[s][l],u=l);a[u].push(e[s])}for(var c=0;c<a.length;c++)a[c]=r.collection(a[c]);return a},Xi=function(e){var t=this.cy(),n=this.nodes(),r=ei(e),a,i,o,u,s;u=new Array(n.length);for(var l=0;l<n.length;l++)u[l]=new Array(r.k);o=new Array(n.length);for(var c=0;c<n.length;c++)o[c]=new Array(r.k);for(var d=0;d<n.length;d++){for(var h=0,p=0;p<r.k;p++)o[d][p]=Math.random(),h+=o[d][p];for(var f=0;f<r.k;f++)o[d][f]=o[d][f]/h}i=new Array(r.k);for(var v=0;v<r.k;v++)i[v]=new Array(r.attributes.length);s=new Array(n.length);for(var b=0;b<n.length;b++)s[b]=new Array(r.k);for(var g=!0,m=0;g&&m<r.maxIterations;)g=!1,Qf(i,n,o,s,r),Jf(o,u,i,n,r),Zf(o,u,r.sensitivityThreshold)||(g=!0),m++;return a=eg(n,o,r,t),{clusters:a,degreeOfMembership:o}},tg={kMeans:Kf,kMedoids:$f,fuzzyCMeans:Xi,fcm:Xi},ng=Ue({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),rg={single:"min",complete:"max"},ag=function(e){var t=ng(e),n=rg[t.linkage];return n!=null&&(t.linkage=n),t},Yi=function(e,t,n,r,a){for(var i=0,o=1/0,u,s=a.attributes,l=function(x,C){return ta(a.distance,s.length,function(D){return s[D](x)},function(D){return s[D](C)},x,C)},c=0;c<e.length;c++){var d=e[c].key,h=n[d][r[d]];h<o&&(i=d,o=h)}if(a.mode==="threshold"&&o>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var p=t[i],f=t[r[i]],v;a.mode==="dendrogram"?v={left:p,right:f,key:p.key}:v={value:p.value.concat(f.value),key:p.key},e[p.index]=v,e.splice(f.index,1),t[p.key]=v;for(var b=0;b<e.length;b++){var g=e[b];p.key===g.key?u=1/0:a.linkage==="min"?(u=n[p.key][g.key],n[p.key][g.key]>n[f.key][g.key]&&(u=n[f.key][g.key])):a.linkage==="max"?(u=n[p.key][g.key],n[p.key][g.key]<n[f.key][g.key]&&(u=n[f.key][g.key])):a.linkage==="mean"?u=(n[p.key][g.key]*p.size+n[f.key][g.key]*f.size)/(p.size+f.size):a.mode==="dendrogram"?u=l(g.value,p.value):u=l(g.value[0],p.value[0]),n[p.key][g.key]=n[g.key][p.key]=u}for(var m=0;m<e.length;m++){var y=e[m].key;if(r[y]===p.key||r[y]===f.key){for(var w=y,_=0;_<e.length;_++){var k=e[_].key;n[y][k]<n[y][w]&&(w=k)}r[y]=w}e[m].index=m}return p.key=f.key=p.index=f.index=null,!0},Er=function e(t,n,r){t&&(t.value?n.push(t.value):(t.left&&e(t.left,n),t.right&&e(t.right,n)))},ig=function e(t,n){if(!t)return"";if(t.left&&t.right){var r=e(t.left,n),a=e(t.right,n),i=n.add({group:"nodes",data:{id:r+","+a}});return n.add({group:"edges",data:{source:r,target:i.id()}}),n.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(t.value)return t.value.id()},og=function e(t,n,r){if(!t)return[];var a=[],i=[],o=[];return n===0?(t.left&&Er(t.left,a),t.right&&Er(t.right,i),o=a.concat(i),[r.collection(o)]):n===1?t.value?[r.collection(t.value)]:(t.left&&Er(t.left,a),t.right&&Er(t.right,i),[r.collection(a),r.collection(i)]):t.value?[r.collection(t.value)]:(t.left&&(a=e(t.left,n-1,r)),t.right&&(i=e(t.right,n-1,r)),a.concat(i))},Hi=function(e){for(var t=this.cy(),n=this.nodes(),r=ag(e),a=r.attributes,i=function(g,m){return ta(r.distance,a.length,function(y){return a[y](g)},function(y){return a[y](m)},g,m)},o=[],u=[],s=[],l=[],c=0;c<n.length;c++){var d={value:r.mode==="dendrogram"?n[c]:[n[c]],key:c,index:c};o[c]=d,l[c]=d,u[c]=[],s[c]=0}for(var h=0;h<o.length;h++)for(var p=0;p<=h;p++){var f=void 0;r.mode==="dendrogram"?f=h===p?1/0:i(o[h].value,o[p].value):f=h===p?1/0:i(o[h].value[0],o[p].value[0]),u[h][p]=f,u[p][h]=f,f<u[h][s[h]]&&(s[h]=p)}for(var v=Yi(o,l,u,s,r);v;)v=Yi(o,l,u,s,r);var b;return r.mode==="dendrogram"?(b=og(o[0],r.dendrogramDepth,t),r.addDendrogram&&ig(o[0],t)):(b=new Array(o.length),o.forEach(function(g,m){g.key=g.index=null,b[m]=t.collection(g.value)})),b},sg={hierarchicalClustering:Hi,hca:Hi},lg=Ue({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),ug=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||ze("Damping must range on [0.5, 1).  Got: ".concat(t));var r=["median","mean","min","max"];return r.some(function(a){return a===n})||J(n)||ze("Preference must be one of [".concat(r.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),lg(e)},cg=function(e,t,n,r){var a=function(i,o){return r[o](i)};return-ta(e,r.length,function(i){return a(t,i)},function(i){return a(n,i)},t,n)},dg=function(e,t){var n=null;return t==="median"?n=uf(e):t==="mean"?n=lf(e):t==="min"?n=of(e):t==="max"?n=sf(e):n=t,n},hg=function(e,t,n){for(var r=[],a=0;a<e;a++)t[a*e+a]+n[a*e+a]>0&&r.push(a);return r},Wi=function(e,t,n){for(var r=[],a=0;a<e;a++){for(var i=-1,o=-1/0,u=0;u<n.length;u++){var s=n[u];t[a*e+s]>o&&(i=s,o=t[a*e+s])}i>0&&r.push(i)}for(var l=0;l<n.length;l++)r[n[l]]=n[l];return r},pg=function(e,t,n){for(var r=Wi(e,t,n),a=0;a<n.length;a++){for(var i=[],o=0;o<r.length;o++)r[o]===n[a]&&i.push(o);for(var u=-1,s=-1/0,l=0;l<i.length;l++){for(var c=0,d=0;d<i.length;d++)c+=t[i[d]*e+i[l]];c>s&&(u=l,s=c)}n[a]=i[u]}return r=Wi(e,t,n),r},Ui=function(e){for(var t=this.cy(),n=this.nodes(),r=ug(e),a={},i=0;i<n.length;i++)a[n[i].id()]=i;var o,u,s,l,c,d;o=n.length,u=o*o,s=new Array(u);for(var h=0;h<u;h++)s[h]=-1/0;for(var p=0;p<o;p++)for(var f=0;f<o;f++)p!==f&&(s[p*o+f]=cg(r.distance,n[p],n[f],r.attributes));l=dg(s,r.preference);for(var v=0;v<o;v++)s[v*o+v]=l;c=new Array(u);for(var b=0;b<u;b++)c[b]=0;d=new Array(u);for(var g=0;g<u;g++)d[g]=0;for(var m=new Array(o),y=new Array(o),w=new Array(o),_=0;_<o;_++)m[_]=0,y[_]=0,w[_]=0;for(var k=new Array(o*r.minIterations),x=0;x<k.length;x++)k[x]=0;var C;for(C=0;C<r.maxIterations;C++){for(var D=0;D<o;D++){for(var P=-1/0,M=-1/0,T=-1,B=0,S=0;S<o;S++)m[S]=c[D*o+S],B=d[D*o+S]+s[D*o+S],B>=P?(M=P,P=B,T=S):B>M&&(M=B);for(var A=0;A<o;A++)c[D*o+A]=(1-r.damping)*(s[D*o+A]-P)+r.damping*m[A];c[D*o+T]=(1-r.damping)*(s[D*o+T]-M)+r.damping*m[T]}for(var N=0;N<o;N++){for(var O=0,I=0;I<o;I++)m[I]=d[I*o+N],y[I]=Math.max(0,c[I*o+N]),O+=y[I];O-=y[N],y[N]=c[N*o+N],O+=y[N];for(var z=0;z<o;z++)d[z*o+N]=(1-r.damping)*Math.min(0,O-y[z])+r.damping*m[z];d[N*o+N]=(1-r.damping)*(O-y[N])+r.damping*m[N]}for(var Y=0,V=0;V<o;V++){var H=d[V*o+V]+c[V*o+V]>0?1:0;k[C%r.minIterations*o+V]=H,Y+=H}if(Y>0&&(C>=r.minIterations-1||C==r.maxIterations-1)){for(var j=0,W=0;W<o;W++){w[W]=0;for(var ee=0;ee<r.minIterations;ee++)w[W]+=k[ee*o+W];(w[W]===0||w[W]===r.minIterations)&&j++}if(j===o)break}}for(var L=hg(o,c,d),F=pg(o,s,L),U={},Q=0;Q<L.length;Q++)U[L[Q]]=[];for(var $=0;$<n.length;$++){var le=a[n[$].id()],ve=F[le];ve!=null&&U[ve].push(n[$])}for(var me=new Array(L.length),K=0;K<L.length;K++)me[K]=t.collection(U[L[K]]);return me},fg={affinityPropagation:Ui,ap:Ui},gg=Ue({root:void 0,directed:!1}),vg={hierholzer:function(e){if(!Ee(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=gg(e),r=n.root,a=n.directed,i=this,o=!1,u,s,l;r&&(l=se(r)?this.filter(r)[0].id():r[0].id());var c={},d={};a?i.forEach(function(g){var m=g.id();if(g.isNode()){var y=g.indegree(!0),w=g.outdegree(!0),_=y-w,k=w-y;_==1?u?o=!0:u=m:k==1?s?o=!0:s=m:(k>1||_>1)&&(o=!0),c[m]=[],g.outgoers().forEach(function(x){x.isEdge()&&c[m].push(x.id())})}else d[m]=[void 0,g.target().id()]}):i.forEach(function(g){var m=g.id();if(g.isNode()){var y=g.degree(!0);y%2&&(u?s?o=!0:s=m:u=m),c[m]=[],g.connectedEdges().forEach(function(w){return c[m].push(w.id())})}else d[m]=[g.source().id(),g.target().id()]});var h={found:!1,trail:void 0};if(o)return h;if(s&&u)if(a){if(l&&s!=l)return h;l=s}else{if(l&&s!=l&&u!=l)return h;l||(l=s)}else l||(l=i[0].id());var p=function(g){for(var m=g,y=[g],w,_,k;c[m].length;)w=c[m].shift(),_=d[w][0],k=d[w][1],m!=k?(c[k]=c[k].filter(function(x){return x!=w}),m=k):!a&&m!=_&&(c[_]=c[_].filter(function(x){return x!=w}),m=_),y.unshift(w),y.unshift(m);return y},f=[],v=[];for(v=p(l);v.length!=1;)c[v[0]].length==0?(f.unshift(i.getElementById(v.shift())),f.unshift(i.getElementById(v.shift()))):v=p(v.shift()).concat(v);f.unshift(i.getElementById(v.shift()));for(var b in c)if(c[b].length)return h;return h.found=!0,h.trail=this.spawn(f,!0),h}},kr=function(){var e=this,t={},n=0,r=0,a=[],i=[],o={},u=function(c,d){for(var h=i.length-1,p=[],f=e.spawn();i[h].x!=c||i[h].y!=d;)p.push(i.pop().edge),h--;p.push(i.pop().edge),p.forEach(function(v){var b=v.connectedNodes().intersection(e);f.merge(v),b.forEach(function(g){var m=g.id(),y=g.connectedEdges().intersection(e);f.merge(g),t[m].cutVertex?f.merge(y.filter(function(w){return w.isLoop()})):f.merge(y)})}),a.push(f)},s=function c(d,h,p){d===p&&(r+=1),t[h]={id:n,low:n++,cutVertex:!1};var f=e.getElementById(h).connectedEdges().intersection(e);if(f.size()===0)a.push(e.spawn(e.getElementById(h)));else{var v,b,g,m;f.forEach(function(y){v=y.source().id(),b=y.target().id(),g=v===h?b:v,g!==p&&(m=y.id(),o[m]||(o[m]=!0,i.push({x:h,y:g,edge:y})),g in t?t[h].low=Math.min(t[h].low,t[g].id):(c(d,g,h),t[h].low=Math.min(t[h].low,t[g].low),t[h].id<=t[g].low&&(t[h].cutVertex=!0,u(h,g))))})}};e.forEach(function(c){if(c.isNode()){var d=c.id();d in t||(r=0,s(d,d),t[d].cutVertex=r>1)}});var l=Object.keys(t).filter(function(c){return t[c].cutVertex}).map(function(c){return e.getElementById(c)});return{cut:e.spawn(l),components:a}},mg={hopcroftTarjanBiconnected:kr,htbc:kr,htb:kr,hopcroftTarjanBiconnectedComponents:kr},Cr=function(){var e=this,t={},n=0,r=[],a=[],i=e.spawn(e),o=function u(s){a.push(s),t[s]={index:n,low:n++,explored:!1};var l=e.getElementById(s).connectedEdges().intersection(e);if(l.forEach(function(f){var v=f.target().id();v!==s&&(v in t||u(v),t[v].explored||(t[s].low=Math.min(t[s].low,t[v].low)))}),t[s].index===t[s].low){for(var c=e.spawn();;){var d=a.pop();if(c.merge(e.getElementById(d)),t[d].low=t[s].index,t[d].explored=!0,d===s)break}var h=c.edgesWith(c),p=c.merge(h);r.push(p),i=i.difference(p)}};return e.forEach(function(u){if(u.isNode()){var s=u.id();s in t||o(s)}}),{cut:i,components:r}},yg={tarjanStronglyConnected:Cr,tsc:Cr,tscc:Cr,tarjanStronglyConnectedComponents:Cr},gs={};[Kn,Up,Zp,Kp,Qp,ef,rf,Mf,mn,yn,Sa,qf,tg,sg,fg,vg,mg,yg].forEach(function(e){ue(gs,e)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var vs=0,ms=1,ys=2,Pt=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=vs,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof t=="function"&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};Pt.prototype={fulfill:function(e){return Zi(this,ms,"fulfillValue",e)},reject:function(e){return Zi(this,ys,"rejectReason",e)},then:function(e,t){var n=this,r=new Pt;return n.onFulfilled.push(Ki(e,r,"fulfill")),n.onRejected.push(Ki(t,r,"reject")),bs(n),r.proxy}};var Zi=function(e,t,n,r){return e.state===vs&&(e.state=t,e[n]=r,bs(e)),e},bs=function(e){e.state===ms?Gi(e,"onFulfilled",e.fulfillValue):e.state===ys&&Gi(e,"onRejected",e.rejectReason)},Gi=function(e,t,n){if(e[t].length!==0){var r=e[t];e[t]=[];var a=function(){for(var i=0;i<r.length;i++)r[i](n)};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},Ki=function(e,t,n){return function(r){if(typeof e!="function")t[n].call(t,r);else{var a;try{a=e(r)}catch(i){t.reject(i);return}bg(t,a)}}},bg=function e(t,n){if(t===n||t.proxy===n){t.reject(new TypeError("cannot resolve promise with itself"));return}var r;if(Ve(n)==="object"&&n!==null||typeof n=="function")try{r=n.then}catch(i){t.reject(i);return}if(typeof r=="function"){var a=!1;try{r.call(n,function(i){a||(a=!0,i===n?t.reject(new TypeError("circular thenable chain")):e(t,i))},function(i){a||(a=!0,t.reject(i))})}catch(i){a||t.reject(i)}return}t.fulfill(n)};Pt.all=function(e){return new Pt(function(t,n){for(var r=new Array(e.length),a=0,i=function(u,s){r[u]=s,a++,a===e.length&&t(r)},o=0;o<e.length;o++)(function(u){var s=e[u],l=s!=null&&s.then!=null;if(l)s.then(function(d){i(u,d)},function(d){n(d)});else{var c=s;i(u,c)}})(o)})};Pt.resolve=function(e){return new Pt(function(t,n){t(e)})};Pt.reject=function(e){return new Pt(function(t,n){n(e)})};var _n=typeof Promise<"u"?Promise:Pt,Ba=function(e,t,n){var r=Wa(e),a=!r,i=this._private=ue({duration:1e3},t,n);if(i.target=e,i.style=i.style||i.css,i.started=!1,i.playing=!1,i.hooked=!1,i.applying=!1,i.progress=0,i.completes=[],i.frames=[],i.complete&&Oe(i.complete)&&i.completes.push(i.complete),a){var o=e.position();i.startPosition=i.startPosition||{x:o.x,y:o.y},i.startStyle=i.startStyle||e.cy().style().getAnimationStartStyle(e,i.style)}if(r){var u=e.pan();i.startPan={x:u.x,y:u.y},i.startZoom=e.zoom()}this.length=1,this[0]=this},en=Ba.prototype;ue(en,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),lt(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,s){var l=e[u];l!=null&&(e[u]=e[s],e[s]=l)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var a=e.style[r],i=a.name,o=e.startStyle[i];e.startStyle[i]=a,e.style[r]=o}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new _n(function(r,a){n.push(function(){r()})})}});en.complete=en.completed;en.run=en.play;en.running=en.playing;var xg={animated:function(){return function(){var e=this,t=e.length!==void 0,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return!1;var a=n[0];if(a)return a._private.animation.current.length>0}},clearQueue:function(){return function(){var e=this,t=e.length!==void 0,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var a=0;a<n.length;a++){var i=n[a];i._private.animation.queue=[]}return this}},delay:function(){return function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var n=this,r=n.length!==void 0,a=r?n:[n],i=this._private.cy||this,o=!r,u=!o;if(!i.styleEnabled())return this;var s=i.style();e=ue({},e,t);var l=Object.keys(e).length===0;if(l)return new Ba(a[0],e);switch(e.duration===void 0&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(u&&(e.style=s.getPropsList(e.style||e.css),e.css=void 0),u&&e.renderedPosition!=null){var c=e.renderedPosition,d=i.pan(),h=i.zoom();e.position=rs(c,h,d)}if(o&&e.panBy!=null){var p=e.panBy,f=i.pan();e.pan={x:f.x+p.x,y:f.y+p.y}}var v=e.center||e.centre;if(o&&v!=null){var b=i.getCenterPan(v.eles,e.zoom);b!=null&&(e.pan=b)}if(o&&e.fit!=null){var g=e.fit,m=i.getFitViewport(g.eles||g.boundingBox,g.padding);m!=null&&(e.pan=m.pan,e.zoom=m.zoom)}if(o&&Ee(e.zoom)){var y=i.getZoomedViewport(e.zoom);y!=null?(y.zoomed&&(e.zoom=y.zoom),y.panned&&(e.pan=y.pan)):e.zoom=null}return new Ba(a[0],e)}},animate:function(){return function(e,t){var n=this,r=n.length!==void 0,a=r?n:[n],i=this._private.cy||this;if(!i.styleEnabled())return this;t&&(e=ue({},e,t));for(var o=0;o<a.length;o++){var u=a[o],s=u.animated()&&(e.queue===void 0||e.queue),l=u.animation(e,s?{queue:!0}:void 0);l.play()}return this}},stop:function(){return function(e,t){var n=this,r=n.length!==void 0,a=r?n:[n],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){for(var u=a[o],s=u._private,l=s.animation.current,c=0;c<l.length;c++){var d=l[c],h=d._private;t&&(h.duration=0)}e&&(s.animation.queue=[]),t||(s.animation.current=[])}return i.notify("draw"),this}}},wg={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(n){},beforeSet:function(n,r){},onSet:function(n){},canSet:function(n){return!0}};return e=ue({},t,e),function(n,r){var a=e,i=this,o=i.length!==void 0,u=o?i:[i],s=o?i[0]:i;if(se(n)){var l=n.indexOf(".")!==-1,c=l&&ip.default(n);if(a.allowGetting&&r===void 0){var d;return s&&(a.beforeGet(s),c&&s._private[a.field][n]===void 0?d=rp.default(s._private[a.field],c):d=s._private[a.field][n]),d}else if(a.allowSetting&&r!==void 0){var h=!a.immutableKeys[n];if(h){var p=jo({},n,r);a.beforeSet(i,p);for(var f=0,v=u.length;f<v;f++){var b=u[f];a.canSet(b)&&(c&&s._private[a.field][n]===void 0?ap.default(b._private[a.field],c,r):b._private[a.field][n]=r)}a.updateStyle&&i.updateStyle(),a.onSet(i),a.settingTriggersEvent&&i[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&Ee(n)){var g=n,m,y,w=Object.keys(g);a.beforeSet(i,g);for(var _=0;_<w.length;_++){m=w[_],y=g[m];var k=!a.immutableKeys[m];if(k)for(var x=0;x<u.length;x++){var C=u[x];a.canSet(C)&&(C._private[a.field][m]=y)}}a.updateStyle&&i.updateStyle(),a.onSet(i),a.settingTriggersEvent&&i[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&Oe(n)){var D=n;i.on(a.bindingEvent,D)}else if(a.allowGetting&&n===void 0){var P;return s&&(a.beforeGet(s),P=s._private[a.field]),P}return i}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=ue({},t,e),function(n){var r=e,a=this,i=a.length!==void 0,o=i?a:[a];if(se(n)){for(var u=n.split(/\s+/),s=u.length,l=0;l<s;l++){var c=u[l];if(!Ft(c)){var d=!r.immutableKeys[c];if(d)for(var h=0,p=o.length;h<p;h++)o[h]._private[r.field][c]=void 0}}r.triggerEvent&&a[r.triggerFnName](r.event)}else if(n===void 0){for(var f=0,v=o.length;f<v;f++)for(var b=o[f]._private[r.field],g=Object.keys(b),m=0;m<g.length;m++){var y=g[m],w=!r.immutableKeys[y];w&&(b[y]=void 0)}r.triggerEvent&&a[r.triggerFnName](r.event)}return a}}},Eg={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,r){var a=this,i=Array.prototype.slice.call(arguments,0);return new _n(function(o,u){var s=function(d){a.off.apply(a,c),o(d)},l=i.concat([s]),c=l.concat([]);a.on.apply(a,l)})}}},Te={};[xg,wg,Eg].forEach(function(e){ue(Te,e)});var kg={animate:Te.animate(),animation:Te.animation(),animated:Te.animated(),clearQueue:Te.clearQueue(),delay:Te.delay(),delayAnimation:Te.delayAnimation(),stop:Te.stop()},Br={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(p){return n.push(p)}),n}else Se(e)||(e=(e||"").match(/\S+/g)||[]);for(var r=[],a=new Tn(e),i=0;i<t.length;i++){for(var o=t[i],u=o._private,s=u.classes,l=!1,c=0;c<e.length;c++){var d=e[c],h=s.has(d);if(!h){l=!0;break}}l||(l=s.size!==e.length),l&&(u.classes=a,r.push(o))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){Se(e)||(e=e.match(/\S+/g)||[]);for(var n=this,r=t===void 0,a=[],i=0,o=n.length;i<o;i++)for(var u=n[i],s=u._private.classes,l=!1,c=0;c<e.length;c++){var d=e[c],h=s.has(d),p=!1;t||r&&!h?(s.add(d),p=!0):(!t||r&&h)&&(s.delete(d),p=!0),!l&&p&&(a.push(u),l=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};Br.className=Br.classNames=Br.classes;var we={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Re,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};we.variable="(?:[\\w-.]|(?:\\\\"+we.metaChar+"))+";we.className="(?:[\\w-]|(?:\\\\"+we.metaChar+"))+";we.value=we.string+"|"+we.number;we.id=we.variable;(function(){var e,t,n;for(e=we.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],we.comparatorOp+="|@"+t;for(e=we.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],!(t.indexOf("!")>=0)&&t!=="="&&(we.comparatorOp+="|\\!"+t)})();var Me=function(){return{checks:[]}},re={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Na=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return Tp(e.selector,t.selector)}),Cg=function(){for(var e={},t,n=0;n<Na.length;n++)t=Na[n],e[t.selector]=t.matches;return e}(),Dg=function(e,t){return Cg[e](t)},Tg="("+Na.map(function(e){return e.selector}).join("|")+")",ln=function(e){return e.replace(new RegExp("\\\\("+we.metaChar+")","g"),function(t,n){return n})},Ot=function(e,t,n){e[e.length-1]=n},Aa=[{name:"group",query:!0,regex:"("+we.group+")",populate:function(e,t,n){var r=Dt(n,1),a=r[0];t.checks.push({type:re.GROUP,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:Tg,populate:function(e,t,n){var r=Dt(n,1),a=r[0];t.checks.push({type:re.STATE,value:a})}},{name:"id",query:!0,regex:"\\#("+we.id+")",populate:function(e,t,n){var r=Dt(n,1),a=r[0];t.checks.push({type:re.ID,value:ln(a)})}},{name:"className",query:!0,regex:"\\.("+we.className+")",populate:function(e,t,n){var r=Dt(n,1),a=r[0];t.checks.push({type:re.CLASS,value:ln(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+we.variable+")\\s*\\]",populate:function(e,t,n){var r=Dt(n,1),a=r[0];t.checks.push({type:re.DATA_EXIST,field:ln(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+we.variable+")\\s*("+we.comparatorOp+")\\s*("+we.value+")\\s*\\]",populate:function(e,t,n){var r=Dt(n,3),a=r[0],i=r[1],o=r[2],u=new RegExp("^"+we.string+"$").exec(o)!=null;u?o=o.substring(1,o.length-1):o=parseFloat(o),t.checks.push({type:re.DATA_COMPARE,field:ln(a),operator:i,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+we.boolOp+")\\s*("+we.variable+")\\s*\\]",populate:function(e,t,n){var r=Dt(n,2),a=r[0],i=r[1];t.checks.push({type:re.DATA_BOOL,field:ln(i),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+we.meta+")\\s*("+we.comparatorOp+")\\s*("+we.number+")\\s*\\]\\]",populate:function(e,t,n){var r=Dt(n,3),a=r[0],i=r[1],o=r[2];t.checks.push({type:re.META_COMPARE,field:ln(a),operator:i,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:we.separator,populate:function(e,t){var n=e.currentSubject,r=e.edgeCount,a=e.compoundCount,i=e[e.length-1];n!=null&&(i.subject=n,e.currentSubject=null),i.edgeCount=r,i.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=Me();return o}},{name:"directedEdge",separator:!0,regex:we.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Me(),r=t,a=Me();return n.checks.push({type:re.DIRECTED_EDGE,source:r,target:a}),Ot(e,t,n),e.edgeCount++,a}else{var i=Me(),o=t,u=Me();return i.checks.push({type:re.NODE_SOURCE,source:o,target:u}),Ot(e,t,i),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:we.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Me(),r=t,a=Me();return n.checks.push({type:re.UNDIRECTED_EDGE,nodes:[r,a]}),Ot(e,t,n),e.edgeCount++,a}else{var i=Me(),o=t,u=Me();return i.checks.push({type:re.NODE_NEIGHBOR,node:o,neighbor:u}),Ot(e,t,i),u}}},{name:"child",separator:!0,regex:we.child,populate:function(e,t){if(e.currentSubject==null){var n=Me(),r=Me(),a=e[e.length-1];return n.checks.push({type:re.CHILD,parent:a,child:r}),Ot(e,t,n),e.compoundCount++,r}else if(e.currentSubject===t){var i=Me(),o=e[e.length-1],u=Me(),s=Me(),l=Me(),c=Me();return i.checks.push({type:re.COMPOUND_SPLIT,left:o,right:u,subject:s}),s.checks=t.checks,t.checks=[{type:re.TRUE}],c.checks.push({type:re.TRUE}),u.checks.push({type:re.PARENT,parent:c,child:l}),Ot(e,o,i),e.currentSubject=s,e.compoundCount++,l}else{var d=Me(),h=Me(),p=[{type:re.PARENT,parent:d,child:h}];return d.checks=t.checks,t.checks=p,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:we.descendant,populate:function(e,t){if(e.currentSubject==null){var n=Me(),r=Me(),a=e[e.length-1];return n.checks.push({type:re.DESCENDANT,ancestor:a,descendant:r}),Ot(e,t,n),e.compoundCount++,r}else if(e.currentSubject===t){var i=Me(),o=e[e.length-1],u=Me(),s=Me(),l=Me(),c=Me();return i.checks.push({type:re.COMPOUND_SPLIT,left:o,right:u,subject:s}),s.checks=t.checks,t.checks=[{type:re.TRUE}],c.checks.push({type:re.TRUE}),u.checks.push({type:re.ANCESTOR,ancestor:c,descendant:l}),Ot(e,o,i),e.currentSubject=s,e.compoundCount++,l}else{var d=Me(),h=Me(),p=[{type:re.ANCESTOR,ancestor:d,descendant:h}];return d.checks=t.checks,t.checks=p,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:we.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return _e("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],r=n.checks[0],a=r==null?null:r.type;a===re.DIRECTED_EDGE?r.type=re.NODE_TARGET:a===re.UNDIRECTED_EDGE&&(r.type=re.NODE_NEIGHBOR,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}}];Aa.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var _g=function(e){for(var t,n,r,a=0;a<Aa.length;a++){var i=Aa[a],o=i.name,u=e.match(i.regexObj);if(u!=null){n=u,t=i,r=o;var s=u[0];e=e.substring(s.length);break}}return{expr:t,match:n,name:r,remaining:e}},Pg=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},Mg=function(e){var t=this,n=t.inputText=e,r=t[0]=Me();for(t.length=1,n=Pg(n);;){var a=_g(n);if(a.expr==null)return _e("The selector `"+e+"`is invalid"),!1;var i=a.match.slice(1),o=a.expr.populate(t,r,i);if(o===!1)return!1;if(o!=null&&(r=o),n=a.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var s=0;s<t.length;s++){var l=t[s];if(l.compoundCount>0&&l.edgeCount>0)return _e("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return _e("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;l.edgeCount===1&&_e("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Sg=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(s){return s??""},t=function(s){return se(s)?'"'+s+'"':e(s)},n=function(s){return" "+s+" "},r=function(s,l){var c=s.type,d=s.value;switch(c){case re.GROUP:{var h=e(d);return h.substring(0,h.length-1)}case re.DATA_COMPARE:{var p=s.field,f=s.operator;return"["+p+n(e(f))+t(d)+"]"}case re.DATA_BOOL:{var v=s.operator,b=s.field;return"["+e(v)+b+"]"}case re.DATA_EXIST:{var g=s.field;return"["+g+"]"}case re.META_COMPARE:{var m=s.operator,y=s.field;return"[["+y+n(e(m))+t(d)+"]]"}case re.STATE:return d;case re.ID:return"#"+d;case re.CLASS:return"."+d;case re.PARENT:case re.CHILD:return a(s.parent,l)+n(">")+a(s.child,l);case re.ANCESTOR:case re.DESCENDANT:return a(s.ancestor,l)+" "+a(s.descendant,l);case re.COMPOUND_SPLIT:{var w=a(s.left,l),_=a(s.subject,l),k=a(s.right,l);return w+(w.length>0?" ":"")+_+k}case re.TRUE:return""}},a=function(s,l){return s.checks.reduce(function(c,d,h){return c+(l===s&&h===0?"$":"")+r(d,l)},"")},i="",o=0;o<this.length;o++){var u=this[o];i+=a(u,u.subject),this.length>1&&o<this.length-1&&(i+=", ")}return this.toStringCache=i,i},Bg={parse:Mg,toString:Sg},xs=function(e,t,n){var r,a=se(e),i=J(e),o=se(n),u,s,l=!1,c=!1,d=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),l=!0),(a||o||l)&&(u=!a&&!i?"":""+e,s=""+n),l&&(e=u=u.toLowerCase(),n=s=s.toLowerCase()),t){case"*=":r=u.indexOf(s)>=0;break;case"$=":r=u.indexOf(s,u.length-s.length)>=0;break;case"^=":r=u.indexOf(s)===0;break;case"=":r=e===n;break;case">":d=!0,r=e>n;break;case">=":d=!0,r=e>=n;break;case"<":d=!0,r=e<n;break;case"<=":d=!0,r=e<=n;break;default:r=!1;break}return c&&(e!=null||!d)&&(r=!r),r},Ng=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},Ag=function(e){return e!==void 0},ti=function(e,t){return e.data(t)},Ig=function(e,t){return e[t]()},Le=[],Ae=function(e,t){return e.checks.every(function(n){return Le[n.type](n,t)})};Le[re.GROUP]=function(e,t){var n=e.value;return n==="*"||n===t.group()};Le[re.STATE]=function(e,t){var n=e.value;return Dg(n,t)};Le[re.ID]=function(e,t){var n=e.value;return t.id()===n};Le[re.CLASS]=function(e,t){var n=e.value;return t.hasClass(n)};Le[re.META_COMPARE]=function(e,t){var n=e.field,r=e.operator,a=e.value;return xs(Ig(t,n),r,a)};Le[re.DATA_COMPARE]=function(e,t){var n=e.field,r=e.operator,a=e.value;return xs(ti(t,n),r,a)};Le[re.DATA_BOOL]=function(e,t){var n=e.field,r=e.operator;return Ng(ti(t,n),r)};Le[re.DATA_EXIST]=function(e,t){var n=e.field;return e.operator,Ag(ti(t,n))};Le[re.UNDIRECTED_EDGE]=function(e,t){var n=e.nodes[0],r=e.nodes[1],a=t.source(),i=t.target();return Ae(n,a)&&Ae(r,i)||Ae(r,a)&&Ae(n,i)};Le[re.NODE_NEIGHBOR]=function(e,t){return Ae(e.node,t)&&t.neighborhood().some(function(n){return n.isNode()&&Ae(e.neighbor,n)})};Le[re.DIRECTED_EDGE]=function(e,t){return Ae(e.source,t.source())&&Ae(e.target,t.target())};Le[re.NODE_SOURCE]=function(e,t){return Ae(e.source,t)&&t.outgoers().some(function(n){return n.isNode()&&Ae(e.target,n)})};Le[re.NODE_TARGET]=function(e,t){return Ae(e.target,t)&&t.incomers().some(function(n){return n.isNode()&&Ae(e.source,n)})};Le[re.CHILD]=function(e,t){return Ae(e.child,t)&&Ae(e.parent,t.parent())};Le[re.PARENT]=function(e,t){return Ae(e.parent,t)&&t.children().some(function(n){return Ae(e.child,n)})};Le[re.DESCENDANT]=function(e,t){return Ae(e.descendant,t)&&t.ancestors().some(function(n){return Ae(e.ancestor,n)})};Le[re.ANCESTOR]=function(e,t){return Ae(e.ancestor,t)&&t.descendants().some(function(n){return Ae(e.descendant,n)})};Le[re.COMPOUND_SPLIT]=function(e,t){return Ae(e.subject,t)&&Ae(e.left,t)&&Ae(e.right,t)};Le[re.TRUE]=function(){return!0};Le[re.COLLECTION]=function(e,t){var n=e.value;return n.has(t)};Le[re.FILTER]=function(e,t){var n=e.value;return n(t)};var Og=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===re.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(r){for(var a=0;a<t.length;a++){var i=t[a];if(Ae(i,r))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},zg=function(e){for(var t=this,n=0;n<t.length;n++){var r=t[n];if(Ae(r,e))return!0}return!1},Lg={matches:zg,filter:Og},qt=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||se(e)&&e.match(/^\s*$/)||(lt(e)?this.addQuery({checks:[{type:re.COLLECTION,value:e.collection()}]}):Oe(e)?this.addQuery({checks:[{type:re.FILTER,value:e}]}):se(e)?this.parse(e)||(this.invalid=!0):ze("A selector must be created from a string; found "))},Xt=qt.prototype;[Bg,Lg].forEach(function(e){return ue(Xt,e)});Xt.text=function(){return this.inputText};Xt.size=function(){return this.length};Xt.eq=function(e){return this[e]};Xt.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()};Xt.addQuery=function(e){this[this.length++]=e};Xt.selector=Xt.toString;var Rt={allAre:function(e){var t=new qt(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new qt(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(r)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!r)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(r){return e.hasElementWithId(r.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};Rt.allAreNeighbours=Rt.allAreNeighbors;Rt.has=Rt.contains;Rt.equal=Rt.equals=Rt.same;var ht=function(e,t){return function(n,r,a,i){var o=n,u=this,s;if(o==null?s="":lt(o)&&o.length===1&&(s=o.id()),u.length===1&&s){var l=u[0]._private,c=l.traversalCache=l.traversalCache||{},d=c[t]=c[t]||[],h=Qt(s),p=d[h];return p||(d[h]=e.call(u,n,r,a,i))}else return e.call(u,n,r,a,i)}},En={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var a=this[r],i=a._private.parent;i&&t.push(i)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var a=n[r];t.push(a)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n],a=r.parents();t=t||a,t=t.intersect(a)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:ht(function(e){for(var t=[],n=0;n<this.length;n++)for(var r=this[n],a=r._private.children,i=0;i<a.length;i++)t.push(a[i]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(r){for(var a=0;a<r.length;a++){var i=r[a];t.push(i),i.children().nonempty()&&n(i.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function ni(e,t,n,r){for(var a=[],i=new Tn,o=e.cy(),u=o.hasCompoundNodes(),s=0;s<e.length;s++){var l=e[s];n?a.push(l):u&&r(a,i,l)}for(;a.length>0;){var c=a.shift();t(c),i.add(c.id()),u&&r(a,i,c)}return e}function ws(e,t,n){if(n.isParent())for(var r=n._private.children,a=0;a<r.length;a++){var i=r[a];t.has(i.id())||e.push(i)}}En.forEachDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ni(this,e,t,ws)};function Es(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}En.forEachUp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ni(this,e,t,Es)};function Rg(e,t,n){Es(e,t,n),ws(e,t,n)}En.forEachUpAndDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ni(this,e,t,Rg)};En.ancestors=En.parents;var Jn,ks;Jn=ks={data:Te.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Te.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Te.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Te.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Te.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Te.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Jn.attr=Jn.data;Jn.removeAttr=Jn.removeData;var Vg=ks,na={};function xa(e){return function(t){var n=this;if(t===void 0&&(t=!0),n.length!==0)if(n.isNode()&&!n.removed()){for(var r=0,a=n[0],i=a._private.edges,o=0;o<i.length;o++){var u=i[o];!t&&u.isLoop()||(r+=e(a,u))}return r}else return}}ue(na,{degree:xa(function(e,t){return t.source().same(t.target())?2:1}),indegree:xa(function(e,t){return t.target().same(e)?1:0}),outdegree:xa(function(e,t){return t.source().same(e)?1:0})});function un(e,t){return function(n){for(var r,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],u=o[e](n);u!==void 0&&(r===void 0||t(u,r))&&(r=u)}return r}}ue(na,{minDegree:un("degree",function(e,t){return e<t}),maxDegree:un("degree",function(e,t){return e>t}),minIndegree:un("indegree",function(e,t){return e<t}),maxIndegree:un("indegree",function(e,t){return e>t}),minOutdegree:un("outdegree",function(e,t){return e<t}),maxOutdegree:un("outdegree",function(e,t){return e>t})});ue(na,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}});var bt,Cs,Ds=function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r];if(!a.locked()){var i=a._private.position,o={x:t.x!=null?t.x-i.x:0,y:t.y!=null?t.y-i.y:0};a.isParent()&&!(o.x===0&&o.y===0)&&a.children().shift(o,n),a.dirtyBoundingBoxCache()}}},$i={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){Ds(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};bt=Cs={position:Te.data($i),silentPosition:Te.data(ue({},$i,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){Ds(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(Ee(e))t?this.silentPosition(e):this.position(e);else if(Oe(e)){var n=e,r=this.cy();r.startBatch();for(var a=0;a<this.length;a++){var i=this[a],o=void 0;(o=n(i,a))&&(t?i.silentPosition(o):i.position(o))}r.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var r;if(Ee(e)?(r={x:J(e.x)?e.x:0,y:J(e.y)?e.y:0},n=t):se(e)&&J(t)&&(r={x:0,y:0},r[e]=t),r!=null){var a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i];if(!(a.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),s={x:u.x+r.x,y:u.y+r.y};n?o.silentPosition(s):o.position(s)}}a.endBatch()}return this},silentShift:function(e,t){return Ee(e)?this.shift(e,!0):se(e)&&J(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],r=this.cy(),a=r.zoom(),i=r.pan(),o=Ee(e)?e:void 0,u=o!==void 0||t!==void 0&&se(e);if(n&&n.isNode())if(u)for(var s=0;s<this.length;s++){var l=this[s];t!==void 0?l.position(e,(t-i[e])/a):o!==void 0&&l.position(rs(o,a,i))}else{var c=n.position();return o=ea(c,a,i),e===void 0?o:o[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),a=Ee(e)?e:void 0,i=a!==void 0||t!==void 0&&se(e),o=r.hasCompoundNodes();if(n&&n.isNode())if(i)for(var u=0;u<this.length;u++){var s=this[u],l=o?s.parent():null,c=l&&l.length>0,d=c;c&&(l=l[0]);var h=d?l.position():{x:0,y:0};t!==void 0?s.position(e,t+h[e]):a!==void 0&&s.position({x:a.x+h.x,y:a.y+h.y})}else{var p=n.position(),f=o?n.parent():null,v=f&&f.length>0,b=v;v&&(f=f[0]);var g=b?f.position():{x:0,y:0};return a={x:p.x-g.x,y:p.y-g.y},e===void 0?a:a[e]}else if(!i)return;return this}};bt.modelPosition=bt.point=bt.position;bt.modelPositions=bt.points=bt.positions;bt.renderedPoint=bt.renderedPosition;bt.relativePoint=bt.relativePosition;var Fg=Cs,bn,Ht;bn=Ht={};Ht.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),a=n.pan(),i=t.x1*r+a.x,o=t.x2*r+a.x,u=t.y1*r+a.y,s=t.y2*r+a.y;return{x1:i,x2:o,y1:u,y2:s,w:o-i,h:s-u}};Ht.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();return!t.styleEnabled()||!t.hasCompoundNodes()?this:(this.forEachUp(function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,e||n.emitAndNotify("bounds")}}),this)};Ht.updateCompoundBounds=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function n(o){if(!o.isParent())return;var u=o._private,s=o.children(),l=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},d=s.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),h=u.position;(d.w===0||d.h===0)&&(d={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},d.x1=h.x-d.w/2,d.x2=h.x+d.w/2,d.y1=h.y-d.h/2,d.y2=h.y+d.h/2);function p(D,P,M){var T=0,B=0,S=P+M;return D>0&&S>0&&(T=P/S*D,B=M/S*D),{biasDiff:T,biasComplementDiff:B}}function f(D,P,M,T){if(M.units==="%")switch(T){case"width":return D>0?M.pfValue*D:0;case"height":return P>0?M.pfValue*P:0;case"average":return D>0&&P>0?M.pfValue*(D+P)/2:0;case"min":return D>0&&P>0?D>P?M.pfValue*P:M.pfValue*D:0;case"max":return D>0&&P>0?D>P?M.pfValue*D:M.pfValue*P:0;default:return 0}else return M.units==="px"?M.pfValue:0}var v=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(v=v*100/c.width.val);var b=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(b=b*100/c.width.val);var g=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(g=g*100/c.height.val);var m=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(m=m*100/c.height.val);var y=p(c.width.val-d.w,v,b),w=y.biasDiff,_=y.biasComplementDiff,k=p(c.height.val-d.h,g,m),x=k.biasDiff,C=k.biasComplementDiff;u.autoPadding=f(d.w,d.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),u.autoWidth=Math.max(d.w,c.width.val),h.x=(-w+d.x1+d.x2+_)/2,u.autoHeight=Math.max(d.h,c.height.val),h.y=(-x+d.y1+d.y2+C)/2}for(var r=0;r<this.length;r++){var a=this[r],i=a._private;(!i.compoundBoundsClean||e)&&(n(a),t.batching()||(i.compoundBoundsClean=!0))}return this};var dt=function(e){return e===1/0||e===-1/0?0:e},mt=function(e,t,n,r,a){r-t===0||a-n===0||t==null||n==null||r==null||a==null||(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Kt=function(e,t){return t==null?e:mt(e,t.x1,t.y1,t.x2,t.y2)},Ln=function(e,t,n){return yt(e,t,n)},Dr=function(e,t,n){if(!t.cy().headless()){var r=t._private,a=r.rstyle,i=a.arrowWidth/2,o=t.pstyle(n+"-arrow-shape").value,u,s;if(o!=="none"){n==="source"?(u=a.srcX,s=a.srcY):n==="target"?(u=a.tgtX,s=a.tgtY):(u=a.midX,s=a.midY);var l=r.arrowBounds=r.arrowBounds||{},c=l[n]=l[n]||{};c.x1=u-i,c.y1=s-i,c.x2=u+i,c.y2=s+i,c.w=c.x2-c.x1,c.h=c.y2-c.y1,Sr(c,1),mt(e,c.x1,c.y1,c.x2,c.y2)}}},wa=function(e,t,n){if(!t.cy().headless()){var r;n?r=n+"-":r="";var a=t._private,i=a.rstyle,o=t.pstyle(r+"label").strValue;if(o){var u=t.pstyle("text-halign"),s=t.pstyle("text-valign"),l=Ln(i,"labelWidth",n),c=Ln(i,"labelHeight",n),d=Ln(i,"labelX",n),h=Ln(i,"labelY",n),p=t.pstyle(r+"text-margin-x").pfValue,f=t.pstyle(r+"text-margin-y").pfValue,v=t.isEdge(),b=t.pstyle(r+"text-rotation"),g=t.pstyle("text-outline-width").pfValue,m=t.pstyle("text-border-width").pfValue,y=m/2,w=t.pstyle("text-background-padding").pfValue,_=2,k=c,x=l,C=x/2,D=k/2,P,M,T,B;if(v)P=d-C,M=d+C,T=h-D,B=h+D;else{switch(u.value){case"left":P=d-x,M=d;break;case"center":P=d-C,M=d+C;break;case"right":P=d,M=d+x;break}switch(s.value){case"top":T=h-k,B=h;break;case"center":T=h-D,B=h+D;break;case"bottom":T=h,B=h+k;break}}P+=p-Math.max(g,y)-w-_,M+=p+Math.max(g,y)+w+_,T+=f-Math.max(g,y)-w-_,B+=f+Math.max(g,y)+w+_;var S=n||"main",A=a.labelBounds,N=A[S]=A[S]||{};N.x1=P,N.y1=T,N.x2=M,N.y2=B,N.w=M-P,N.h=B-T;var O=v&&b.strValue==="autorotate",I=b.pfValue!=null&&b.pfValue!==0;if(O||I){var z=O?Ln(a.rstyle,"labelAngle",n):b.pfValue,Y=Math.cos(z),V=Math.sin(z),H=(P+M)/2,j=(T+B)/2;if(!v){switch(u.value){case"left":H=M;break;case"right":H=P;break}switch(s.value){case"top":j=B;break;case"bottom":j=T;break}}var W=function(le,ve){return le=le-H,ve=ve-j,{x:le*Y-ve*V+H,y:le*V+ve*Y+j}},ee=W(P,T),L=W(P,B),F=W(M,T),U=W(M,B);P=Math.min(ee.x,L.x,F.x,U.x),M=Math.max(ee.x,L.x,F.x,U.x),T=Math.min(ee.y,L.y,F.y,U.y),B=Math.max(ee.y,L.y,F.y,U.y)}var Q=S+"Rot",$=A[Q]=A[Q]||{};$.x1=P,$.y1=T,$.x2=M,$.y2=B,$.w=M-P,$.h=B-T,mt(e,P,T,M,B),mt(a.labelBounds.all,P,T,M,B)}return e}},jg=function(e,t){var n=e._private.cy,r=n.styleEnabled(),a=n.headless(),i=st(),o=e._private,u=e.isNode(),s=e.isEdge(),l,c,d,h,p,f,v=o.rstyle,b=u&&r?e.pstyle("bounds-expansion").pfValue:[0],g=function(K){return K.pstyle("display").value!=="none"},m=!r||g(e)&&(!s||g(e.source())&&g(e.target()));if(m){var y=0,w=0;r&&t.includeOverlays&&(y=e.pstyle("overlay-opacity").value,y!==0&&(w=e.pstyle("overlay-padding").value));var _=0,k=0;r&&t.includeUnderlays&&(_=e.pstyle("underlay-opacity").value,_!==0&&(k=e.pstyle("underlay-padding").value));var x=Math.max(w,k),C=0,D=0;if(r&&(C=e.pstyle("width").pfValue,D=C/2),u&&t.includeNodes){var P=e.position();p=P.x,f=P.y;var M=e.outerWidth(),T=M/2,B=e.outerHeight(),S=B/2;l=p-T,c=p+T,d=f-S,h=f+S,mt(i,l,d,c,h)}else if(s&&t.includeEdges)if(r&&!a){var A=e.pstyle("curve-style").strValue;if(l=Math.min(v.srcX,v.midX,v.tgtX),c=Math.max(v.srcX,v.midX,v.tgtX),d=Math.min(v.srcY,v.midY,v.tgtY),h=Math.max(v.srcY,v.midY,v.tgtY),l-=D,c+=D,d-=D,h+=D,mt(i,l,d,c,h),A==="haystack"){var N=v.haystackPts;if(N&&N.length===2){if(l=N[0].x,d=N[0].y,c=N[1].x,h=N[1].y,l>c){var O=l;l=c,c=O}if(d>h){var I=d;d=h,h=I}mt(i,l-D,d-D,c+D,h+D)}}else if(A==="bezier"||A==="unbundled-bezier"||A==="segments"||A==="taxi"){var z;switch(A){case"bezier":case"unbundled-bezier":z=v.bezierPts;break;case"segments":case"taxi":z=v.linePts;break}if(z!=null)for(var Y=0;Y<z.length;Y++){var V=z[Y];l=V.x-D,c=V.x+D,d=V.y-D,h=V.y+D,mt(i,l,d,c,h)}}}else{var H=e.source(),j=H.position(),W=e.target(),ee=W.position();if(l=j.x,c=ee.x,d=j.y,h=ee.y,l>c){var L=l;l=c,c=L}if(d>h){var F=d;d=h,h=F}l-=D,c+=D,d-=D,h+=D,mt(i,l,d,c,h)}if(r&&t.includeEdges&&s&&(Dr(i,e,"mid-source"),Dr(i,e,"mid-target"),Dr(i,e,"source"),Dr(i,e,"target")),r){var U=e.pstyle("ghost").value==="yes";if(U){var Q=e.pstyle("ghost-offset-x").pfValue,$=e.pstyle("ghost-offset-y").pfValue;mt(i,i.x1+Q,i.y1+$,i.x2+Q,i.y2+$)}}var le=o.bodyBounds=o.bodyBounds||{};Oi(le,i),ma(le,b),Sr(le,1),r&&(l=i.x1,c=i.x2,d=i.y1,h=i.y2,mt(i,l-x,d-x,c+x,h+x));var ve=o.overlayBounds=o.overlayBounds||{};Oi(ve,i),ma(ve,b),Sr(ve,1);var me=o.labelBounds=o.labelBounds||{};me.all!=null?ff(me.all):me.all=st(),r&&t.includeLabels&&(t.includeMainLabels&&wa(i,e,null),s&&(t.includeSourceLabels&&wa(i,e,"source"),t.includeTargetLabels&&wa(i,e,"target")))}return i.x1=dt(i.x1),i.y1=dt(i.y1),i.x2=dt(i.x2),i.y2=dt(i.y2),i.w=dt(i.x2-i.x1),i.h=dt(i.y2-i.y1),i.w>0&&i.h>0&&m&&(ma(i,b),Sr(i,1)),i},Ts=function(e){var t=0,n=function(a){return(a?1:0)<<t++},r=0;return r+=n(e.incudeNodes),r+=n(e.includeEdges),r+=n(e.includeLabels),r+=n(e.includeMainLabels),r+=n(e.includeSourceLabels),r+=n(e.includeTargetLabels),r+=n(e.includeOverlays),r},_s=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),r=function(a){return Math.round(a)};return Op([r(t.x),r(t.y),r(n.x),r(n.y)])}else return 0},Qi=function(e,t){var n=e._private,r,a=e.isEdge(),i=t==null?Ji:Ts(t),o=i===Ji,u=_s(e),s=n.bbCachePosKey===u,l=t.useCache&&s,c=function(p){return p._private.bbCache==null||p._private.styleDirty},d=!l||c(e)||a&&c(e.source())||c(e.target());if(d?(s||e.recalculateRenderedStyle(l),r=jg(e,er),n.bbCache=r,n.bbCachePosKey=u):r=n.bbCache,!o){var h=e.isNode();r=st(),(t.includeNodes&&h||t.includeEdges&&!h)&&(t.includeOverlays?Kt(r,n.overlayBounds):Kt(r,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!a||t.includeSourceLabels&&t.includeTargetLabels)?Kt(r,n.labelBounds.all):(t.includeMainLabels&&Kt(r,n.labelBounds.mainRot),t.includeSourceLabels&&Kt(r,n.labelBounds.sourceRot),t.includeTargetLabels&&Kt(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r},er={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},Ji=Ts(er),eo=Ue(er);Ht.boundingBox=function(e){var t;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(e===void 0||e.useCache===void 0||e.useCache===!0))e===void 0?e=er:e=eo(e),t=Qi(this[0],e);else{t=st(),e=e||er;var n=eo(e),r=this,a=r.cy(),i=a.styleEnabled();if(i)for(var o=0;o<r.length;o++){var u=r[o],s=u._private,l=_s(u),c=s.bbCachePosKey===l,d=n.useCache&&c&&!s.styleDirty;u.recalculateRenderedStyle(d)}this.updateCompoundBounds(!e.useCache);for(var h=0;h<r.length;h++){var p=r[h];Kt(t,Qi(p,n))}}return t.x1=dt(t.x1),t.y1=dt(t.y1),t.x2=dt(t.x2),t.y2=dt(t.y2),t.w=dt(t.x2-t.x1),t.h=dt(t.y2-t.y1),t};Ht.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Ht.boundingBoxAt=function(e){var t=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),a=n.collection();if(r&&(a=t.filter(function(l){return l.isParent()}),t=t.not(a)),Ee(e)){var i=e;e=function(){return i}}var o=function(l,c){return l._private.bbAtOldPos=e(l,c)},u=function(l){return l._private.bbAtOldPos};n.startBatch(),t.forEach(o).silentPositions(e),r&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var s=pf(this.boundingBox({useCache:!1}));return t.silentPositions(u),r&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),n.endBatch(),s};bn.boundingbox=bn.bb=bn.boundingBox;bn.renderedBoundingbox=bn.renderedBoundingBox;var qg=Ht,Xn,cr;Xn=cr={};var Ps=function(e){e.uppercaseName=Bi(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Bi(e.outerName),Xn[e.name]=function(){var t=this[0],n=t._private,r=n.cy,a=r._private.styleEnabled;if(t)if(a){if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var i=t.pstyle(e.name);switch(i.strValue){case"label":return t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0;default:return i.pfValue}}else return 1},Xn["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private,r=n.cy,a=r._private.styleEnabled;if(t)if(a){var i=t[e.name](),o=t.pstyle("border-width").pfValue,u=2*t.padding();return i+o+u}else return 1},Xn["rendered"+e.uppercaseName]=function(){var t=this[0];if(t){var n=t[e.name]();return n*this.cy().zoom()}},Xn["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t){var n=t[e.outerName]();return n*this.cy().zoom()}}};Ps({name:"width"});Ps({name:"height"});cr.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),t.autoPadding!==void 0?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue};cr.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()};cr.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var Xg=cr,Yg=function(e,t){if(e.isEdge())return t(e)},Hg=function(e,t){if(e.isEdge()){var n=e.cy();return ea(t(e),n.zoom(),n.pan())}},Wg=function(e,t){if(e.isEdge()){var n=e.cy(),r=n.pan(),a=n.zoom();return t(e).map(function(i){return ea(i,a,r)})}},Ug=function(e){return e.renderer().getControlPoints(e)},Zg=function(e){return e.renderer().getSegmentPoints(e)},Gg=function(e){return e.renderer().getSourceEndpoint(e)},Kg=function(e){return e.renderer().getTargetEndpoint(e)},$g=function(e){return e.renderer().getEdgeMidpoint(e)},to={controlPoints:{get:Ug,mult:!0},segmentPoints:{get:Zg,mult:!0},sourceEndpoint:{get:Gg},targetEndpoint:{get:Kg},midpoint:{get:$g}},Qg=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},Jg=Object.keys(to).reduce(function(e,t){var n=to[t],r=Qg(t);return e[t]=function(){return Yg(this,n.get)},n.mult?e[r]=function(){return Wg(this,n.get)}:e[r]=function(){return Hg(this,n.get)},e},{}),ev=ue({},Fg,qg,Xg,Jg);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Ms=function(e,t){this.recycle(e,t)};function Rn(){return!1}function Tr(){return!0}Ms.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Rn,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Tr:Rn):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,r=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*r+a.x,y:n.y*r+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Tr;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Tr;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Tr,this.stopPropagation()},isDefaultPrevented:Rn,isPropagationStopped:Rn,isImmediatePropagationStopped:Rn};var Ss=/^([^.]+)(\.(?:[^.]+))?$/,tv=".*",Bs={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},no=Object.keys(Bs),nv={};function ra(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nv,t=arguments.length>1?arguments[1]:void 0,n=0;n<no.length;n++){var r=no[n];this[r]=e[r]||Bs[r]}this.context=t||this.context,this.listeners=[],this.emitting=0}var Yt=ra.prototype,Ns=function(e,t,n,r,a,i,o){Oe(r)&&(a=r,r=null),o&&(i==null?i=o:i=ue({},i,o));for(var u=Se(n)?n:n.split(/\s+/),s=0;s<u.length;s++){var l=u[s];if(!Ft(l)){var c=l.match(Ss);if(c){var d=c[1],h=c[2]?c[2]:null,p=t(e,l,d,h,r,a,i);if(p===!1)break}}}},ro=function(e,t){return e.addEventFields(e.context,t),new Ms(t.type,t)},rv=function(e,t,n){if(gp(n)){t(e,n);return}else if(Ee(n)){t(e,ro(e,n));return}for(var r=Se(n)?n:n.split(/\s+/),a=0;a<r.length;a++){var i=r[a];if(!Ft(i)){var o=i.match(Ss);if(o){var u=o[1],s=o[2]?o[2]:null,l=ro(e,{type:u,namespace:s,target:e.context});t(e,l)}}}};Yt.on=Yt.addListener=function(e,t,n,r,a){return Ns(this,function(i,o,u,s,l,c,d){Oe(c)&&i.listeners.push({event:o,callback:c,type:u,namespace:s,qualifier:l,conf:d})},e,t,n,r,a),this};Yt.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})};Yt.removeListener=Yt.off=function(e,t,n,r){var a=this;this.emitting!==0&&(this.listeners=Fp(this.listeners));for(var i=this.listeners,o=function(s){var l=i[s];Ns(a,function(c,d,h,p,f,v){if((l.type===h||e==="*")&&(!p&&l.namespace!==".*"||l.namespace===p)&&(!f||c.qualifierCompare(l.qualifier,f))&&(!v||l.callback===v))return i.splice(s,1),!1},e,t,n,r)},u=i.length-1;u>=0;u--)o(u);return this};Yt.removeAllListeners=function(){return this.removeListener("*")};Yt.emit=Yt.trigger=function(e,t,n){var r=this.listeners,a=r.length;return this.emitting++,Se(t)||(t=[t]),rv(this,function(i,o){n!=null&&(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}],a=r.length);for(var u=function(l){var c=r[l];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===tv)&&i.eventMatches(i.context,c,o)){var d=[o];t!=null&&qp(d,t),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(f){return f!==c}));var h=i.callbackContext(i.context,c,o),p=c.callback.apply(h,d);i.afterEmit(i.context,c,o),p===!1&&(o.stopPropagation(),o.preventDefault())}},s=0;s<a;s++)u(s);i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,t)},e),this.emitting--,this};var av={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return r!=null?e!==n.target&&lr(n.target)&&r.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},_r=function(e){return se(e)?new qt(e):e},As={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new ra(av,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var r=_r(t),a=0;a<this.length;a++){var i=this[a];i.emitter().on(e,r,n)}return this},removeListener:function(e,t,n){for(var r=_r(t),a=0;a<this.length;a++){var i=this[a];i.emitter().removeListener(e,r,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var r=_r(t),a=0;a<this.length;a++){var i=this[a];i.emitter().one(e,r,n)}return this},once:function(e,t,n){for(var r=_r(t),a=0;a<this.length;a++){var i=this[a];i.emitter().on(e,r,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var r=this[n];r.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};Te.eventAliasesOn(As);var Is={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?e.push(r):t.push(r)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(se(e)||lt(e))return new qt(e).filter(this);if(Oe(e)){for(var n=this.spawn(),r=this,a=0;a<r.length;a++){var i=r[a],o=t?e.apply(t,[i,a,r]):e(i,a,r);o&&n.push(i)}return n}return this.spawn()},not:function(e){if(e){se(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var r=this[n],a=e.has(r);a||t.push(r)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(se(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),r=this,a=e,i=this.length<e.length,o=i?r:a,u=i?a:r,s=0;s<o.length;s++){var l=o[s];u.has(l)&&n.push(l)}return n},xor:function(e){var t=this._private.cy;se(e)&&(e=t.$(e));var n=this.spawn(),r=this,a=e,i=function(o,u){for(var s=0;s<o.length;s++){var l=o[s],c=l._private.data.id,d=u.hasElementWithId(c);d||n.push(l)}};return i(r,a),i(a,r),n},diff:function(e){var t=this._private.cy;se(e)&&(e=t.$(e));var n=this.spawn(),r=this.spawn(),a=this.spawn(),i=this,o=e,u=function(s,l,c){for(var d=0;d<s.length;d++){var h=s[d],p=h._private.data.id,f=l.hasElementWithId(p);f?a.merge(h):c.push(h)}};return u(i,o,n),u(o,i,r),{left:n,right:r,both:a}},add:function(e){var t=this._private.cy;if(!e)return this;if(se(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=this.spawnSelf(),a=0;a<e.length;a++){var i=e[a],o=!this.has(i);o&&r.push(i)}return r},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&se(e)){var r=e;e=n.mutableElements().filter(r)}for(var a=t.map,i=0;i<e.length;i++){var o=e[i],u=o._private.data.id,s=!a.has(u);if(s){var l=this.length++;this[l]=o,a.set(u,{ele:o,index:l})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),r=this._private,a=r.map;this[e]=void 0,a.delete(n);var i=e===this.length-1;if(this.length>1&&!i){var o=this.length-1,u=this[o],s=u._private.data.id;this[o]=void 0,this[e]=u,a.set(s,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,r=t.map,a=r.get(n);if(!a)return this;var i=a.index;return this.unmergeAt(i),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&se(e)){var n=e;e=t.mutableElements().filter(n)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],r=this,a=0;a<r.length;a++){var i=r[a],o=t?e.apply(t,[i,a,r]):e(i,a,r);n.push(o)}return n},reduce:function(e,t){for(var n=t,r=this,a=0;a<r.length;a++)n=e(n,r[a],a,r);return n},max:function(e,t){for(var n=-1/0,r,a=this,i=0;i<a.length;i++){var o=a[i],u=t?e.apply(t,[o,i,a]):e(o,i,a);u>n&&(n=u,r=o)}return{value:n,ele:r}},min:function(e,t){for(var n=1/0,r,a=this,i=0;i<a.length;i++){var o=a[i],u=t?e.apply(t,[o,i,a]):e(o,i,a);u<n&&(n=u,r=o)}return{value:n,ele:r}}},Ce=Is;Ce.u=Ce["|"]=Ce["+"]=Ce.union=Ce.or=Ce.add;Ce["\\"]=Ce["!"]=Ce["-"]=Ce.difference=Ce.relativeComplement=Ce.subtract=Ce.not;Ce.n=Ce["&"]=Ce["."]=Ce.and=Ce.intersection=Ce.intersect;Ce["^"]=Ce["(+)"]=Ce["(-)"]=Ce.symmetricDifference=Ce.symdiff=Ce.xor;Ce.fnFilter=Ce.filterFn=Ce.stdFilter=Ce.filter;Ce.complement=Ce.abscomp=Ce.absoluteComplement;var iv={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Os=function(e,t){var n=e.cy(),r=n.hasCompoundNodes();function a(l){var c=l.pstyle("z-compound-depth");return c.value==="auto"?r?l.zDepth():0:c.value==="bottom"?-1:c.value==="top"?Za:0}var i=a(e)-a(t);if(i!==0)return i;function o(l){var c=l.pstyle("z-index-compare");return c.value==="auto"&&l.isNode()?1:0}var u=o(e)-o(t);if(u!==0)return u;var s=e.pstyle("z-index").value-t.pstyle("z-index").value;return s!==0?s:e.poolIndex()-t.poolIndex()},jr={forEach:function(e,t){if(Oe(e))for(var n=this.length,r=0;r<n;r++){var a=this[r],i=t?e.apply(t,[a,r,this]):e(a,r,this);if(i===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;t==null&&(t=r),e==null&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var a=e;a>=0&&a<t&&a<r;a++)n.push(this[a]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Oe(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(Os)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:Za-1}else{var a=t.source,i=t.target,o=a.zDepth(),u=i.zDepth();return Math.max(o,u,0)}}}};jr.each=jr.forEach;var ov=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Ve(Symbol))!=e&&Ve(Symbol.iterator)!=e;t&&(jr[Symbol.iterator]=function(){var n=this,r={value:void 0,done:!1},a=0,i=this.length;return jo({next:function(){return a<i?r.value=n[a++]:(r.value=void 0,r.done=!0),r}},Symbol.iterator,function(){return this})})};ov();var sv=Ue({nodeDimensionsIncludeLabels:!1}),Nr={layoutDimensions:function(e){e=sv(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var r=this.nodes().filter(function(w){return!w.isParent()}),a=this.cy(),i=t.eles,o=function(w){return w.id()},u=Un(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var s=function(w,_,k){var x={x:_.x1+_.w/2,y:_.y1+_.h/2},C={x:(k.x-x.x)*w,y:(k.y-x.y)*w};return{x:x.x+C.x,y:x.y+C.y}},l=t.spacingFactor&&t.spacingFactor!==1,c=function(){if(!l)return null;for(var w=st(),_=0;_<r.length;_++){var k=r[_],x=u(k,_);vf(w,x.x,x.y)}return w},d=c(),h=Un(function(w,_){var k=u(w,_);if(l){var x=Math.abs(t.spacingFactor);k=s(x,d,k)}return t.transform!=null&&(k=t.transform(w,k)),k},o);if(t.animate){for(var p=0;p<r.length;p++){var f=r[p],v=h(f,p),b=t.animateFilter==null||t.animateFilter(f,p);if(b){var g=f.animation({position:v,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(g)}else f.position(v)}if(t.fit){var m=a.animation({fit:{boundingBox:i.boundingBoxAt(h),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else if(t.zoom!==void 0&&t.pan!==void 0){var y=a.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}e.animations.forEach(function(w){return w.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),_n.all(e.animations.map(function(w){return w.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else r.positions(h),t.fit&&a.fit(t.eles,t.padding),t.zoom!=null&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(ue({},e,{eles:this}))}};Nr.createLayout=Nr.makeLayout=Nr.layout;function zs(e,t,n){var r=n._private,a=r.styleCache=r.styleCache||[],i;return(i=a[e])!=null||(i=a[e]=t(n)),i}function aa(e,t){return e=Qt(e),function(n){return zs(e,t,n)}}function ia(e,t){e=Qt(e);var n=function(r){return t.call(r)};return function(){var r=this[0];if(r)return zs(e,n,r)}}var He={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(r){return r._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(r){t(r),r.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var r=t.hasCompoundNodes(),a=this;e=!!(e||e===void 0),r&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var i=a;return e?i.emitAndNotify("style"):i.emit("style"),a.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],r=n.cy();if(r.styleEnabled()&&n){this.cleanStyle();var a=n._private.style[e];return a??(t?r.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,a=n.style();if(Ee(e)){var i=e;a.applyBypass(this,i,r),this.emitAndNotify("style")}else if(se(e))if(t===void 0){var o=this[0];return o?a.getStylePropertyValue(o,e):void 0}else a.applyBypass(this,e,t,r),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?a.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,r=t.style(),a=this;if(e===void 0)for(var i=0;i<a.length;i++){var o=a[i];r.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var u=0;u<a.length;u++){var s=a[u];r.removeBypasses(s,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,a=n.pstyle("opacity").value;if(!t)return a;var i=r.data.parent?n.parents():null;if(i)for(var o=0;o<i.length;o++){var u=i[o],s=u.pstyle("opacity").value;a=s*a}return a}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function Ea(e,t){var n=e._private,r=n.data.parent?e.parents():null;if(r)for(var a=0;a<r.length;a++){var i=r[a];if(!t(i))return!1}return!0}function ri(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var u=i._private;if(!t(i))return!1;if(i.isNode())return!o||Ea(i,r);var s=u.source,l=u.target;return n(s)&&(!o||Ea(s,n))&&(s===l||n(l)&&(!o||Ea(l,n)))}}}var Pn=aa("eleTakesUpSpace",function(e){return e.pstyle("display").value==="element"&&e.width()!==0&&(e.isNode()?e.height()!==0:!0)});He.takesUpSpace=ia("takesUpSpace",ri({ok:Pn}));var lv=aa("eleInteractive",function(e){return e.pstyle("events").value==="yes"&&e.pstyle("visibility").value==="visible"&&Pn(e)}),uv=aa("parentInteractive",function(e){return e.pstyle("visibility").value==="visible"&&Pn(e)});He.interactive=ia("interactive",ri({ok:lv,parentOk:uv,edgeOkViaNode:Pn}));He.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var cv=aa("eleVisible",function(e){return e.pstyle("visibility").value==="visible"&&e.pstyle("opacity").pfValue!==0&&Pn(e)}),dv=Pn;He.visible=ia("visible",ri({ok:cv,edgeOkViaNode:dv}));He.hidden=function(){var e=this[0];if(e)return!e.visible()};He.isBundledBezier=ia("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});He.bypass=He.css=He.style;He.renderedCss=He.renderedStyle;He.removeBypass=He.removeCss=He.removeStyle;He.pstyle=He.parsedStyle;var Vt={};function ao(e){return function(){var t=arguments,n=[];if(t.length===2){var r=t[0],a=t[1];this.on(e.event,r,a)}else if(t.length===1&&Oe(t[0])){var i=t[0];this.on(e.event,i)}else if(t.length===0||t.length===1&&Se(t[0])){for(var o=t.length===1?t[0]:null,u=0;u<this.length;u++){var s=this[u],l=!e.ableField||s._private[e.ableField],c=s._private[e.field]!=e.value;if(e.overrideAble){var d=e.overrideAble(s);if(d!==void 0&&(l=d,!d))return this}l&&(s._private[e.field]=e.value,c&&n.push(s))}var h=this.spawn(n);h.updateStyle(),h.emit(e.event),o&&h.emit(o)}return this}}function Mn(e){Vt[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(n!==void 0)return n}return t._private[e.field]}},Vt[e.on]=ao({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),Vt[e.off]=ao({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}Mn({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Mn({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Mn({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Mn({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Vt.deselect=Vt.unselect;Vt.grabbed=function(){var e=this[0];if(e)return e._private.grabbed};Mn({field:"active",on:"activate",off:"unactivate"});Mn({field:"pannable",on:"panify",off:"unpanify"});Vt.inactive=function(){var e=this[0];if(e)return!e._private.active};var Qe={},io=function(e){return function(t){for(var n=this,r=[],a=0;a<n.length;a++){var i=n[a];if(i.isNode()){for(var o=!1,u=i.connectedEdges(),s=0;s<u.length;s++){var l=u[s],c=l.source(),d=l.target();if(e.noIncomingEdges&&d===i&&c!==i||e.noOutgoingEdges&&c===i&&d!==i){o=!0;break}}o||r.push(i)}}return this.spawn(r,!0).filter(t)}},oo=function(e){return function(t){for(var n=this,r=[],a=0;a<n.length;a++){var i=n[a];if(i.isNode())for(var o=i.connectedEdges(),u=0;u<o.length;u++){var s=o[u],l=s.source(),c=s.target();e.outgoing&&l===i?(r.push(s),r.push(c)):e.incoming&&c===i&&(r.push(s),r.push(l))}}return this.spawn(r,!0).filter(t)}},so=function(e){return function(t){for(var n=this,r=[],a={};;){var i=e.outgoing?n.outgoers():n.incomers();if(i.length===0)break;for(var o=!1,u=0;u<i.length;u++){var s=i[u],l=s.id();a[l]||(a[l]=!0,r.push(s),o=!0)}if(!o)break;n=i}return this.spawn(r,!0).filter(t)}};Qe.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null};ue(Qe,{roots:io({noIncomingEdges:!0}),leaves:io({noOutgoingEdges:!0}),outgoers:ht(oo({outgoing:!0}),"outgoers"),successors:so({outgoing:!0}),incomers:ht(oo({incoming:!0}),"incomers"),predecessors:so({incoming:!0})});ue(Qe,{neighborhood:ht(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var a=n[r],i=a.connectedEdges(),o=0;o<i.length;o++){var u=i[o],s=u.source(),l=u.target(),c=a===s?l:s;c.length>0&&t.push(c[0]),t.push(u[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Qe.neighbourhood=Qe.neighborhood;Qe.closedNeighbourhood=Qe.closedNeighborhood;Qe.openNeighbourhood=Qe.openNeighborhood;ue(Qe,{source:ht(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:ht(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:lo({attr:"source"}),targets:lo({attr:"target"})});function lo(e){return function(t){for(var n=[],r=0;r<this.length;r++){var a=this[r],i=a._private[e.attr];i&&n.push(i)}return this.spawn(n,!0).filter(t)}}ue(Qe,{edgesWith:ht(uo(),"edgesWith"),edgesTo:ht(uo({thisIsSrc:!0}),"edgesTo")});function uo(e){return function(t){var n=[],r=this._private.cy,a=e||{};se(t)&&(t=r.$(t));for(var i=0;i<t.length;i++)for(var o=t[i]._private.edges,u=0;u<o.length;u++){var s=o[u],l=s._private.data,c=this.hasElementWithId(l.source)&&t.hasElementWithId(l.target),d=t.hasElementWithId(l.source)&&this.hasElementWithId(l.target),h=c||d;h&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!c||a.thisIsTgt&&!d)||n.push(s))}return this.spawn(n,!0)}}ue(Qe,{connectedEdges:ht(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var a=n[r];if(a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var u=i[o];t.push(u)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:ht(function(e){for(var t=[],n=this,r=0;r<n.length;r++){var a=n[r];a.isEdge()&&(t.push(a.source()[0]),t.push(a.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:ht(co(),"parallelEdges"),codirectedEdges:ht(co({codirected:!0}),"codirectedEdges")});function co(e){var t={codirected:!1};return e=ue({},t,e),function(n){for(var r=[],a=this.edges(),i=e,o=0;o<a.length;o++)for(var u=a[o],s=u._private,l=s.source,c=l._private.data.id,d=s.data.target,h=l._private.edges,p=0;p<h.length;p++){var f=h[p],v=f._private.data,b=v.target,g=v.source,m=b===d&&g===c,y=c===b&&d===g;(i.codirected&&m||!i.codirected&&(m||y))&&r.push(f)}return this.spawn(r,!0).filter(n)}}ue(Qe,{components:function(e){var t=this,n=t.cy(),r=n.collection(),a=e==null?t.nodes():e.nodes(),i=[];e!=null&&a.empty()&&(a=e.sources());var o=function(s,l){r.merge(s),a.unmerge(s),l.merge(s)};if(a.empty())return t.spawn();var u=function(){var s=n.collection();i.push(s);var l=a[0];o(l,s),t.bfs({directed:!1,roots:l,visit:function(c){return o(c,s)}}),s.forEach(function(c){c.connectedEdges().forEach(function(d){t.has(d)&&s.has(d.source())&&s.has(d.target())&&s.merge(d)})})};do u();while(a.length>0);return i},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Qe.componentsOf=Qe.components;var We=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){ze("A collection must have a reference to the core");return}var a=new wt,i=!1;if(!t)t=[];else if(t.length>0&&Ee(t[0])&&!lr(t[0])){i=!0;for(var o=[],u=new Tn,s=0,l=t.length;s<l;s++){var c=t[s];c.data==null&&(c.data={});var d=c.data;if(d.id==null)d.id=ts();else if(e.hasElementWithId(d.id)||u.has(d.id))continue;var h=new Jr(e,c,!1);o.push(h),u.add(d.id)}t=o}this.length=0;for(var p=0,f=t.length;p<f;p++){var v=t[p][0];if(v!=null){var b=v._private.data.id;(!n||!a.has(b))&&(n&&a.set(b,{index:this.length,ele:v}),this[this.length]=v,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(g){this.lazyMap=g},rebuildMap:function(){for(var g=this.lazyMap=new wt,m=this.eles,y=0;y<m.length;y++){var w=m[y];g.set(w.id(),{index:y,ele:w})}}},n&&(this._private.map=a),i&&!r&&this.restore()},Ne=Jr.prototype=We.prototype=Object.create(Array.prototype);Ne.instanceString=function(){return"collection"};Ne.spawn=function(e,t){return new We(this.cy(),e,t)};Ne.spawnSelf=function(){return this.spawn(this)};Ne.cy=function(){return this._private.cy};Ne.renderer=function(){return this._private.cy.renderer()};Ne.element=function(){return this[0]};Ne.collection=function(){return Xo(this)?this:new We(this._private.cy,[this])};Ne.unique=function(){return new We(this._private.cy,this,!0)};Ne.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)};Ne.getElementById=function(e){e=""+e;var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new We(t)};Ne.$id=Ne.getElementById;Ne.poolIndex=function(){var e=this._private.cy,t=e._private.elements,n=this[0]._private.data.id;return t._private.map.get(n).index};Ne.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index};Ne.indexOfId=function(e){return e=""+e,this._private.map.get(e).index};Ne.json=function(e){var t=this.element(),n=this.cy();if(t==null&&e)return this;if(t!=null){var r=t._private;if(Ee(e)){if(n.startBatch(),e.data){t.data(e.data);var a=r.data;if(t.isEdge()){var i=!1,o={},u=e.data.source,s=e.data.target;u!=null&&u!=a.source&&(o.source=""+u,i=!0),s!=null&&s!=a.target&&(o.target=""+s,i=!0),i&&(t=t.move(o))}else{var l="parent"in e.data,c=e.data.parent;l&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var d=function(f,v,b){var g=e[f];g!=null&&g!==r[f]&&(g?t[v]():t[b]())};return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),e.classes!=null&&t.classes(e.classes),n.endBatch(),this}else if(e===void 0){var h={data:xt(r.data),position:xt(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};h.classes="";var p=0;return r.classes.forEach(function(f){return h.classes+=p++===0?f:" "+f}),h}}};Ne.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t],r=n.json();e.push(r)}return e};Ne.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n],a=r.json(),i=new Jr(e,a,!1);t.push(i)}return new We(e,t)};Ne.copy=Ne.clone;Ne.restore=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=n.cy(),a=r._private,i=[],o=[],u,s=0,l=n.length;s<l;s++){var c=n[s];t&&!c.removed()||(c.isNode()?i.push(c):o.push(c))}u=i.concat(o);var d,h=function(){u.splice(d,1),d--};for(d=0;d<u.length;d++){var p=u[d],f=p._private,v=f.data;if(p.clearTraversalCache(),!(!t&&!f.removed)){if(v.id===void 0)v.id=ts();else if(J(v.id))v.id=""+v.id;else if(Ft(v.id)||!se(v.id)){ze("Can not create element with invalid string ID `"+v.id+"`"),h();continue}else if(r.hasElementWithId(v.id)){ze("Can not create second element with ID `"+v.id+"`"),h();continue}}var b=v.id;if(p.isNode()){var g=f.position;g.x==null&&(g.x=0),g.y==null&&(g.y=0)}if(p.isEdge()){for(var m=p,y=["source","target"],w=y.length,_=!1,k=0;k<w;k++){var x=y[k],C=v[x];J(C)&&(C=v[x]=""+v[x]),C==null||C===""?(ze("Can not create edge `"+b+"` with unspecified "+x),_=!0):r.hasElementWithId(C)||(ze("Can not create edge `"+b+"` with nonexistant "+x+" `"+C+"`"),_=!0)}if(_){h();continue}var D=r.getElementById(v.source),P=r.getElementById(v.target);D.same(P)?D._private.edges.push(m):(D._private.edges.push(m),P._private.edges.push(m)),m._private.source=D,m._private.target=P}f.map=new wt,f.map.set(b,{ele:p,index:0}),f.removed=!1,t&&r.addToPool(p)}for(var M=0;M<i.length;M++){var T=i[M],B=T._private.data;J(B.parent)&&(B.parent=""+B.parent);var S=B.parent,A=S!=null;if(A||T._private.parent){var N=T._private.parent?r.collection().merge(T._private.parent):r.getElementById(S);if(N.empty())B.parent=void 0;else if(N[0].removed())_e("Node added with missing parent, reference to parent removed"),B.parent=void 0,T._private.parent=null;else{for(var O=!1,I=N;!I.empty();){if(T.same(I)){O=!0,B.parent=void 0;break}I=I.parent()}O||(N[0]._private.children.push(T),T._private.parent=N[0],a.hasCompoundNodes=!0)}}}if(u.length>0){for(var z=u.length===n.length?n:new We(r,u),Y=0;Y<z.length;Y++){var V=z[Y];V.isNode()||(V.parallelEdges().clearTraversalCache(),V.source().clearTraversalCache(),V.target().clearTraversalCache())}var H;a.hasCompoundNodes?H=r.collection().merge(z).merge(z.connectedNodes()).merge(z.parent()):H=z,H.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?z.emitAndNotify("add"):t&&z.emit("add")}return n};Ne.removed=function(){var e=this[0];return e&&e._private.removed};Ne.inside=function(){var e=this[0];return e&&!e._private.removed};Ne.remove=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=[],a={},i=n._private.cy;function o(S){for(var A=S._private.edges,N=0;N<A.length;N++)s(A[N])}function u(S){for(var A=S._private.children,N=0;N<A.length;N++)s(A[N])}function s(S){var A=a[S.id()];t&&S.removed()||A||(a[S.id()]=!0,S.isNode()?(r.push(S),o(S),u(S)):r.unshift(S))}for(var l=0,c=n.length;l<c;l++){var d=n[l];s(d)}function h(S,A){var N=S._private.edges;jt(N,A),S.clearTraversalCache()}function p(S){S.clearTraversalCache()}var f=[];f.ids={};function v(S,A){A=A[0],S=S[0];var N=S._private.children,O=S.id();jt(N,A),A._private.parent=null,f.ids[O]||(f.ids[O]=!0,f.push(S))}n.dirtyCompoundBoundsCache(),t&&i.removeFromPool(r);for(var b=0;b<r.length;b++){var g=r[b];if(g.isEdge()){var m=g.source()[0],y=g.target()[0];h(m,g),h(y,g);for(var w=g.parallelEdges(),_=0;_<w.length;_++){var k=w[_];p(k),k.isBundledBezier()&&k.dirtyBoundingBoxCache()}}else{var x=g.parent();x.length!==0&&v(x,g)}t&&(g._private.removed=!0)}var C=i._private.elements;i._private.hasCompoundNodes=!1;for(var D=0;D<C.length;D++){var P=C[D];if(P.isParent()){i._private.hasCompoundNodes=!0;break}}var M=new We(this.cy(),r);M.size()>0&&(e?M.emitAndNotify("remove"):t&&M.emit("remove"));for(var T=0;T<f.length;T++){var B=f[T];(!t||!B.removed())&&B.updateStyle()}return M};Ne.move=function(e){var t=this._private.cy,n=this,r=!1,a=!1,i=function(p){return p==null?p:""+p};if(e.source!==void 0||e.target!==void 0){var o=i(e.source),u=i(e.target),s=o!=null&&t.hasElementWithId(o),l=u!=null&&t.hasElementWithId(u);(s||l)&&(t.batch(function(){n.remove(r,a),n.emitAndNotify("moveout");for(var p=0;p<n.length;p++){var f=n[p],v=f._private.data;f.isEdge()&&(s&&(v.source=o),l&&(v.target=u))}n.restore(r,a)}),n.emitAndNotify("move"))}else if(e.parent!==void 0){var c=i(e.parent),d=c===null||t.hasElementWithId(c);if(d){var h=c===null?void 0:c;t.batch(function(){var p=n.remove(r,a);p.emitAndNotify("moveout");for(var f=0;f<n.length;f++){var v=n[f],b=v._private.data;v.isNode()&&(b.parent=h)}p.restore(r,a)}),n.emitAndNotify("move")}}return this};[gs,kg,Br,Rt,En,Vg,na,ev,As,Is,iv,jr,Nr,He,Vt,Qe].forEach(function(e){ue(Ne,e)});var hv={add:function(e){var t,n=this;if(lt(e)){var r=e;if(r._private.cy===n)t=r.restore();else{for(var a=[],i=0;i<r.length;i++){var o=r[i];a.push(o.json())}t=new We(n,a)}}else if(Se(e)){var u=e;t=new We(n,u)}else if(Ee(e)&&(Se(e.nodes)||Se(e.edges))){for(var s=e,l=[],c=["nodes","edges"],d=0,h=c.length;d<h;d++){var p=c[d],f=s[p];if(Se(f))for(var v=0,b=f.length;v<b;v++){var g=ue({group:p},f[v]);l.push(g)}}t=new We(n,l)}else{var m=e;t=new Jr(n,m).collection()}return t},remove:function(e){if(!lt(e)&&se(e)){var t=e;e=this.$(t)}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function pv(e,t,n,r){var a=4,i=.001,o=1e-7,u=10,s=11,l=1/(s-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var d=0;d<4;++d)if(typeof arguments[d]!="number"||isNaN(arguments[d])||!isFinite(arguments[d]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var h=c?new Float32Array(s):new Array(s);function p(P,M){return 1-3*M+3*P}function f(P,M){return 3*M-6*P}function v(P){return 3*P}function b(P,M,T){return((p(M,T)*P+f(M,T))*P+v(M))*P}function g(P,M,T){return 3*p(M,T)*P*P+2*f(M,T)*P+v(M)}function m(P,M){for(var T=0;T<a;++T){var B=g(M,e,n);if(B===0)return M;var S=b(M,e,n)-P;M-=S/B}return M}function y(){for(var P=0;P<s;++P)h[P]=b(P*l,e,n)}function w(P,M,T){var B,S,A=0;do S=M+(T-M)/2,B=b(S,e,n)-P,B>0?T=S:M=S;while(Math.abs(B)>o&&++A<u);return S}function _(P){for(var M=0,T=1,B=s-1;T!==B&&h[T]<=P;++T)M+=l;--T;var S=(P-h[T])/(h[T+1]-h[T]),A=M+S*l,N=g(A,e,n);return N>=i?m(P,A):N===0?A:w(P,M,M+l)}var k=!1;function x(){k=!0,(e!==t||n!==r)&&y()}var C=function(P){return k||x(),e===t&&n===r?P:P===0?0:P===1?1:b(_(P),t,r)};C.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var D="generateBezier("+[e,t,n,r]+")";return C.toString=function(){return D},C}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var fv=function(){function e(r){return-r.tension*r.x-r.friction*r.v}function t(r,a,i){var o={x:r.x+i.dx*a,v:r.v+i.dv*a,tension:r.tension,friction:r.friction};return{dx:o.v,dv:e(o)}}function n(r,a){var i={dx:r.v,dv:e(r)},o=t(r,a*.5,i),u=t(r,a*.5,o),s=t(r,a,u),l=1/6*(i.dx+2*(o.dx+u.dx)+s.dx),c=1/6*(i.dv+2*(o.dv+u.dv)+s.dv);return r.x=r.x+l*a,r.v=r.v+c*a,r}return function r(a,i,o){var u={x:-1,v:0,tension:null,friction:null},s=[0],l=0,c=1/1e4,d=16/1e3,h,p,f;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,u.tension=a,u.friction=i,h=o!==null,h?(l=r(a,i),p=l/o*d):p=d;f=n(f||u,p),s.push(1+f.x),l+=16,Math.abs(f.x)>c&&Math.abs(f.v)>c;);return h?function(v){return s[v*(s.length-1)|0]}:l}}(),Be=function(e,t,n,r){var a=pv(e,t,n,r);return function(i,o,u){return i+(o-i)*a(u)}},Ar={linear:function(e,t,n){return e+(t-e)*n},ease:Be(.25,.1,.25,1),"ease-in":Be(.42,0,1,1),"ease-out":Be(0,0,.58,1),"ease-in-out":Be(.42,0,.58,1),"ease-in-sine":Be(.47,0,.745,.715),"ease-out-sine":Be(.39,.575,.565,1),"ease-in-out-sine":Be(.445,.05,.55,.95),"ease-in-quad":Be(.55,.085,.68,.53),"ease-out-quad":Be(.25,.46,.45,.94),"ease-in-out-quad":Be(.455,.03,.515,.955),"ease-in-cubic":Be(.55,.055,.675,.19),"ease-out-cubic":Be(.215,.61,.355,1),"ease-in-out-cubic":Be(.645,.045,.355,1),"ease-in-quart":Be(.895,.03,.685,.22),"ease-out-quart":Be(.165,.84,.44,1),"ease-in-out-quart":Be(.77,0,.175,1),"ease-in-quint":Be(.755,.05,.855,.06),"ease-out-quint":Be(.23,1,.32,1),"ease-in-out-quint":Be(.86,0,.07,1),"ease-in-expo":Be(.95,.05,.795,.035),"ease-out-expo":Be(.19,1,.22,1),"ease-in-out-expo":Be(1,0,0,1),"ease-in-circ":Be(.6,.04,.98,.335),"ease-out-circ":Be(.075,.82,.165,1),"ease-in-out-circ":Be(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return Ar.linear;var r=fv(e,t,n);return function(a,i,o){return a+(i-a)*r(o)}},"cubic-bezier":Be};function ho(e,t,n,r,a){if(r===1||t===n)return n;var i=a(t,n,r);return e==null||((e.roundValue||e.color)&&(i=Math.round(i)),e.min!==void 0&&(i=Math.max(i,e.min)),e.max!==void 0&&(i=Math.min(i,e.max))),i}function po(e,t){return e.pfValue!=null||e.value!=null?e.pfValue!=null&&(t==null||t.type.units!=="%")?e.pfValue:e.value:e}function cn(e,t,n,r,a){var i=a!=null?a.type:null;n<0?n=0:n>1&&(n=1);var o=po(e,a),u=po(t,a);if(J(o)&&J(u))return ho(i,o,u,n,r);if(Se(o)&&Se(u)){for(var s=[],l=0;l<u.length;l++){var c=o[l],d=u[l];if(c!=null&&d!=null){var h=ho(i,c,d,n,r);s.push(h)}else s.push(d)}return s}}function gv(e,t,n,r){var a=!r,i=e._private,o=t._private,u=o.easing,s=o.startTime,l=r?e:e.cy(),c=l.style();if(!o.easingImpl)if(u==null)o.easingImpl=Ar.linear;else{var d;if(se(u)){var h=c.parse("transition-timing-function",u);d=h.value}else d=u;var p,f;se(d)?(p=d,f=[]):(p=d[1],f=d.slice(2).map(function(z){return+z})),f.length>0?(p==="spring"&&f.push(o.duration),o.easingImpl=Ar[p].apply(null,f)):o.easingImpl=Ar[p]}var v=o.easingImpl,b;if(o.duration===0?b=1:b=(n-s)/o.duration,o.applying&&(b=o.progress),b<0?b=0:b>1&&(b=1),o.delay==null){var g=o.startPosition,m=o.position;if(m&&a&&!e.locked()){var y={};Vn(g.x,m.x)&&(y.x=cn(g.x,m.x,b,v)),Vn(g.y,m.y)&&(y.y=cn(g.y,m.y,b,v)),e.position(y)}var w=o.startPan,_=o.pan,k=i.pan,x=_!=null&&r;x&&(Vn(w.x,_.x)&&(k.x=cn(w.x,_.x,b,v)),Vn(w.y,_.y)&&(k.y=cn(w.y,_.y,b,v)),e.emit("pan"));var C=o.startZoom,D=o.zoom,P=D!=null&&r;P&&(Vn(C,D)&&(i.zoom=$n(i.minZoom,cn(C,D,b,v),i.maxZoom)),e.emit("zoom")),(x||P)&&e.emit("viewport");var M=o.style;if(M&&M.length>0&&a){for(var T=0;T<M.length;T++){var B=M[T],S=B.name,A=B,N=o.startStyle[S],O=c.properties[N.name],I=cn(N,A,b,v,O);c.overrideBypass(e,S,I)}e.emit("style")}}return o.progress=b,b}function Vn(e,t){return e==null||t==null?!1:J(e)&&J(t)?!0:!!(e&&t)}function vv(e,t,n,r){var a=t._private;a.started=!0,a.startTime=n-a.progress*a.duration}function fo(e,t){var n=t._private.aniEles,r=[];function a(c,d){var h=c._private,p=h.animation.current,f=h.animation.queue,v=!1;if(p.length===0){var b=f.shift();b&&p.push(b)}for(var g=function(_){for(var k=_.length-1;k>=0;k--){var x=_[k];x()}_.splice(0,_.length)},m=p.length-1;m>=0;m--){var y=p[m],w=y._private;if(w.stopped){p.splice(m,1),w.hooked=!1,w.playing=!1,w.started=!1,g(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||vv(c,y,e),gv(c,y,e,d),w.applying&&(w.applying=!1),g(w.frames),w.step!=null&&w.step(e),y.completed()&&(p.splice(m,1),w.hooked=!1,w.playing=!1,w.started=!1,g(w.completes)),v=!0)}return!d&&p.length===0&&f.length===0&&r.push(c),v}for(var i=!1,o=0;o<n.length;o++){var u=n[o],s=a(u);i=i||s}var l=a(t,!0);(i||l)&&(n.length>0?t.notify("draw",n):t.notify("draw")),n.unmerge(r),t.emit("step")}var mv={animate:Te.animate(),animation:Te.animation(),animated:Te.animated(),clearQueue:Te.clearQueue(),delay:Te.delay(),delayAnimation:Te.delayAnimation(),stop:Te.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&Rr(function(r){fo(r,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(r,a){fo(a,e)},n.beforeRenderPriorities.animations):t()}},yv={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return r!=null?e!==n.target&&lr(n.target)&&r.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},Pr=function(e){return se(e)?new qt(e):e},Ls={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new ra(yv,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,Pr(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,Pr(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,Pr(t),n),this},once:function(e,t,n){return this.emitter().one(e,Pr(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Te.eventAliasesOn(Ls);var Ia={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};Ia.jpeg=Ia.jpg;var Ir={layout:function(e){var t=this;if(e==null){ze("Layout options must be specified to make a layout");return}if(e.name==null){ze("A `name` must be specified to make a layout");return}var n=e.name,r=t.extension("layout",n);if(r==null){ze("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;se(e.eles)?a=t.$(e.eles):a=e.eles!=null?e.eles:t.$();var i=new r(ue({},e,{cy:t,eles:a}));return i}};Ir.createLayout=Ir.makeLayout=Ir.layout;var bv={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&r.merge(t);return}if(n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var r=e.batchNotifications[n];r.empty()?t.notify(n):t.notify(n,r)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var a=n[r],i=e[a],o=t.getElementById(a);o.data(i)}})}},xv=Ue({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Oa={renderTo:function(e,t,n,r){var a=this._private.renderer;return a.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){ze("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&_e("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var r=xv(e);r.cy=t,t._private.renderer=new n(r),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var r=n._private;r.rscratch={},r.rstyle={},r.animation.current=[],r.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Oa.invalidateDimensions=Oa.resize;var Or={collection:function(e,t){return se(e)?this.$(e):lt(e)?e.collection():Se(e)?(t||(t={}),new We(this,e,t.unique,t.removed)):new We(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Or.elements=Or.filter=Or.$;var et={},Hn="t",wv="f";et.apply=function(e){for(var t=this,n=t._private,r=n.cy,a=r.collection(),i=0;i<e.length;i++){var o=e[i],u=t.getContextMeta(o);if(!u.empty){var s=t.getContextStyle(u),l=t.applyContextStyle(u,s,o);o._private.appliedInitStyle?t.updateTransitions(o,l.diffProps):o._private.appliedInitStyle=!0;var c=t.updateStyleHints(o);c&&a.push(o)}}return a};et.getPropertiesDiff=function(e,t){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},a=e+"-"+t,i=r[a];if(i)return i;for(var o=[],u={},s=0;s<n.length;s++){var l=n[s],c=e[s]===Hn,d=t[s]===Hn,h=c!==d,p=l.mappedProperties.length>0;if(h||d&&p){var f=void 0;h&&p||h?f=l.properties:p&&(f=l.mappedProperties);for(var v=0;v<f.length;v++){for(var b=f[v],g=b.name,m=!1,y=s+1;y<n.length;y++){var w=n[y],_=t[y]===Hn;if(_&&(m=w.properties[b.name]!=null,m))break}!u[g]&&!m&&(u[g]=!0,o.push(g))}}}return r[a]=o,o};et.getContextMeta=function(e){for(var t=this,n="",r,a=e._private.styleCxtKey||"",i=0;i<t.length;i++){var o=t[i],u=o.selector&&o.selector.matches(e);u?n+=Hn:n+=wv}return r=t.getPropertiesDiff(a,n),e._private.styleCxtKey=n,{key:n,diffPropNames:r,empty:r.length===0}};et.getContextStyle=function(e){var t=e.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var a={_private:{key:t}},i=0;i<n.length;i++){var o=n[i],u=t[i]===Hn;if(u)for(var s=0;s<o.properties.length;s++){var l=o.properties[s];a[l.name]=l}}return r[t]=a,a};et.applyContextStyle=function(e,t,n){for(var r=this,a=e.diffPropNames,i={},o=r.types,u=0;u<a.length;u++){var s=a[u],l=t[s],c=n.pstyle(s);if(!l)if(c)c.bypass?l={name:s,deleteBypassed:!0}:l={name:s,delete:!0};else continue;if(c!==l){if(l.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var d=c.mapping,h=d.fnValue=l.value(n);if(h===d.prevFnValue)continue}var p=i[s]={prev:c};r.applyParsedProperty(n,l),p.next=n.pstyle(s),p.next&&p.next.bypass&&(p.next=p.next.bypassed)}}return{diffProps:i}};et.updateStyleHints=function(e){var t=e._private,n=this,r=n.propertyGroupNames,a=n.propertyGroupKeys,i=function(Q,$,le){return n.getPropertiesHash(Q,$,le)},o=t.styleKey;if(e.removed())return!1;var u=t.group==="nodes",s=e._private.style;r=Object.keys(s);for(var l=0;l<a.length;l++){var c=a[l];t.styleKeys[c]=[pn,jn]}for(var d=function(Q,$){return t.styleKeys[$][0]=Zn(Q,t.styleKeys[$][0])},h=function(Q,$){return t.styleKeys[$][1]=Gn(Q,t.styleKeys[$][1])},p=function(Q,$){d(Q,$),h(Q,$)},f=function(Q,$){for(var le=0;le<Q.length;le++){var ve=Q.charCodeAt(le);d(ve,$),h(ve,$)}},v=2e9,b=function(Q){return-128<Q&&Q<128&&Math.floor(Q)!==Q?v-(Q*1024|0):Q},g=0;g<r.length;g++){var m=r[g],y=s[m];if(y!=null){var w=this.properties[m],_=w.type,k=w.groupKey,x=void 0;w.hashOverride!=null?x=w.hashOverride(e,y):y.pfValue!=null&&(x=y.pfValue);var C=w.enums==null?y.value:null,D=x!=null,P=C!=null,M=D||P,T=y.units;if(_.number&&M&&!_.multiple){var B=D?x:C;p(b(B),k),!D&&T!=null&&f(T,k)}else f(y.strValue,k)}}for(var S=[pn,jn],A=0;A<a.length;A++){var N=a[A],O=t.styleKeys[N];S[0]=Zn(O[0],S[0]),S[1]=Gn(O[1],S[1])}t.styleKey=Ip(S[0],S[1]);var I=t.styleKeys;t.labelDimsKey=It(I.labelDimensions);var z=i(e,["label"],I.labelDimensions);if(t.labelKey=It(z),t.labelStyleKey=It(br(I.commonLabel,z)),!u){var Y=i(e,["source-label"],I.labelDimensions);t.sourceLabelKey=It(Y),t.sourceLabelStyleKey=It(br(I.commonLabel,Y));var V=i(e,["target-label"],I.labelDimensions);t.targetLabelKey=It(V),t.targetLabelStyleKey=It(br(I.commonLabel,V))}if(u){var H=t.styleKeys,j=H.nodeBody,W=H.nodeBorder,ee=H.backgroundImage,L=H.compound,F=H.pie,U=[j,W,ee,L,F].filter(function(Q){return Q!=null}).reduce(br,[pn,jn]);t.nodeKey=It(U),t.hasPie=F!=null&&F[0]!==pn&&F[1]!==jn}return o!==t.styleKey};et.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null};et.applyParsedProperty=function(e,t){var n=this,r=t,a=e._private.style,i,o=n.types,u=n.properties[r.name].type,s=r.bypass,l=a[r.name],c=l&&l.bypass,d=e._private,h="mapping",p=function(H){return H==null?null:H.pfValue!=null?H.pfValue:H.value},f=function(){var H=p(l),j=p(r);n.checkTriggers(e,r.name,H,j)};if(r&&r.name.substr(0,3)==="pie"&&_e("The pie style properties are deprecated.  Create charts using background images instead."),t.name==="curve-style"&&e.isEdge()&&(t.value!=="bezier"&&e.isLoop()||t.value==="haystack"&&(e.source().isParent()||e.target().isParent()))&&(r=t=this.parse(t.name,"bezier",s)),r.delete)return a[r.name]=void 0,f(),!0;if(r.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,f(),!0):!1:(f(),!0);if(r.deleteBypass)return l?l.bypass?(a[r.name]=l.bypassed,f(),!0):!1:(f(),!0);var v=function(){_e("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+r.name+"` with data field `"+r.field+"`); try a `["+r.field+"]` selector to limit scope to elements with `"+r.field+"` defined")};switch(r.mapped){case o.mapData:{for(var b=r.field.split("."),g=d.data,m=0;m<b.length&&g;m++){var y=b[m];g=g[y]}if(g==null)return v(),!1;var w;if(J(g)){var _=r.fieldMax-r.fieldMin;_===0?w=0:w=(g-r.fieldMin)/_}else return _e("Do not use continuous mappers without specifying numeric data (i.e. `"+r.field+": "+g+"` for `"+e.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),u.color){var k=r.valueMin[0],x=r.valueMax[0],C=r.valueMin[1],D=r.valueMax[1],P=r.valueMin[2],M=r.valueMax[2],T=r.valueMin[3]==null?1:r.valueMin[3],B=r.valueMax[3]==null?1:r.valueMax[3],S=[Math.round(k+(x-k)*w),Math.round(C+(D-C)*w),Math.round(P+(M-P)*w),Math.round(T+(B-T)*w)];i={bypass:r.bypass,name:r.name,value:S,strValue:"rgb("+S[0]+", "+S[1]+", "+S[2]+")"}}else if(u.number){var A=r.valueMin+(r.valueMax-r.valueMin)*w;i=this.parse(r.name,A,r.bypass,h)}else return!1;if(!i)return v(),!1;i.mapping=r,r=i;break}case o.data:{for(var N=r.field.split("."),O=d.data,I=0;I<N.length&&O;I++){var z=N[I];O=O[z]}if(O!=null&&(i=this.parse(r.name,O,r.bypass,h)),!i)return v(),!1;i.mapping=r,r=i;break}case o.fn:{var Y=r.value,V=r.fnValue!=null?r.fnValue:Y(e);if(r.prevFnValue=V,V==null)return _e("Custom function mappers may not return null (i.e. `"+r.name+"` for ele `"+e.id()+"` is null)"),!1;if(i=this.parse(r.name,V,r.bypass,h),!i)return _e("Custom function mappers may not return invalid values for the property type (i.e. `"+r.name+"` for ele `"+e.id()+"` is invalid)"),!1;i.mapping=xt(r),r=i;break}case void 0:break;default:return!1}return s?(c?r.bypassed=l.bypassed:r.bypassed=l,a[r.name]=r):c?l.bypassed=r:a[r.name]=r,f(),!0};et.cleanElements=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),!t)r._private.style={};else for(var a=r._private.style,i=Object.keys(a),o=0;o<i.length;o++){var u=i[o],s=a[u];s!=null&&(s.bypass?s.bypassed=null:a[u]=null)}}};et.update=function(){var e=this._private.cy,t=e.mutableElements();t.updateStyle()};et.updateTransitions=function(e,t){var n=this,r=e._private,a=e.pstyle("transition-property").value,i=e.pstyle("transition-duration").pfValue,o=e.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var u={},s=!1,l=0;l<a.length;l++){var c=a[l],d=e.pstyle(c),h=t[c];if(h){var p=h.prev,f=p,v=h.next!=null?h.next:d,b=!1,g=void 0,m=1e-6;f&&(J(f.pfValue)&&J(v.pfValue)?(b=v.pfValue-f.pfValue,g=f.pfValue+m*b):J(f.value)&&J(v.value)?(b=v.value-f.value,g=f.value+m*b):Se(f.value)&&Se(v.value)&&(b=f.value[0]!==v.value[0]||f.value[1]!==v.value[1]||f.value[2]!==v.value[2],g=f.strValue),b&&(u[c]=v.strValue,this.applyBypass(e,c,g),s=!0))}}if(!s)return;r.transitioning=!0,new _n(function(y){o>0?e.delayAnimation(o).play().promise().then(y):y()}).then(function(){return e.animation({style:u,duration:i,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(e,a),e.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(e,a),e.emitAndNotify("style"),r.transitioning=!1)};et.checkTrigger=function(e,t,n,r,a,i){var o=this.properties[t],u=a(o);u!=null&&u(n,r)&&i(o)};et.checkZOrderTrigger=function(e,t,n,r){var a=this;this.checkTrigger(e,t,n,r,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",e)})};et.checkBoundsTrigger=function(e,t,n,r){this.checkTrigger(e,t,n,r,function(a){return a.triggersBounds},function(a){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&(t==="curve-style"&&(n==="bezier"||r==="bezier")||t==="display"&&(n==="none"||r==="none"))&&e.parallelEdges().forEach(function(i){i.isBundledBezier()&&i.dirtyBoundingBoxCache()})})};et.checkTriggers=function(e,t,n,r){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,r),this.checkBoundsTrigger(e,t,n,r)};var dr={};dr.applyBypass=function(e,t,n,r){var a=this,i=[],o=!0;if(t==="*"||t==="**"){if(n!==void 0)for(var u=0;u<a.properties.length;u++){var s=a.properties[u],l=s.name,c=this.parse(l,n,!0);c&&i.push(c)}}else if(se(t)){var d=this.parse(t,n,!0);d&&i.push(d)}else if(Ee(t)){var h=t;r=n;for(var p=Object.keys(h),f=0;f<p.length;f++){var v=p[f],b=h[v];if(b===void 0&&(b=h[Qr(v)]),b!==void 0){var g=this.parse(v,b,!0);g&&i.push(g)}}}else return!1;if(i.length===0)return!1;for(var m=!1,y=0;y<e.length;y++){for(var w=e[y],_={},k=void 0,x=0;x<i.length;x++){var C=i[x];if(r){var D=w.pstyle(C.name);k=_[C.name]={prev:D}}m=this.applyParsedProperty(w,xt(C))||m,r&&(k.next=w.pstyle(C.name))}m&&this.updateStyleHints(w),r&&this.updateTransitions(w,_,o)}return m};dr.overrideBypass=function(e,t,n){t=Ua(t);for(var r=0;r<e.length;r++){var a=e[r],i=a._private.style[t],o=this.properties[t].type,u=o.color,s=o.mutiple,l=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,t,n):(i.value=n,i.pfValue!=null&&(i.pfValue=n),u?i.strValue="rgb("+n.join(",")+")":s?i.strValue=n.join(" "):i.strValue=""+n,this.updateStyleHints(a)),this.checkTriggers(a,t,l,n)}};dr.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)};dr.removeBypasses=function(e,t,n){for(var r=!0,a=0;a<e.length;a++){for(var i=e[a],o={},u=0;u<t.length;u++){var s=t[u],l=this.properties[s],c=i.pstyle(l.name);if(!(!c||!c.bypass)){var d="",h=this.parse(s,d,!0),p=o[l.name]={prev:c};this.applyParsedProperty(i,h),p.next=i.pstyle(l.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,r)}};var ai={};ai.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return e!=null?parseFloat(e):1};ai.containerCss=function(e){var t=this._private.cy,n=t.container();if(Ie&&n&&Ie.getComputedStyle)return Ie.getComputedStyle(n).getPropertyValue(e)};var Et={};Et.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)};Et.getRawStyle=function(e,t){var n=this;if(e=e[0],e){for(var r={},a=0;a<n.properties.length;a++){var i=n.properties[a],o=n.getStylePropertyValue(e,i.name,t);o!=null&&(r[i.name]=o,r[Qr(i.name)]=o)}return r}};Et.getIndexedStyle=function(e,t,n,r){var a=e.pstyle(t)[n][r];return a??e.cy().style().getDefaultProperty(t)[n][0]};Et.getStylePropertyValue=function(e,t,n){var r=this;if(e=e[0],e){var a=r.properties[t];a.alias&&(a=a.pointsTo);var i=a.type,o=e.pstyle(a.name);if(o){var u=o.value,s=o.units,l=o.strValue;if(n&&i.number&&u!=null&&J(u)){var c=e.cy().zoom(),d=function(v){return v*c},h=function(v,b){return d(v)+b},p=Se(u),f=p?s.every(function(v){return v!=null}):s!=null;return f?p?u.map(function(v,b){return h(v,s[b])}).join(" "):h(u,s):p?u.map(function(v){return se(v)?v:""+d(v)}).join(" "):""+d(u)}else if(l!=null)return l}return null}};Et.getAnimationStartStyle=function(e,t){for(var n={},r=0;r<t.length;r++){var a=t[r],i=a.name,o=e.pstyle(i);o!==void 0&&(Ee(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(n[i]=o)}return n};Et.getPropsList=function(e){var t=this,n=[],r=e,a=t.properties;if(r)for(var i=Object.keys(r),o=0;o<i.length;o++){var u=i[o],s=r[u],l=a[u]||a[Ua(u)],c=this.parse(l.name,s);c&&n.push(c)}return n};Et.getNonDefaultPropertiesHash=function(e,t,n){var r=n.slice(),a,i,o,u,s,l;for(s=0;s<t.length;s++)if(a=t[s],i=e.pstyle(a,!1),i!=null)if(i.pfValue!=null)r[0]=Zn(u,r[0]),r[1]=Gn(u,r[1]);else for(o=i.strValue,l=0;l<o.length;l++)u=o.charCodeAt(l),r[0]=Zn(u,r[0]),r[1]=Gn(u,r[1]);return r};Et.getPropertiesHash=Et.getNonDefaultPropertiesHash;var oa={};oa.appendFromJson=function(e){for(var t=this,n=0;n<e.length;n++){var r=e[n],a=r.selector,i=r.style||r.css,o=Object.keys(i);t.selector(a);for(var u=0;u<o.length;u++){var s=o[u],l=i[s];t.css(s,l)}}return t};oa.fromJson=function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t};oa.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,a=n.properties,i={},o=0;o<a.length;o++){var u=a[o];i[u.name]=u.strValue}e.push({selector:r?r.toString():"core",style:i})}return e};var ii={};ii.appendFromString=function(e){var t=this,n=this,r=""+e,a,i,o;r=r.replace(/[/][*](\s|.)+?[*][/]/g,"");function u(){r.length>a.length?r=r.substr(a.length):r=""}function s(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var l=r.match(/^\s*$/);if(l)break;var c=r.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){_e("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+r);break}a=c[0];var d=c[1];if(d!=="core"){var h=new qt(d);if(h.invalid){_e("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),u();continue}}var p=c[2],f=!1;i=p;for(var v=[];;){var b=i.match(/^\s*$/);if(b)break;var g=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!g){_e("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),f=!0;break}o=g[0];var m=g[1],y=g[2],w=t.properties[m];if(!w){_e("Skipping property: Invalid property name in: "+o),s();continue}var _=n.parse(m,y);if(!_){_e("Skipping property: Invalid property definition in: "+o),s();continue}v.push({name:m,val:y}),s()}if(f){u();break}n.selector(d);for(var k=0;k<v.length;k++){var x=v[k];n.css(x.name,x.val)}u()}return n};ii.fromString=function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t};var Ye={};(function(){var e=Re,t=wp,n=kp,r=Cp,a=Dp,i=function(F){return"^"+F+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(F){var U=e+"|\\w+|"+t+"|"+n+"|"+r+"|"+a;return"^"+F+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+U+")\\s*\\,\\s*("+U+")\\)$"},u=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Ye.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:u,singleRegexMatchValue:!0},urls:{regexes:u,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(F,U){switch(F.length){case 2:return U[0]!=="deg"&&U[0]!=="rad"&&U[1]!=="deg"&&U[1]!=="rad";case 1:return se(F[0])||U[0]==="deg"||U[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(F){var U=F.length;return U===1||U===2||U===4}}};var s={zeroNonZero:function(F,U){return(F==null||U==null)&&F!==U||F==0&&U!=0?!0:F!=0&&U==0},any:function(F,U){return F!=U},emptyNonEmpty:function(F,U){var Q=Ft(F),$=Ft(U);return Q&&!$||!Q&&$}},l=Ye.types,c=[{name:"label",type:l.text,triggersBounds:s.any,triggersZOrder:s.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:s.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:s.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:s.any}],d=[{name:"source-label",type:l.text,triggersBounds:s.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:s.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:s.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:s.any},{name:"source-text-offset",type:l.size,triggersBounds:s.any}],h=[{name:"target-label",type:l.text,triggersBounds:s.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:s.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:s.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:s.any},{name:"target-text-offset",type:l.size,triggersBounds:s.any}],p=[{name:"font-family",type:l.fontFamily,triggersBounds:s.any},{name:"font-style",type:l.fontStyle,triggersBounds:s.any},{name:"font-weight",type:l.fontWeight,triggersBounds:s.any},{name:"font-size",type:l.size,triggersBounds:s.any},{name:"text-transform",type:l.textTransform,triggersBounds:s.any},{name:"text-wrap",type:l.textWrap,triggersBounds:s.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:s.any},{name:"text-max-width",type:l.size,triggersBounds:s.any},{name:"text-outline-width",type:l.size,triggersBounds:s.any},{name:"line-height",type:l.positiveNumber,triggersBounds:s.any}],f=[{name:"text-valign",type:l.valign,triggersBounds:s.any},{name:"text-halign",type:l.halign,triggersBounds:s.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:s.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:s.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:s.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:s.any},{name:"text-justification",type:l.justification}],v=[{name:"events",type:l.bool},{name:"text-events",type:l.bool}],b=[{name:"display",type:l.display,triggersZOrder:s.any,triggersBounds:s.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:l.visibility,triggersZOrder:s.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:s.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:s.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:s.any},{name:"z-index",type:l.nonNegativeInt,triggersZOrder:s.any}],g=[{name:"overlay-padding",type:l.size,triggersBounds:s.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:s.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:s.any}],m=[{name:"underlay-padding",type:l.size,triggersBounds:s.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:s.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:s.any}],y=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],w=function(F,U){return U.value==="label"?-F.poolIndex():U.pfValue},_=[{name:"height",type:l.nodeSize,triggersBounds:s.any,hashOverride:w},{name:"width",type:l.nodeSize,triggersBounds:s.any,hashOverride:w},{name:"shape",type:l.nodeShape,triggersBounds:s.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:s.any},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:s.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:s.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:s.any}],k=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:s.any},{name:"border-style",type:l.borderStyle}],x=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],C=[{name:"position",type:l.position,triggersBounds:s.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:s.any},{name:"min-width",type:l.size,triggersBounds:s.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:s.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:s.any},{name:"min-height",type:l.size,triggersBounds:s.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:s.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:s.any}],D=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:s.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:s.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:s.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:s.any},{name:"control-point-step-size",type:l.size,triggersBounds:s.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:s.any},{name:"control-point-weights",type:l.numbers,triggersBounds:s.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:s.any},{name:"segment-weights",type:l.numbers,triggersBounds:s.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:s.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:s.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:s.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:s.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:s.any},{name:"loop-direction",type:l.angle,triggersBounds:s.any},{name:"loop-sweep",type:l.angle,triggersBounds:s.any},{name:"source-distance-from-node",type:l.size,triggersBounds:s.any},{name:"target-distance-from-node",type:l.size,triggersBounds:s.any}],P=[{name:"ghost",type:l.bool,triggersBounds:s.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:s.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:s.any},{name:"ghost-opacity",type:l.zeroOneNumber}],M=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],T=[];Ye.pieBackgroundN=16,T.push({name:"pie-size",type:l.sizeMaybePercent});for(var B=1;B<=Ye.pieBackgroundN;B++)T.push({name:"pie-"+B+"-background-color",type:l.color}),T.push({name:"pie-"+B+"-background-size",type:l.percent}),T.push({name:"pie-"+B+"-background-opacity",type:l.zeroOneNumber});var S=[],A=Ye.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:s.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill}].forEach(function(F){A.forEach(function(U){var Q=U+"-"+F.name,$=F.type,le=F.triggersBounds;S.push({name:Q,type:$,triggersBounds:le})})},{});var N=Ye.properties=[].concat(v,y,b,g,m,P,f,p,c,d,h,_,k,x,T,C,D,S,M),O=Ye.propertyGroups={behavior:v,transition:y,visibility:b,overlay:g,underlay:m,ghost:P,commonLabel:f,labelDimensions:p,mainLabel:c,sourceLabel:d,targetLabel:h,nodeBody:_,nodeBorder:k,backgroundImage:x,pie:T,compound:C,edgeLine:D,edgeArrow:S,core:M},I=Ye.propertyGroupNames={},z=Ye.propertyGroupKeys=Object.keys(O);z.forEach(function(F){I[F]=O[F].map(function(U){return U.name}),O[F].forEach(function(U){return U.groupKey=F})});var Y=Ye.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Ye.propertyNames=N.map(function(F){return F.name});for(var V=0;V<N.length;V++){var H=N[V];N[H.name]=H}for(var j=0;j<Y.length;j++){var W=Y[j],ee=N[W.pointsTo],L={name:W.name,alias:!0,pointsTo:ee};N.push(L),N[W.name]=L}})();Ye.getDefaultProperty=function(e){return this.getDefaultProperties()[e]};Ye.getDefaultProperties=function(){var e=this._private;if(e.defaultProperties!=null)return e.defaultProperties;for(var t=ue({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(s,l){for(var c=1;c<=Ye.pieBackgroundN;c++){var d=l.name.replace("{{i}}",c),h=l.value;s[d]=h}return s},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(s,l){return Ye.arrowPrefixes.forEach(function(c){var d=c+"-"+l.name,h=l.value;s[d]=h}),s},{})),n={},r=0;r<this.properties.length;r++){var a=this.properties[r];if(!a.pointsTo){var i=a.name,o=t[i],u=this.parse(i,o);n[i]=u}}return e.defaultProperties=n,e.defaultProperties};Ye.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var sa={};sa.parse=function(e,t,n,r){var a=this;if(Oe(t))return a.parseImplWarn(e,t,n,r);var i=r==="mapping"||r===!0||r===!1||r==null?"dontcare":r,o=n?"t":"f",u=""+t,s=Qo(e,u,o,i),l=a.propCache=a.propCache||[],c;return(c=l[s])||(c=l[s]=a.parseImplWarn(e,t,n,r)),(n||r==="mapping")&&(c=xt(c),c&&(c.value=xt(c.value))),c};sa.parseImplWarn=function(e,t,n,r){var a=this.parseImpl(e,t,n,r);return!a&&t!=null&&_e("The style property `".concat(e,": ").concat(t,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&t==="label"&&_e("The style value of `label` is deprecated for `"+a.name+"`"),a};sa.parseImpl=function(e,t,n,r){var a=this;e=Ua(e);var i=a.properties[e],o=t,u=a.types;if(!i||t===void 0)return null;i.alias&&(i=i.pointsTo,e=i.name);var s=se(t);s&&(t=t.trim());var l=i.type;if(!l)return null;if(n&&(t===""||t===null))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(Oe(t))return{name:e,value:t,strValue:"fn",mapped:u.fn,bypass:n};var c,d;if(!(!s||r||t.length<7||t[1]!=="a")){if(t.length>=7&&t[0]==="d"&&(c=new RegExp(u.data.regex).exec(t))){if(n)return!1;var h=u.data;return{name:e,value:c,strValue:""+t,mapped:h,field:c[1],bypass:n}}else if(t.length>=10&&t[0]==="m"&&(d=new RegExp(u.mapData.regex).exec(t))){if(n||l.multiple)return!1;var p=u.mapData;if(!(l.color||l.number))return!1;var f=this.parse(e,d[4]);if(!f||f.mapped)return!1;var v=this.parse(e,d[5]);if(!v||v.mapped)return!1;if(f.pfValue===v.pfValue||f.strValue===v.strValue)return _e("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+f.strValue+"`"),this.parse(e,f.strValue);if(l.color){var b=f.value,g=v.value,m=b[0]===g[0]&&b[1]===g[1]&&b[2]===g[2]&&(b[3]===g[3]||(b[3]==null||b[3]===1)&&(g[3]==null||g[3]===1));if(m)return!1}return{name:e,value:d,strValue:""+t,mapped:p,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:f.value,valueMax:v.value,bypass:n}}}if(l.multiple&&r!=="multiple"){var y;if(s?y=t.split(/\s+/):Se(t)?y=t:y=[t],l.evenMultiple&&y.length%2!==0)return null;for(var w=[],_=[],k=[],x="",C=!1,D=0;D<y.length;D++){var P=a.parse(e,y[D],n,"multiple");C=C||se(P.value),w.push(P.value),k.push(P.pfValue!=null?P.pfValue:P.value),_.push(P.units),x+=(D>0?" ":"")+P.strValue}return l.validate&&!l.validate(w,_)?null:l.singleEnum&&C?w.length===1&&se(w[0])?{name:e,value:w[0],strValue:w[0],bypass:n}:null:{name:e,value:w,pfValue:k,strValue:x,bypass:n,units:_}}var M=function(){for(var U=0;U<l.enums.length;U++){var Q=l.enums[U];if(Q===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null};if(l.number){var T,B="px";if(l.units&&(T=l.units),l.implicitUnits&&(B=l.implicitUnits),!l.unitless)if(s){var S="px|em"+(l.allowPercent?"|\\%":"");T&&(S=T);var A=t.match("^("+Re+")("+S+")?$");A&&(t=A[1],T=A[2]||B)}else(!T||l.implicitUnits)&&(T=B);if(t=parseFloat(t),isNaN(t)&&l.enums===void 0)return null;if(isNaN(t)&&l.enums!==void 0)return t=o,M();if(l.integer&&!fp(t)||l.min!==void 0&&(t<l.min||l.strictMin&&t===l.min)||l.max!==void 0&&(t>l.max||l.strictMax&&t===l.max))return null;var N={name:e,value:t,strValue:""+t+(T||""),units:T,bypass:n};return l.unitless||T!=="px"&&T!=="em"?N.pfValue=t:N.pfValue=T==="px"||!T?t:this.getEmSizeInPixels()*t,(T==="ms"||T==="s")&&(N.pfValue=T==="ms"?t:1e3*t),(T==="deg"||T==="rad")&&(N.pfValue=T==="rad"?t:cf(t)),T==="%"&&(N.pfValue=t/100),N}else if(l.propList){var O=[],I=""+t;if(I!=="none"){for(var z=I.split(/\s*,\s*|\s+/),Y=0;Y<z.length;Y++){var V=z[Y].trim();a.properties[V]?O.push(V):_e("`"+V+"` is not a valid property name")}if(O.length===0)return null}return{name:e,value:O,strValue:O.length===0?"none":O.join(" "),bypass:n}}else if(l.color){var H=Bp(t);return H?{name:e,value:H,pfValue:H,strValue:"rgb("+H[0]+","+H[1]+","+H[2]+")",bypass:n}:null}else if(l.regex||l.regexes){if(l.enums){var j=M();if(j)return j}for(var W=l.regexes?l.regexes:[l.regex],ee=0;ee<W.length;ee++){var L=new RegExp(W[ee]),F=L.exec(t);if(F)return{name:e,value:l.singleRegexMatchValue?F[1]:F,strValue:""+t,bypass:n}}return null}else return l.string?{name:e,value:""+t,strValue:""+t,bypass:n}:l.enums?M():null};var $e=function e(t){if(!(this instanceof e))return new e(t);if(!Wa(t)){ze("A style must have a core reference");return}this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()},Je=$e.prototype;Je.instanceString=function(){return"style"};Je.clear=function(){for(var e=this._private,t=e.cy,n=t.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(n,!0),n.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};Je.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Je.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)};Je.selector=function(e){var t=e==="core"?null:new qt(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this};Je.css=function(){var e=this,t=arguments;if(t.length===1)for(var n=t[0],r=0;r<e.properties.length;r++){var a=e.properties[r],i=n[a.name];i===void 0&&(i=n[Qr(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else t.length===2&&this.cssRule(t[0],t[1]);return this};Je.style=Je.css;Je.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var a=!this[r].selector;a&&(this._private.coreStyle[n.name]=n)}return this};Je.append=function(e){return Yo(e)?e.appendToStyle(this):Se(e)?this.appendFromJson(e):se(e)&&this.appendFromString(e),this};$e.fromJson=function(e,t){var n=new $e(e);return n.fromJson(t),n};$e.fromString=function(e,t){return new $e(e).fromString(t)};[et,dr,ai,Et,oa,ii,Ye,sa].forEach(function(e){ue(Je,e)});$e.types=Je.types;$e.properties=Je.properties;$e.propertyGroups=Je.propertyGroups;$e.propertyGroupNames=Je.propertyGroupNames;$e.propertyGroupKeys=Je.propertyGroupKeys;var Ev={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return Yo(e)?t.style=e.generateStyle(this):Se(e)?t.style=$e.fromJson(this,e):se(e)?t.style=$e.fromString(this,e):t.style=$e(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},kv="single",tn={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=kv),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,r,a,i,o;switch(e.length){case 0:return t;case 1:if(se(e[0]))return n=e[0],t[n];if(Ee(e[0])){if(!this._private.panningEnabled)return this;a=e[0],i=a.x,o=a.y,J(i)&&(t.x=i),J(o)&&(t.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],r=e[1],(n==="x"||n==="y")&&J(r)&&(t[n]=r),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,r=this._private.pan,a,i,o,u,s;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Ee(e)&&(o=n[0],u=o.x,s=o.y,J(u)&&(r.x+=u),J(s)&&(r.y+=s),this.emit("pan viewport"));break;case 2:a=e,i=t,(a==="x"||a==="y")&&J(i)&&(r[a]+=i),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(J(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(se(e)){var r=e;e=this.$(r)}else if(mp(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else lt(e)||(e=this.mutableElements());if(!(lt(e)&&e.empty())){n=n||e.boundingBox();var i=this.width(),o=this.height(),u;if(t=J(t)?t:0,!isNaN(i)&&!isNaN(o)&&i>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((i-2*t)/n.w,(o-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var s={x:(i-u*(n.x1+n.x2))/2,y:(o-u*(n.y1+n.y2))/2};return{zoom:u,pan:s}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var r=e;e=r.min,t=r.max}return J(e)&&J(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):J(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:J(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,r=t.zoom,a,i,o=!1;if(t.zoomingEnabled||(o=!0),J(e)?i=e:Ee(e)&&(i=e.level,e.position!=null?a=ea(e.position,r,n):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!t.panningEnabled&&(o=!0)),i=i>t.maxZoom?t.maxZoom:i,i=i<t.minZoom?t.minZoom:i,o||!J(i)||i===r||a!=null&&(!J(a.x)||!J(a.y)))return null;if(a!=null){var u=n,s=r,l=i,c={x:-l/s*(a.x-u.x)+a.x,y:-l/s*(a.y-u.y)+a.y};return{zoomed:!0,panned:!0,zoom:l,pan:c}}else return{zoomed:!0,panned:!1,zoom:i,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,r=!0,a=[],i=!1,o=!1;if(!e)return this;if(J(e.zoom)||(n=!1),Ee(e.pan)||(r=!1),!n&&!r)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?i=!0:(t.zoom=u,a.push("zoom"))}if(r&&(!i||!e.cancelOnFailedZoom)&&t.panningEnabled){var s=e.pan;J(s.x)&&(t.pan.x=s.x,o=!1),J(s.y)&&(t.pan.y=s.y,o=!1),o||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(se(e)){var n=e;e=this.mutableElements().filter(n)}else lt(e)||(e=this.mutableElements());if(e.length!==0){var r=e.boundingBox(),a=this.width(),i=this.height();t=t===void 0?this._private.zoom:t;var o={x:(a-t*(r.x1+r.x2))/2,y:(i-t*(r.y1+r.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container;return e.sizeCache=e.sizeCache||(t?function(){var n=Ie.getComputedStyle(t),r=function(a){return parseFloat(n.getPropertyValue(a))};return{width:t.clientWidth-r("padding-left")-r("padding-right"),height:t.clientHeight-r("padding-top")-r("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};tn.centre=tn.center;tn.autolockNodes=tn.autolock;tn.autoungrabifyNodes=tn.autoungrabify;var tr={data:Te.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Te.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Te.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Te.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};tr.attr=tr.data;tr.removeAttr=tr.removeData;var nr=function(e){var t=this;e=ue({},e);var n=e.container;n&&!Lr(n)&&Lr(n[0])&&(n=n[0]);var r=n?n._cyreg:null;r=r||{},r&&r.cy&&(r.cy.destroy(),r={});var a=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=t;var i=Ie!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=ue({name:i?"grid":"null"},o.layout),o.renderer=ue({name:i?"canvas":"null"},o.renderer);var u=function(h,p,f){return p!==void 0?p:f!==void 0?f:h},s=this._private={container:n,ready:!1,options:o,elements:new We(this),listeners:[],aniEles:new We(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?i:o.styleEnabled,zoom:J(o.zoom)?o.zoom:1,pan:{x:Ee(o.pan)&&J(o.pan.x)?o.pan.x:0,y:Ee(o.pan)&&J(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var l=function(h,p){var f=h.some(yp);if(f)return _n.all(h).then(p);p(h)};s.styleEnabled&&t.setStyle([]);var c=ue({},o,o.renderer);t.initRenderer(c);var d=function(h,p,f){t.notifications(!1);var v=t.mutableElements();v.length>0&&v.remove(),h!=null&&(Ee(h)||Se(h))&&t.add(h),t.one("layoutready",function(g){t.notifications(!0),t.emit(g),t.one("load",p),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",f),t.emit("done")});var b=ue({},t._private.options.layout);b.eles=t.elements(),t.layout(b).run()};l([o.style,o.elements],function(h){var p=h[0],f=h[1];s.styleEnabled&&t.style().append(p),d(f,function(){t.startAnimationLoop(),s.ready=!0,Oe(o.ready)&&t.on("ready",o.ready);for(var v=0;v<a.length;v++){var b=a[v];t.on("ready",b)}r&&(r.readies=[]),t.emit("ready")},o.done)})},qr=nr.prototype;ue(qr,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(e!=null){var t=this,n=t._private,r=n.options;return!Lr(e)&&Lr(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(ue({},r,r.renderer,{name:r.renderer.name==="null"?"canvas":r.renderer.name})),t.startAnimationLoop(),t.style(r.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return xt(this._private.options)},json:function(e){var t=this,n=t._private,r=t.mutableElements(),a=function(m){return t.getElementById(m.id())};if(Ee(e)){if(t.startBatch(),e.elements){var i={},o=function(m,y){for(var w=[],_=[],k=0;k<m.length;k++){var x=m[k];if(!x.data.id){_e("cy.json() cannot handle elements without an ID attribute");continue}var C=""+x.data.id,D=t.getElementById(C);i[C]=!0,D.length!==0?_.push({ele:D,json:x}):(y&&(x.group=y),w.push(x))}t.add(w);for(var P=0;P<_.length;P++){var M=_[P],T=M.ele,B=M.json;T.json(B)}};if(Se(e.elements))o(e.elements);else for(var u=["nodes","edges"],s=0;s<u.length;s++){var l=u[s],c=e.elements[l];Se(c)&&o(c,l)}var d=t.collection();r.filter(function(m){return!i[m.id()]}).forEach(function(m){m.isParent()?d.merge(m):m.remove()}),d.forEach(function(m){return m.children().move({parent:null})}),d.forEach(function(m){return a(m).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<h.length;p++){var f=h[p];e[f]!=null&&t[f](e[f])}return t.endBatch(),this}else{var v=!!e,b={};v?b.elements=this.elements().map(function(m){return m.json()}):(b.elements={},r.forEach(function(m){var y=m.group();b.elements[y]||(b.elements[y]=[]),b.elements[y].push(m.json())})),this._private.styleEnabled&&(b.style=t.style().json()),b.data=xt(t.data());var g=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=xt(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=xt(g.renderer),b.hideEdgesOnViewport=g.hideEdgesOnViewport,b.textureOnViewport=g.textureOnViewport,b.wheelSensitivity=g.wheelSensitivity,b.motionBlur=g.motionBlur,b.multiClickDebounceTime=g.multiClickDebounceTime,b}}});qr.$id=qr.getElementById;[hv,mv,Ls,Ia,Ir,bv,Oa,Or,Ev,tn,tr].forEach(function(e){ue(qr,e)});var Cv={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},dn=function(e){return e.scratch("breadthfirst")},go=function(e,t){return e.scratch("breadthfirst",t)};function Rs(e){this.options=ue({},Cv,e)}Rs.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=r.nodes().filter(function(K){return!K.isParent()}),i=r,o=t.directed,u=t.maximal||t.maximalAdjustments>0,s=st(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l;if(lt(t.roots))l=t.roots;else if(Se(t.roots)){for(var c=[],d=0;d<t.roots.length;d++){var h=t.roots[d],p=n.getElementById(h);c.push(p)}l=n.collection(c)}else if(se(t.roots))l=n.$(t.roots);else if(o)l=a.roots();else{var f=r.components();l=n.collection();for(var v=function(K){var ae=f[K],te=ae.maxDegree(!1),ne=ae.filter(function(oe){return oe.degree(!1)===te});l=l.add(ne)},b=0;b<f.length;b++)v(b)}var g=[],m={},y=function(K,ae){g[ae]==null&&(g[ae]=[]);var te=g[ae].length;g[ae].push(K),go(K,{index:te,depth:ae})},w=function(K,ae){var te=dn(K),ne=te.depth,oe=te.index;g[ne][oe]=null,y(K,ae)};i.bfs({roots:l,directed:t.directed,visit:function(K,ae,te,ne,oe){var de=K[0],fe=de.id();y(de,oe),m[fe]=!0}});for(var _=[],k=0;k<a.length;k++){var x=a[k];m[x.id()]||_.push(x)}var C=function(K){for(var ae=g[K],te=0;te<ae.length;te++){var ne=ae[te];if(ne==null){ae.splice(te,1),te--;continue}go(ne,{depth:K,index:te})}},D=function(){for(var K=0;K<g.length;K++)C(K)},P=function(K,ae){for(var te=dn(K),ne=K.incomers().filter(function(E){return E.isNode()&&r.has(E)}),oe=-1,de=K.id(),fe=0;fe<ne.length;fe++){var ce=ne[fe],xe=dn(ce);oe=Math.max(oe,xe.depth)}return te.depth<=oe?ae[de]?null:(w(K,oe+1),ae[de]=!0,!0):!1};if(o&&u){var M=[],T={},B=function(K){return M.push(K)},S=function(){return M.shift()};for(a.forEach(function(K){return M.push(K)});M.length>0;){var A=S(),N=P(A,T);if(N)A.outgoers().filter(function(K){return K.isNode()&&r.has(K)}).forEach(B);else if(N===null){_e("Detected double maximal shift for node `"+A.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}D();var O=0;if(t.avoidOverlap)for(var I=0;I<a.length;I++){var z=a[I],Y=z.layoutDimensions(t),V=Y.w,H=Y.h;O=Math.max(O,V,H)}var j={},W=function(K){if(j[K.id()])return j[K.id()];for(var ae=dn(K).depth,te=K.neighborhood(),ne=0,oe=0,de=0;de<te.length;de++){var fe=te[de];if(!(fe.isEdge()||fe.isParent()||!a.has(fe))){var ce=dn(fe);if(ce!=null){var xe=ce.index,E=ce.depth;if(!(xe==null||E==null)){var R=g[E].length;E<ae&&(ne+=xe/R,oe++)}}}}return oe=Math.max(1,oe),ne=ne/oe,oe===0&&(ne=0),j[K.id()]=ne,ne},ee=function(K,ae){var te=W(K),ne=W(ae),oe=te-ne;return oe===0?Wo(K.id(),ae.id()):oe};t.depthSort!==void 0&&(ee=t.depthSort);for(var L=0;L<g.length;L++)g[L].sort(ee),C(L);for(var F=[],U=0;U<_.length;U++)F.push(_[U]);g.unshift(F),D();for(var Q=0,$=0;$<g.length;$++)Q=Math.max(g[$].length,Q);var le={x:s.x1+s.w/2,y:s.x1+s.h/2},ve=g.reduce(function(K,ae){return Math.max(K,ae.length)},0),me=function(K){var ae=dn(K),te=ae.depth,ne=ae.index,oe=g[te].length,de=Math.max(s.w/((t.grid?ve:oe)+1),O),fe=Math.max(s.h/(g.length+1),O),ce=Math.min(s.w/2/g.length,s.h/2/g.length);if(ce=Math.max(ce,O),t.circle){var xe=ce*te+ce-(g.length>0&&g[0].length<=3?ce/2:0),E=2*Math.PI/g[te].length*ne;return te===0&&g[0].length===1&&(xe=1),{x:le.x+xe*Math.cos(E),y:le.y+xe*Math.sin(E)}}else{var R={x:le.x+(ne+1-(oe+1)/2)*de,y:(te+1)*fe};return R}};return r.nodes().layoutPositions(this,t,me),this};var Dv={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Vs(e){this.options=ue({},Dv,e)}Vs.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,i=r.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));for(var o=st(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u={x:o.x1+o.w/2,y:o.y1+o.h/2},s=t.sweep===void 0?2*Math.PI-2*Math.PI/i.length:t.sweep,l=s/Math.max(1,i.length-1),c,d=0,h=0;h<i.length;h++){var p=i[h],f=p.layoutDimensions(t),v=f.w,b=f.h;d=Math.max(d,v,b)}if(J(t.radius)?c=t.radius:i.length<=1?c=0:c=Math.min(o.h,o.w)/2-d,i.length>1&&t.avoidOverlap){d*=1.75;var g=Math.cos(l)-Math.cos(0),m=Math.sin(l)-Math.sin(0),y=Math.sqrt(d*d/(g*g+m*m));c=Math.max(y,c)}var w=function(_,k){var x=t.startAngle+k*l*(a?1:-1),C=c*Math.cos(x),D=c*Math.sin(x),P={x:u.x+C,y:u.y+D};return P};return r.nodes().layoutPositions(this,t,w),this};var Tv={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Fs(e){this.options=ue({},Tv,e)}Fs.prototype.run=function(){for(var e=this.options,t=e,n=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,r=e.cy,a=t.eles,i=a.nodes().not(":parent"),o=st(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u={x:o.x1+o.w/2,y:o.y1+o.h/2},s=[],l=0,c=0;c<i.length;c++){var d=i[c],h=void 0;h=t.concentric(d),s.push({value:h,node:d}),d._private.scratch.concentric=h}i.updateStyle();for(var p=0;p<i.length;p++){var f=i[p],v=f.layoutDimensions(t);l=Math.max(l,v.w,v.h)}s.sort(function(K,ae){return ae.value-K.value});for(var b=t.levelWidth(i),g=[[]],m=g[0],y=0;y<s.length;y++){var w=s[y];if(m.length>0){var _=Math.abs(m[0].value-w.value);_>=b&&(m=[],g.push(m))}m.push(w)}var k=l+t.minNodeSpacing;if(!t.avoidOverlap){var x=g.length>0&&g[0].length>1,C=Math.min(o.w,o.h)/2-k,D=C/(g.length+x?1:0);k=Math.min(k,D)}for(var P=0,M=0;M<g.length;M++){var T=g[M],B=t.sweep===void 0?2*Math.PI-2*Math.PI/T.length:t.sweep,S=T.dTheta=B/Math.max(1,T.length-1);if(T.length>1&&t.avoidOverlap){var A=Math.cos(S)-Math.cos(0),N=Math.sin(S)-Math.sin(0),O=Math.sqrt(k*k/(A*A+N*N));P=Math.max(O,P)}T.r=P,P+=k}if(t.equidistant){for(var I=0,z=0,Y=0;Y<g.length;Y++){var V=g[Y],H=V.r-z;I=Math.max(I,H)}z=0;for(var j=0;j<g.length;j++){var W=g[j];j===0&&(z=W.r),W.r=z,z+=I}}for(var ee={},L=0;L<g.length;L++)for(var F=g[L],U=F.dTheta,Q=F.r,$=0;$<F.length;$++){var le=F[$],ve=t.startAngle+(n?1:-1)*U*$,me={x:u.x+Q*Math.cos(ve),y:u.y+Q*Math.sin(ve)};ee[le.node.id()]=me}return a.nodes().layoutPositions(this,t,function(K){var ae=K.id();return ee[ae]}),this};var ka,_v={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function la(e){this.options=ue({},_v,e),this.options.layout=this}la.prototype.run=function(){var e=this.options,t=e.cy,n=this;n.stopped=!1,(e.animate===!0||e.animate===!1)&&n.emit({type:"layoutstart",layout:n}),e.debug===!0?ka=!0:ka=!1;var r=Pv(t,n,e);ka&&Bv(r),e.randomize&&Nv(r);var a=Tt(),i=function(){Av(r,t,e),e.fit===!0&&t.fit(e.padding)},o=function(d){return!(n.stopped||d>=e.numIter||(Iv(r,e),r.temperature=r.temperature*e.coolingFactor,r.temperature<e.minTemp))},u=function(){if(e.animate===!0||e.animate===!1)i(),n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n});else{var d=e.eles.nodes(),h=js(r,e,d);d.layoutPositions(n,e,h)}},s=0,l=!0;if(e.animate===!0){var c=function d(){for(var h=0;l&&h<e.refresh;)l=o(s),s++,h++;if(!l)mo(r,e),u();else{var p=Tt();p-a>=e.animationThreshold&&i(),Rr(d)}};c()}else{for(;l;)l=o(s),s++;mo(r,e),u()}return this};la.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};la.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Pv=function(e,t,n){for(var r=n.eles.edges(),a=n.eles.nodes(),i={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:st(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},o=n.eles.components(),u={},s=0;s<o.length;s++)for(var l=o[s],c=0;c<l.length;c++){var d=l[c];u[d.id()]=s}for(var s=0;s<i.nodeSize;s++){var h=a[s],p=h.layoutDimensions(n),f={};f.isLocked=h.locked(),f.id=h.data("id"),f.parentId=h.data("parent"),f.cmptId=u[h.id()],f.children=[],f.positionX=h.position("x"),f.positionY=h.position("y"),f.offsetX=0,f.offsetY=0,f.height=p.w,f.width=p.h,f.maxX=f.positionX+f.width/2,f.minX=f.positionX-f.width/2,f.maxY=f.positionY+f.height/2,f.minY=f.positionY-f.height/2,f.padLeft=parseFloat(h.style("padding")),f.padRight=parseFloat(h.style("padding")),f.padTop=parseFloat(h.style("padding")),f.padBottom=parseFloat(h.style("padding")),f.nodeRepulsion=Oe(n.nodeRepulsion)?n.nodeRepulsion(h):n.nodeRepulsion,i.layoutNodes.push(f),i.idToIndex[f.id]=s}for(var v=[],b=0,g=-1,m=[],s=0;s<i.nodeSize;s++){var h=i.layoutNodes[s],y=h.parentId;y!=null?i.layoutNodes[i.idToIndex[y]].children.push(h.id):(v[++g]=h.id,m.push(h.id))}for(i.graphSet.push(m);b<=g;){var w=v[b++],_=i.idToIndex[w],d=i.layoutNodes[_],k=d.children;if(k.length>0){i.graphSet.push(k);for(var s=0;s<k.length;s++)v[++g]=k[s]}}for(var s=0;s<i.graphSet.length;s++)for(var x=i.graphSet[s],c=0;c<x.length;c++){var C=i.idToIndex[x[c]];i.indexToGraph[C]=s}for(var s=0;s<i.edgeSize;s++){var D=r[s],P={};P.id=D.data("id"),P.sourceId=D.data("source"),P.targetId=D.data("target");var M=Oe(n.idealEdgeLength)?n.idealEdgeLength(D):n.idealEdgeLength,T=Oe(n.edgeElasticity)?n.edgeElasticity(D):n.edgeElasticity,B=i.idToIndex[P.sourceId],S=i.idToIndex[P.targetId],A=i.indexToGraph[B],N=i.indexToGraph[S];if(A!=N){for(var O=Mv(P.sourceId,P.targetId,i),I=i.graphSet[O],z=0,f=i.layoutNodes[B];I.indexOf(f.id)===-1;)f=i.layoutNodes[i.idToIndex[f.parentId]],z++;for(f=i.layoutNodes[S];I.indexOf(f.id)===-1;)f=i.layoutNodes[i.idToIndex[f.parentId]],z++;M*=z*n.nestingFactor}P.idealLength=M,P.elasticity=T,i.layoutEdges.push(P)}return i},Mv=function(e,t,n){var r=Sv(e,t,0,n);return 2>r.count?0:r.graph},Sv=function e(t,n,r,a){var i=a.graphSet[r];if(-1<i.indexOf(t)&&-1<i.indexOf(n))return{count:2,graph:r};for(var o=0,u=0;u<i.length;u++){var s=i[u],l=a.idToIndex[s],c=a.layoutNodes[l].children;if(c.length!==0){var d=a.indexToGraph[a.idToIndex[c[0]]],h=e(t,n,d,a);if(h.count!==0)if(h.count===1){if(o++,o===2)break}else return h}}return{count:o,graph:r}},Bv,Nv=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,a=0;a<e.nodeSize;a++){var i=e.layoutNodes[a];i.children.length===0&&!i.isLocked&&(i.positionX=Math.random()*n,i.positionY=Math.random()*r)}},js=function(e,t,n){var r=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(i){var o=e.layoutNodes[e.idToIndex[i.data("id")]];a.x1=Math.min(a.x1,o.positionX),a.x2=Math.max(a.x2,o.positionX),a.y1=Math.min(a.y1,o.positionY),a.y2=Math.max(a.y2,o.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(i,o){var u=e.layoutNodes[e.idToIndex[i.data("id")]];if(t.boundingBox){var s=(u.positionX-a.x1)/a.w,l=(u.positionY-a.y1)/a.h;return{x:r.x1+s*r.w,y:r.y1+l*r.h}}else return{x:u.positionX,y:u.positionY}}},Av=function(e,t,n){var r=n.layout,a=n.eles.nodes(),i=js(e,n,a);a.positions(i),e.ready!==!0&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},Iv=function(e,t,n){Ov(e,t),Rv(e),Vv(e,t),Fv(e),jv(e)},Ov=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],a=r.length,i=0;i<a;i++)for(var o=e.layoutNodes[e.idToIndex[r[i]]],u=i+1;u<a;u++){var s=e.layoutNodes[e.idToIndex[r[u]]];zv(o,s,e,t)}},vo=function(e){return-e+2*e*Math.random()},zv=function(e,t,n,r){var a=e.cmptId,i=t.cmptId;if(!(a!==i&&!n.isCompound)){var o=t.positionX-e.positionX,u=t.positionY-e.positionY,s=1;o===0&&u===0&&(o=vo(s),u=vo(s));var l=Lv(e,t,o,u);if(l>0)var b=r.nodeOverlap*l,v=Math.sqrt(o*o+u*u),g=b*o/v,m=b*u/v;else var c=Xr(e,o,u),d=Xr(t,-1*o,-1*u),h=d.x-c.x,p=d.y-c.y,f=h*h+p*p,v=Math.sqrt(f),b=(e.nodeRepulsion+t.nodeRepulsion)/f,g=b*h/v,m=b*p/v;e.isLocked||(e.offsetX-=g,e.offsetY-=m),t.isLocked||(t.offsetX+=g,t.offsetY+=m)}},Lv=function(e,t,n,r){if(n>0)var a=e.maxX-t.minX;else var a=t.maxX-e.minX;if(r>0)var i=e.maxY-t.minY;else var i=t.maxY-e.minY;return a>=0&&i>=0?Math.sqrt(a*a+i*i):0},Xr=function(e,t,n){var r=e.positionX,a=e.positionY,i=e.height||1,o=e.width||1,u=n/t,s=i/o,l={};return t===0&&0<n||t===0&&0>n?(l.x=r,l.y=a+i/2,l):0<t&&-1*s<=u&&u<=s?(l.x=r+o/2,l.y=a+o*n/2/t,l):0>t&&-1*s<=u&&u<=s?(l.x=r-o/2,l.y=a-o*n/2/t,l):0<n&&(u<=-1*s||u>=s)?(l.x=r+i*t/2/n,l.y=a+i/2,l):(0>n&&(u<=-1*s||u>=s)&&(l.x=r-i*t/2/n,l.y=a-i/2),l)},Rv=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],a=e.idToIndex[r.sourceId],i=e.layoutNodes[a],o=e.idToIndex[r.targetId],u=e.layoutNodes[o],s=u.positionX-i.positionX,l=u.positionY-i.positionY;if(!(s===0&&l===0)){var c=Xr(i,s,l),d=Xr(u,-1*s,-1*l),h=d.x-c.x,p=d.y-c.y,f=Math.sqrt(h*h+p*p),v=Math.pow(r.idealLength-f,2)/r.elasticity;if(f!==0)var b=v*h/f,g=v*p/f;else var b=0,g=0;i.isLocked||(i.offsetX+=b,i.offsetY+=g),u.isLocked||(u.offsetX-=b,u.offsetY-=g)}}},Vv=function(e,t){if(t.gravity!==0)for(var n=1,r=0;r<e.graphSet.length;r++){var a=e.graphSet[r],i=a.length;if(r===0)var s=e.clientHeight/2,l=e.clientWidth/2;else var o=e.layoutNodes[e.idToIndex[a[0]]],u=e.layoutNodes[e.idToIndex[o.parentId]],s=u.positionX,l=u.positionY;for(var c=0;c<i;c++){var d=e.layoutNodes[e.idToIndex[a[c]]];if(!d.isLocked){var h=s-d.positionX,p=l-d.positionY,f=Math.sqrt(h*h+p*p);if(f>n){var v=t.gravity*h/f,b=t.gravity*p/f;d.offsetX+=v,d.offsetY+=b}}}}},Fv=function(e,t){var n=[],r=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;r<=a;){var i=n[r++],o=e.idToIndex[i],u=e.layoutNodes[o],s=u.children;if(0<s.length&&!u.isLocked){for(var l=u.offsetX,c=u.offsetY,d=0;d<s.length;d++){var h=e.layoutNodes[e.idToIndex[s[d]]];h.offsetX+=l,h.offsetY+=c,n[++a]=s[d]}u.offsetX=0,u.offsetY=0}}},jv=function(e,t){for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var a=qv(r.offsetX,r.offsetY,e.temperature);r.positionX+=a.x,r.positionY+=a.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,Xv(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},qv=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var a={x:n*e/r,y:n*t/r};else var a={x:e,y:t};return a},Xv=function e(t,n){var r=t.parentId;if(r!=null){var a=n.layoutNodes[n.idToIndex[r]],i=!1;if((a.maxX==null||t.maxX+a.padRight>a.maxX)&&(a.maxX=t.maxX+a.padRight,i=!0),(a.minX==null||t.minX-a.padLeft<a.minX)&&(a.minX=t.minX-a.padLeft,i=!0),(a.maxY==null||t.maxY+a.padBottom>a.maxY)&&(a.maxY=t.maxY+a.padBottom,i=!0),(a.minY==null||t.minY-a.padTop<a.minY)&&(a.minY=t.minY-a.padTop,i=!0),i)return e(a,n)}},mo=function(e,t){for(var n=e.layoutNodes,r=[],a=0;a<n.length;a++){var i=n[a],o=i.cmptId,u=r[o]=r[o]||[];u.push(i)}for(var s=0,a=0;a<r.length;a++){var l=r[a];if(l){l.x1=1/0,l.x2=-1/0,l.y1=1/0,l.y2=-1/0;for(var c=0;c<l.length;c++){var d=l[c];l.x1=Math.min(l.x1,d.positionX-d.width/2),l.x2=Math.max(l.x2,d.positionX+d.width/2),l.y1=Math.min(l.y1,d.positionY-d.height/2),l.y2=Math.max(l.y2,d.positionY+d.height/2)}l.w=l.x2-l.x1,l.h=l.y2-l.y1,s+=l.w*l.h}}r.sort(function(g,m){return m.w*m.h-g.w*g.h});for(var h=0,p=0,f=0,v=0,b=Math.sqrt(s)*e.clientWidth/e.clientHeight,a=0;a<r.length;a++){var l=r[a];if(l){for(var c=0;c<l.length;c++){var d=l[c];d.isLocked||(d.positionX+=h-l.x1,d.positionY+=p-l.y1)}h+=l.w+t.componentSpacing,f+=l.w+t.componentSpacing,v=Math.max(v,l.h),f>b&&(p+=v+t.componentSpacing,h=0,f=0,v=0)}}},Yv={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function qs(e){this.options=ue({},Yv,e)}qs.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=r.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));var i=st(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(i.h===0||i.w===0)r.nodes().layoutPositions(this,t,function(j){return{x:i.x1,y:i.y1}});else{var o=a.size(),u=Math.sqrt(o*i.h/i.w),s=Math.round(u),l=Math.round(i.w/i.h*u),c=function(j){if(j==null)return Math.min(s,l);var W=Math.min(s,l);W==s?s=j:l=j},d=function(j){if(j==null)return Math.max(s,l);var W=Math.max(s,l);W==s?s=j:l=j},h=t.rows,p=t.cols!=null?t.cols:t.columns;if(h!=null&&p!=null)s=h,l=p;else if(h!=null&&p==null)s=h,l=Math.ceil(o/s);else if(h==null&&p!=null)l=p,s=Math.ceil(o/l);else if(l*s>o){var f=c(),v=d();(f-1)*v>=o?c(f-1):(v-1)*f>=o&&d(v-1)}else for(;l*s<o;){var b=c(),g=d();(g+1)*b>=o?d(g+1):c(b+1)}var m=i.w/l,y=i.h/s;if(t.condense&&(m=0,y=0),t.avoidOverlap)for(var w=0;w<a.length;w++){var _=a[w],k=_._private.position;(k.x==null||k.y==null)&&(k.x=0,k.y=0);var x=_.layoutDimensions(t),C=t.avoidOverlapPadding,D=x.w+C,P=x.h+C;m=Math.max(m,D),y=Math.max(y,P)}for(var M={},T=function(j,W){return!!M["c-"+j+"-"+W]},B=function(j,W){M["c-"+j+"-"+W]=!0},S=0,A=0,N=function(){A++,A>=l&&(A=0,S++)},O={},I=0;I<a.length;I++){var z=a[I],Y=t.position(z);if(Y&&(Y.row!==void 0||Y.col!==void 0)){var V={row:Y.row,col:Y.col};if(V.col===void 0)for(V.col=0;T(V.row,V.col);)V.col++;else if(V.row===void 0)for(V.row=0;T(V.row,V.col);)V.row++;O[z.id()]=V,B(V.row,V.col)}}var H=function(j,W){var ee,L;if(j.locked()||j.isParent())return!1;var F=O[j.id()];if(F)ee=F.col*m+m/2+i.x1,L=F.row*y+y/2+i.y1;else{for(;T(S,A);)N();ee=A*m+m/2+i.x1,L=S*y+y/2+i.y1,B(S,A),N()}return{x:ee,y:L}};a.layoutPositions(this,t,H)}return this};var Hv={ready:function(){},stop:function(){}};function oi(e){this.options=ue({},Hv,e)}oi.prototype.run=function(){var e=this.options,t=e.eles,n=this;return e.cy,n.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.emit("layoutready"),n.one("layoutstop",e.stop),n.emit("layoutstop"),this};oi.prototype.stop=function(){return this};var Wv={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Xs(e){this.options=ue({},Wv,e)}Xs.prototype.run=function(){var e=this.options,t=e.eles,n=t.nodes(),r=Oe(e.positions);function a(i){if(e.positions==null)return af(i.position());if(r)return e.positions(i);var o=e.positions[i._private.data.id];return o??null}return n.layoutPositions(this,e,function(i,o){var u=a(i);return i.locked()||u==null?!1:u}),this};var Uv={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Ys(e){this.options=ue({},Uv,e)}Ys.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=st(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),a=function(i,o){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}};return n.nodes().layoutPositions(this,e,a),this};var Zv=[{name:"breadthfirst",impl:Rs},{name:"circle",impl:Vs},{name:"concentric",impl:Fs},{name:"cose",impl:la},{name:"grid",impl:qs},{name:"null",impl:oi},{name:"preset",impl:Xs},{name:"random",impl:Ys}];function Hs(e){this.options=e,this.notifications=0}var yo=function(){},bo=function(){throw new Error("A headless instance can not render images")};Hs.prototype={recalculateRenderedStyle:yo,notify:function(){this.notifications++},init:yo,isHeadless:function(){return!0},png:bo,jpg:bo};var si={};si.arrowShapeWidth=.3;si.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,n=function(s,l,c,d,h,p,f){var v=h.x-c/2-f,b=h.x+c/2+f,g=h.y-c/2-f,m=h.y+c/2+f,y=v<=s&&s<=b&&g<=l&&l<=m;return y},r=function(s,l,c,d,h){var p=s*Math.cos(d)-l*Math.sin(d),f=s*Math.sin(d)+l*Math.cos(d),v=p*c,b=f*c,g=v+h.x,m=b+h.y;return{x:g,y:m}},a=function(s,l,c,d){for(var h=[],p=0;p<s.length;p+=2){var f=s[p],v=s[p+1];h.push(r(f,v,l,c,d))}return h},i=function(s){for(var l=[],c=0;c<s.length;c++){var d=s[c];l.push(d.x,d.y)}return l},o=function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").pfValue*2},u=function(s,l){se(l)&&(l=e[l]),e[s]=ue({name:s,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(c,d,h,p,f,v){var b=i(a(this.points,h+2*v,p,f)),g=ot(c,d,b);return g},roughCollide:n,draw:function(c,d,h,p){var f=a(this.points,d,h,p);t.arrowShapeImpl("polygon")(c,f)},spacing:function(c){return 0},gap:o},l)};u("none",{collide:Vr,roughCollide:Vr,draw:Ga,spacing:Ai,gap:Ai}),u("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),u("arrow","triangle"),u("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(s,l,c,d,h){var p=a(this.points,l,c,d),f=this.controlPoint,v=r(f[0],f[1],l,c,d);t.arrowShapeImpl(this.name)(s,p,v)},gap:function(s){return o(s)*.8}}),u("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(s,l,c,d,h,p,f){var v=i(a(this.points,c+2*f,d,h)),b=i(a(this.pointsTee,c+2*f,d,h)),g=ot(s,l,v)||ot(s,l,b);return g},draw:function(s,l,c,d,h){var p=a(this.points,l,c,d),f=a(this.pointsTee,l,c,d);t.arrowShapeImpl(this.name)(s,p,f)}}),u("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(s,l,c,d,h,p,f){var v=h,b=Math.pow(v.x-s,2)+Math.pow(v.y-l,2)<=Math.pow((c+2*f)*this.radius,2),g=i(a(this.points,c+2*f,d,h));return ot(s,l,g)||b},draw:function(s,l,c,d,h){var p=a(this.pointsTr,l,c,d);t.arrowShapeImpl(this.name)(s,p,d.x,d.y,this.radius*l)},spacing:function(s){return t.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),u("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(s,l){var c=this.baseCrossLinePts.slice(),d=l/s,h=3,p=5;return c[h]=c[h]-d,c[p]=c[p]-d,c},collide:function(s,l,c,d,h,p,f){var v=i(a(this.points,c+2*f,d,h)),b=i(a(this.crossLinePts(c,p),c+2*f,d,h)),g=ot(s,l,v)||ot(s,l,b);return g},draw:function(s,l,c,d,h){var p=a(this.points,l,c,d),f=a(this.crossLinePts(l,h),l,c,d);t.arrowShapeImpl(this.name)(s,p,f)}}),u("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(s){return o(s)*.525}}),u("circle",{radius:.15,collide:function(s,l,c,d,h,p,f){var v=h,b=Math.pow(v.x-s,2)+Math.pow(v.y-l,2)<=Math.pow((c+2*f)*this.radius,2);return b},draw:function(s,l,c,d,h){t.arrowShapeImpl(this.name)(s,d.x,d.y,this.radius*l)},spacing:function(s){return t.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),u("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(s){return 1},gap:function(s){return 1}}),u("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),u("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}}),u("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(s){return .95*s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}})};var an={};an.projectIntoViewport=function(e,t){var n=this.cy,r=this.findContainerClientCoords(),a=r[0],i=r[1],o=r[4],u=n.pan(),s=n.zoom(),l=((e-a)/o-u.x)/s,c=((t-i)/o-u.y)/s;return[l,c]};an.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=Ie.getComputedStyle(e),r=function(b){return parseFloat(n.getPropertyValue(b))},a={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},i={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},o=e.clientWidth,u=e.clientHeight,s=a.left+a.right,l=a.top+a.bottom,c=i.left+i.right,d=t.width/(o+c),h=o-s,p=u-l,f=t.left+a.left+i.left,v=t.top+a.top+i.top;return this.containerBB=[f,v,h,p,d]};an.invalidateContainerClientCoordsCache=function(){this.containerBB=null};an.findNearestElement=function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]};an.findNearestElements=function(e,t,n,r){var a=this,i=this,o=i.getCachedZSortedEles(),u=[],s=i.cy.zoom(),l=i.cy.hasCompoundNodes(),c=(r?24:8)/s,d=(r?8:2)/s,h=(r?8:2)/s,p=1/0,f,v;n&&(o=o.interactive);function b(x,C){if(x.isNode()){if(v)return;v=x,u.push(x)}if(x.isEdge()&&(C==null||C<p))if(f){if(f.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value&&f.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value){for(var D=0;D<u.length;D++)if(u[D].isEdge()){u[D]=x,f=x,p=C??p;break}}}else u.push(x),f=x,p=C??p}function g(x){var C=x.outerWidth()+2*d,D=x.outerHeight()+2*d,P=C/2,M=D/2,T=x.position();if(T.x-P<=e&&e<=T.x+P&&T.y-M<=t&&t<=T.y+M){var B=i.nodeShapes[a.getNodeShape(x)];if(B.checkPoint(e,t,0,C,D,T.x,T.y))return b(x,0),!0}}function m(x){var C=x._private,D=C.rscratch,P=x.pstyle("width").pfValue,M=x.pstyle("arrow-scale").value,T=P/2+c,B=T*T,S=T*2,A=C.source,N=C.target,O;if(D.edgeType==="segments"||D.edgeType==="straight"||D.edgeType==="haystack"){for(var I=D.allpts,z=0;z+3<I.length;z+=2)if(yf(e,t,I[z],I[z+1],I[z+2],I[z+3],S)&&B>(O=kf(e,t,I[z],I[z+1],I[z+2],I[z+3])))return b(x,O),!0}else if(D.edgeType==="bezier"||D.edgeType==="multibezier"||D.edgeType==="self"||D.edgeType==="compound"){for(var I=D.allpts,z=0;z+5<D.allpts.length;z+=4)if(bf(e,t,I[z],I[z+1],I[z+2],I[z+3],I[z+4],I[z+5],S)&&B>(O=Ef(e,t,I[z],I[z+1],I[z+2],I[z+3],I[z+4],I[z+5])))return b(x,O),!0}for(var A=A||C.source,N=N||C.target,Y=a.getArrowWidth(P,M),V=[{name:"source",x:D.arrowStartX,y:D.arrowStartY,angle:D.srcArrowAngle},{name:"target",x:D.arrowEndX,y:D.arrowEndY,angle:D.tgtArrowAngle},{name:"mid-source",x:D.midX,y:D.midY,angle:D.midsrcArrowAngle},{name:"mid-target",x:D.midX,y:D.midY,angle:D.midtgtArrowAngle}],z=0;z<V.length;z++){var H=V[z],j=i.arrowShapes[x.pstyle(H.name+"-arrow-shape").value],W=x.pstyle("width").pfValue;if(j.roughCollide(e,t,Y,H.angle,{x:H.x,y:H.y},W,c)&&j.collide(e,t,Y,H.angle,{x:H.x,y:H.y},W,c))return b(x),!0}l&&u.length>0&&(g(A),g(N))}function y(x,C,D){return yt(x,C,D)}function w(x,C){var D=x._private,P=h,M;C?M=C+"-":M="",x.boundingBox();var T=D.labelBounds[C||"main"],B=x.pstyle(M+"label").value,S=x.pstyle("text-events").strValue==="yes";if(!(!S||!B)){var A=y(D.rscratch,"labelX",C),N=y(D.rscratch,"labelY",C),O=y(D.rscratch,"labelAngle",C),I=x.pstyle(M+"text-margin-x").pfValue,z=x.pstyle(M+"text-margin-y").pfValue,Y=T.x1-P-I,V=T.x2+P-I,H=T.y1-P-z,j=T.y2+P-z;if(O){var W=Math.cos(O),ee=Math.sin(O),L=function(ve,me){return ve=ve-A,me=me-N,{x:ve*W-me*ee+A,y:ve*ee+me*W+N}},F=L(Y,H),U=L(Y,j),Q=L(V,H),$=L(V,j),le=[F.x+I,F.y+z,Q.x+I,Q.y+z,$.x+I,$.y+z,U.x+I,U.y+z];if(ot(e,t,le))return b(x),!0}else if(xn(T,e,t))return b(x),!0}}for(var _=o.length-1;_>=0;_--){var k=o[_];k.isNode()?g(k)||w(k):m(k)||w(k)||w(k,"source")||w(k,"target")}return u};an.getAllInBox=function(e,t,n,r){var a=this.getCachedZSortedEles().interactive,i=[],o=Math.min(e,n),u=Math.max(e,n),s=Math.min(t,r),l=Math.max(t,r);e=o,n=u,t=s,r=l;for(var c=st({x1:e,y1:t,x2:n,y2:r}),d=0;d<a.length;d++){var h=a[d];if(h.isNode()){var p=h,f=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Qa(c,f)&&!is(f,c)&&i.push(p)}else{var v=h,b=v._private,g=b.rscratch;if(g.startX!=null&&g.startY!=null&&!xn(c,g.startX,g.startY)||g.endX!=null&&g.endY!=null&&!xn(c,g.endX,g.endY))continue;if(g.edgeType==="bezier"||g.edgeType==="multibezier"||g.edgeType==="self"||g.edgeType==="compound"||g.edgeType==="segments"||g.edgeType==="haystack"){for(var m=b.rstyle.bezierPts||b.rstyle.linePts||b.rstyle.haystackPts,y=!0,w=0;w<m.length;w++)if(!mf(c,m[w])){y=!1;break}y&&i.push(v)}else(g.edgeType==="haystack"||g.edgeType==="straight")&&i.push(v)}}return i};var Yr={};Yr.calculateArrowAngles=function(e){var t=e._private.rscratch,n=t.edgeType==="haystack",r=t.edgeType==="bezier",a=t.edgeType==="multibezier",i=t.edgeType==="segments",o=t.edgeType==="compound",u=t.edgeType==="self",s,l,c,d,h,p,g,m;if(n?(c=t.haystackPts[0],d=t.haystackPts[1],h=t.haystackPts[2],p=t.haystackPts[3]):(c=t.arrowStartX,d=t.arrowStartY,h=t.arrowEndX,p=t.arrowEndY),g=t.midX,m=t.midY,i)s=c-t.segpts[0],l=d-t.segpts[1];else if(a||o||u||r){var f=t.allpts,v=je(f[0],f[2],f[4],.1),b=je(f[1],f[3],f[5],.1);s=c-v,l=d-b}else s=c-g,l=d-m;t.srcArrowAngle=xr(s,l);var g=t.midX,m=t.midY;if(n&&(g=(c+h)/2,m=(d+p)/2),s=h-c,l=p-d,i){var f=t.allpts;if(f.length/2%2===0){var y=f.length/2,w=y-2;s=f[y]-f[w],l=f[y+1]-f[w+1]}else{var y=f.length/2-1,w=y-2,_=y+2;s=f[y]-f[w],l=f[y+1]-f[w+1]}}else if(a||o||u){var f=t.allpts,k=t.ctrlpts,x,C,D,P;if(k.length/2%2===0){var M=f.length/2-1,T=M+2,B=T+2;x=je(f[M],f[T],f[B],0),C=je(f[M+1],f[T+1],f[B+1],0),D=je(f[M],f[T],f[B],1e-4),P=je(f[M+1],f[T+1],f[B+1],1e-4)}else{var T=f.length/2-1,M=T-2,B=T+2;x=je(f[M],f[T],f[B],.4999),C=je(f[M+1],f[T+1],f[B+1],.4999),D=je(f[M],f[T],f[B],.5),P=je(f[M+1],f[T+1],f[B+1],.5)}s=D-x,l=P-C}if(t.midtgtArrowAngle=xr(s,l),t.midDispX=s,t.midDispY=l,s*=-1,l*=-1,i){var f=t.allpts;if(f.length/2%2!==0){var y=f.length/2-1,_=y+2;s=-(f[_]-f[y]),l=-(f[_+1]-f[y+1])}}if(t.midsrcArrowAngle=xr(s,l),i)s=h-t.segpts[t.segpts.length-2],l=p-t.segpts[t.segpts.length-1];else if(a||o||u||r){var f=t.allpts,S=f.length,v=je(f[S-6],f[S-4],f[S-2],.9),b=je(f[S-5],f[S-3],f[S-1],.9);s=h-v,l=p-b}else s=h-g,l=p-m;t.tgtArrowAngle=xr(s,l)};Yr.getArrowWidth=Yr.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r||(r=Math.max(Math.pow(e*13.37,.9),29)*t,n[e+", "+t]=r,r)};var nt={};nt.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n._private,a=r.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=r.source,u=r.target,s=o.position(),l=u.position(),c=o.width(),d=u.width(),h=o.height(),p=u.height(),f=n.pstyle("haystack-radius").value,v=f/2;a.haystackPts=a.allpts=[a.source.x*c*v+s.x,a.source.y*h*v+s.y,a.target.x*d*v+l.x,a.target.y*p*v+l.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}};nt.findSegmentsPoints=function(e,t){var n=e._private.rscratch,r=t.posPts,a=t.intersectionPts,i=t.vectorNormInverse,o=e.pstyle("edge-distances").value,u=e.pstyle("segment-weights"),s=e.pstyle("segment-distances"),l=Math.min(u.pfValue.length,s.pfValue.length);n.edgeType="segments",n.segpts=[];for(var c=0;c<l;c++){var d=u.pfValue[c],h=s.pfValue[c],p=1-d,f=d,v=o==="node-position"?r:a,b={x:v.x1*p+v.x2*f,y:v.y1*p+v.y2*f};n.segpts.push(b.x+i.x*h,b.y+i.y*h)}};nt.findLoopPoints=function(e,t,n,r){var a=e._private.rscratch,i=t.dirCounts,o=t.srcPos,u=e.pstyle("control-point-distances"),s=u?u.pfValue[0]:void 0,l=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,d=e.pstyle("control-point-step-size").pfValue;a.edgeType="self";var h=n,p=d;r&&(h=0,p=s);var f=l-Math.PI/2,v=f-c/2,b=f+c/2,g=String(l+"_"+c);h=i[g]===void 0?i[g]=0:++i[g],a.ctrlpts=[o.x+Math.cos(v)*1.4*p*(h/3+1),o.y+Math.sin(v)*1.4*p*(h/3+1),o.x+Math.cos(b)*1.4*p*(h/3+1),o.y+Math.sin(b)*1.4*p*(h/3+1)]};nt.findCompoundLoopPoints=function(e,t,n,r){var a=e._private.rscratch;a.edgeType="compound";var i=t.srcPos,o=t.tgtPos,u=t.srcW,s=t.srcH,l=t.tgtW,c=t.tgtH,d=e.pstyle("control-point-step-size").pfValue,h=e.pstyle("control-point-distances"),p=h?h.pfValue[0]:void 0,f=n,v=d;r&&(f=0,v=p);var b=50,g={x:i.x-u/2,y:i.y-s/2},m={x:o.x-l/2,y:o.y-c/2},y={x:Math.min(g.x,m.x),y:Math.min(g.y,m.y)},w=.5,_=Math.max(w,Math.log(u*.01)),k=Math.max(w,Math.log(l*.01));a.ctrlpts=[y.x,y.y-(1+Math.pow(b,1.12)/100)*v*(f/3+1)*_,y.x-(1+Math.pow(b,1.12)/100)*v*(f/3+1)*k,y.y]};nt.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"};nt.findBezierPoints=function(e,t,n,r,a){var i=e._private.rscratch,o=t.vectorNormInverse,u=t.posPts,s=t.intersectionPts,l=e.pstyle("edge-distances").value,c=e.pstyle("control-point-step-size").pfValue,d=e.pstyle("control-point-distances"),h=e.pstyle("control-point-weights"),p=d&&h?Math.min(d.value.length,h.value.length):1,f=d?d.pfValue[0]:void 0,v=h.value[0],b=r;i.edgeType=b?"multibezier":"bezier",i.ctrlpts=[];for(var g=0;g<p;g++){var m=(.5-t.eles.length/2+n)*c*(a?-1:1),y=void 0,w=as(m);b&&(f=d?d.pfValue[g]:c,v=h.value[g]),r?y=f:y=f!==void 0?w*f:void 0;var _=y!==void 0?y:m,k=1-v,x=v,C=l==="node-position"?u:s,D={x:C.x1*k+C.x2*x,y:C.y1*k+C.y2*x};i.ctrlpts.push(D.x+o.x*_,D.y+o.y*_)}};nt.findTaxiPoints=function(e,t){var n=e._private.rscratch;n.edgeType="segments";var r="vertical",a="horizontal",i="leftward",o="rightward",u="downward",s="upward",l="auto",c=t.posPts,d=t.srcW,h=t.srcH,p=t.tgtW,f=t.tgtH,v=e.pstyle("edge-distances").value,b=v!=="node-position",g=e.pstyle("taxi-direction").value,m=g,y=e.pstyle("taxi-turn"),w=y.units==="%",_=y.pfValue,k=_<0,x=e.pstyle("taxi-turn-min-distance").pfValue,C=b?(d+p)/2:0,D=b?(h+f)/2:0,P=c.x2-c.x1,M=c.y2-c.y1,T=function(ie,be){return ie>0?Math.max(ie-be,0):Math.min(ie+be,0)},B=T(P,C),S=T(M,D),A=!1;m===l?g=Math.abs(B)>Math.abs(S)?a:r:m===s||m===u?(g=r,A=!0):(m===i||m===o)&&(g=a,A=!0);var N=g===r,O=N?S:B,I=N?M:P,z=as(I),Y=!1;!(A&&(w||k))&&(m===u&&I<0||m===s&&I>0||m===i&&I>0||m===o&&I<0)&&(z*=-1,O=z*Math.abs(O),Y=!0);var V;if(w){var H=_<0?1+_:_;V=H*O}else{var j=_<0?O:0;V=j+_*z}var W=function(ie){return Math.abs(ie)<x||Math.abs(ie)>=Math.abs(O)},ee=W(V),L=W(Math.abs(O)-Math.abs(V)),F=ee||L;if(F&&!Y)if(N){var U=Math.abs(I)<=h/2,Q=Math.abs(P)<=p/2;if(U){var $=(c.x1+c.x2)/2,le=c.y1,ve=c.y2;n.segpts=[$,le,$,ve]}else if(Q){var me=(c.y1+c.y2)/2,K=c.x1,ae=c.x2;n.segpts=[K,me,ae,me]}else n.segpts=[c.x1,c.y2]}else{var te=Math.abs(I)<=d/2,ne=Math.abs(M)<=f/2;if(te){var oe=(c.y1+c.y2)/2,de=c.x1,fe=c.x2;n.segpts=[de,oe,fe,oe]}else if(ne){var ce=(c.x1+c.x2)/2,xe=c.y1,E=c.y2;n.segpts=[ce,xe,ce,E]}else n.segpts=[c.x2,c.y1]}else if(N){var R=c.y1+V+(b?h/2*z:0),Z=c.x1,X=c.x2;n.segpts=[Z,R,X,R]}else{var q=c.x1+V+(b?d/2*z:0),he=c.y1,G=c.y2;n.segpts=[q,he,q,G]}};nt.tryToCorrectInvalidPoints=function(e,t){var n=e._private.rscratch;if(n.edgeType==="bezier"){var r=t.srcPos,a=t.tgtPos,i=t.srcW,o=t.srcH,u=t.tgtW,s=t.tgtH,l=t.srcShape,c=t.tgtShape,d=!J(n.startX)||!J(n.startY),h=!J(n.arrowStartX)||!J(n.arrowStartY),p=!J(n.endX)||!J(n.endY),f=!J(n.arrowEndX)||!J(n.arrowEndY),v=3,b=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth,g=v*b,m=Jt({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),y=m<g,w=Jt({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),_=w<g,k=!1;if(d||h||y){k=!0;var x={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},C=Math.sqrt(x.x*x.x+x.y*x.y),D={x:x.x/C,y:x.y/C},P=Math.max(i,o),M={x:n.ctrlpts[0]+D.x*2*P,y:n.ctrlpts[1]+D.y*2*P},T=l.intersectLine(r.x,r.y,i,o,M.x,M.y,0);y?(n.ctrlpts[0]=n.ctrlpts[0]+D.x*(g-m),n.ctrlpts[1]=n.ctrlpts[1]+D.y*(g-m)):(n.ctrlpts[0]=T[0]+D.x*g,n.ctrlpts[1]=T[1]+D.y*g)}if(p||f||_){k=!0;var B={x:n.ctrlpts[0]-a.x,y:n.ctrlpts[1]-a.y},S=Math.sqrt(B.x*B.x+B.y*B.y),A={x:B.x/S,y:B.y/S},N=Math.max(i,o),O={x:n.ctrlpts[0]+A.x*2*N,y:n.ctrlpts[1]+A.y*2*N},I=c.intersectLine(a.x,a.y,u,s,O.x,O.y,0);_?(n.ctrlpts[0]=n.ctrlpts[0]+A.x*(g-w),n.ctrlpts[1]=n.ctrlpts[1]+A.y*(g-w)):(n.ctrlpts[0]=I[0]+A.x*g,n.ctrlpts[1]=I[1]+A.y*g)}k&&this.findEndpoints(e)}};nt.storeAllpts=function(e){var t=e._private.rscratch;if(t.edgeType==="multibezier"||t.edgeType==="bezier"||t.edgeType==="self"||t.edgeType==="compound"){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n=0;n+1<t.ctrlpts.length;n+=2)t.allpts.push(t.ctrlpts[n],t.ctrlpts[n+1]),n+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[n]+t.ctrlpts[n+2])/2,(t.ctrlpts[n+1]+t.ctrlpts[n+3])/2);t.allpts.push(t.endX,t.endY);var r,a;t.ctrlpts.length/2%2===0?(r=t.allpts.length/2-1,t.midX=t.allpts[r],t.midY=t.allpts[r+1]):(r=t.allpts.length/2-3,a=.5,t.midX=je(t.allpts[r],t.allpts[r+2],t.allpts[r+4],a),t.midY=je(t.allpts[r+1],t.allpts[r+3],t.allpts[r+5],a))}else if(t.edgeType==="straight")t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if(t.edgeType==="segments")if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.segpts.length%4===0){var i=t.segpts.length/2,o=i-2;t.midX=(t.segpts[o]+t.segpts[i])/2,t.midY=(t.segpts[o+1]+t.segpts[i+1])/2}else{var u=t.segpts.length/2-1;t.midX=t.segpts[u],t.midY=t.segpts[u+1]}};nt.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||J(t.startX)&&J(t.startY)&&J(t.endX)&&J(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,_e("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};nt.findEdgeControlPoints=function(e){var t=this;if(!(!e||e.length===0)){for(var n=this,r=n.cy,a=r.hasCompoundNodes(),i={map:new wt,get:function(k){var x=this.map.get(k[0]);return x!=null?x.get(k[1]):null},set:function(k,x){var C=this.map.get(k[0]);C==null&&(C=new wt,this.map.set(k[0],C)),C.set(k[1],x)}},o=[],u=[],s=0;s<e.length;s++){var l=e[s],c=l._private,d=l.pstyle("curve-style").value;if(!(l.removed()||!l.takesUpSpace())){if(d==="haystack"){u.push(l);continue}var h=d==="unbundled-bezier"||d==="segments"||d==="straight"||d==="straight-triangle"||d==="taxi",p=d==="unbundled-bezier"||d==="bezier",f=c.source,v=c.target,b=f.poolIndex(),g=v.poolIndex(),m=[b,g].sort(),y=i.get(m);y==null&&(y={eles:[]},i.set(m,y),o.push(m)),y.eles.push(l),h&&(y.hasUnbundled=!0),p&&(y.hasBezier=!0)}}for(var w=function(k){var x=o[k],C=i.get(x),D=void 0;if(!C.hasUnbundled){var P=C.eles[0].parallelEdges().filter(function(xe){return xe.isBundledBezier()});Ka(C.eles),P.forEach(function(xe){return C.eles.push(xe)}),C.eles.sort(function(xe,E){return xe.poolIndex()-E.poolIndex()})}var M=C.eles[0],T=M.source(),B=M.target();if(T.poolIndex()>B.poolIndex()){var S=T;T=B,B=S}var A=C.srcPos=T.position(),N=C.tgtPos=B.position(),O=C.srcW=T.outerWidth(),I=C.srcH=T.outerHeight(),z=C.tgtW=B.outerWidth(),Y=C.tgtH=B.outerHeight(),V=C.srcShape=n.nodeShapes[t.getNodeShape(T)],H=C.tgtShape=n.nodeShapes[t.getNodeShape(B)];C.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var j=0;j<C.eles.length;j++){var W=C.eles[j],ee=W[0]._private.rscratch,L=W.pstyle("curve-style").value,F=L==="unbundled-bezier"||L==="segments"||L==="taxi",U=!T.same(W.source());if(!C.calculatedIntersection&&T!==B&&(C.hasBezier||C.hasUnbundled)){C.calculatedIntersection=!0;var Q=V.intersectLine(A.x,A.y,O,I,N.x,N.y,0),$=C.srcIntn=Q,le=H.intersectLine(N.x,N.y,z,Y,A.x,A.y,0),ve=C.tgtIntn=le,me=C.intersectionPts={x1:Q[0],x2:le[0],y1:Q[1],y2:le[1]},K=C.posPts={x1:A.x,x2:N.x,y1:A.y,y2:N.y},ae=le[1]-Q[1],te=le[0]-Q[0],ne=Math.sqrt(te*te+ae*ae),oe=C.vector={x:te,y:ae},de=C.vectorNorm={x:oe.x/ne,y:oe.y/ne},fe={x:-de.y,y:de.x};C.nodesOverlap=!J(ne)||H.checkPoint(Q[0],Q[1],0,z,Y,N.x,N.y)||V.checkPoint(le[0],le[1],0,O,I,A.x,A.y),C.vectorNormInverse=fe,D={nodesOverlap:C.nodesOverlap,dirCounts:C.dirCounts,calculatedIntersection:!0,hasBezier:C.hasBezier,hasUnbundled:C.hasUnbundled,eles:C.eles,srcPos:N,tgtPos:A,srcW:z,srcH:Y,tgtW:O,tgtH:I,srcIntn:ve,tgtIntn:$,srcShape:H,tgtShape:V,posPts:{x1:K.x2,y1:K.y2,x2:K.x1,y2:K.y1},intersectionPts:{x1:me.x2,y1:me.y2,x2:me.x1,y2:me.y1},vector:{x:-oe.x,y:-oe.y},vectorNorm:{x:-de.x,y:-de.y},vectorNormInverse:{x:-fe.x,y:-fe.y}}}var ce=U?D:C;ee.nodesOverlap=ce.nodesOverlap,ee.srcIntn=ce.srcIntn,ee.tgtIntn=ce.tgtIntn,a&&(T.isParent()||T.isChild()||B.isParent()||B.isChild())&&(T.parents().anySame(B)||B.parents().anySame(T)||T.same(B)&&T.isParent())?t.findCompoundLoopPoints(W,ce,j,F):T===B?t.findLoopPoints(W,ce,j,F):L==="segments"?t.findSegmentsPoints(W,ce):L==="taxi"?t.findTaxiPoints(W,ce):L==="straight"||!F&&C.eles.length%2===1&&j===Math.floor(C.eles.length/2)?t.findStraightEdgePoints(W):t.findBezierPoints(W,ce,j,F,U),t.findEndpoints(W),t.tryToCorrectInvalidPoints(W,ce),t.checkForInvalidEdgeWarning(W),t.storeAllpts(W),t.storeEdgeProjections(W),t.calculateArrowAngles(W),t.recalculateEdgeLabelProjections(W),t.calculateLabelAngles(W)}},_=0;_<o.length;_++)w(_);this.findHaystackPoints(u)}};function Ws(e){var t=[];if(e!=null){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];t.push({x:r,y:a})}return t}}nt.getSegmentPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if(n==="segments")return this.recalculateRenderedStyle(e),Ws(t.segpts)};nt.getControlPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if(n==="bezier"||n==="multibezier"||n==="self"||n==="compound")return this.recalculateRenderedStyle(e),Ws(t.ctrlpts)};nt.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var hr={};hr.manualEndptToPx=function(e,t){var n=this,r=e.position(),a=e.outerWidth(),i=e.outerHeight();if(t.value.length===2){var o=[t.pfValue[0],t.pfValue[1]];return t.units[0]==="%"&&(o[0]=o[0]*a),t.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=r.x,o[1]+=r.y,o}else{var u=t.pfValue[0];u=-Math.PI/2+u;var s=2*Math.max(a,i),l=[r.x+Math.cos(u)*s,r.y+Math.sin(u)*s];return n.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,a,i,l[0],l[1],0)}};hr.findEndpoints=function(e){var t=this,n,r=e.source()[0],a=e.target()[0],i=r.position(),o=a.position(),u=e.pstyle("target-arrow-shape").value,s=e.pstyle("source-arrow-shape").value,l=e.pstyle("target-distance-from-node").pfValue,c=e.pstyle("source-distance-from-node").pfValue,d=e.pstyle("curve-style").value,h=e._private.rscratch,p=h.edgeType,f=d==="taxi",v=p==="self"||p==="compound",b=p==="bezier"||p==="multibezier"||v,g=p!=="bezier",m=p==="straight"||p==="segments",y=p==="segments",w=b||g||m,_=v||f,k=e.pstyle("source-endpoint"),x=_?"outside-to-node":k.value,C=e.pstyle("target-endpoint"),D=_?"outside-to-node":C.value;h.srcManEndpt=k,h.tgtManEndpt=C;var P,M,T,B;if(b){var S=[h.ctrlpts[0],h.ctrlpts[1]],A=g?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:S;P=A,M=S}else if(m){var N=y?h.segpts.slice(0,2):[o.x,o.y],O=y?h.segpts.slice(h.segpts.length-2):[i.x,i.y];P=O,M=N}if(D==="inside-to-node")n=[o.x,o.y];else if(C.units)n=this.manualEndptToPx(a,C);else if(D==="outside-to-line")n=h.tgtIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?T=P:(D==="outside-to-line"||D==="outside-to-line-or-label")&&(T=[i.x,i.y]),n=t.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),T[0],T[1],0),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var I=a._private.rscratch,z=I.labelWidth,Y=I.labelHeight,V=I.labelX,H=I.labelY,j=z/2,W=Y/2,ee=a.pstyle("text-valign").value;ee==="top"?H-=W:ee==="bottom"&&(H+=W);var L=a.pstyle("text-halign").value;L==="left"?V-=j:L==="right"&&(V+=j);var F=Qn(T[0],T[1],[V-j,H-W,V+j,H-W,V+j,H+W,V-j,H+W],o.x,o.y);if(F.length>0){var U=i,Q=Gt(U,fn(n)),$=Gt(U,fn(F)),le=Q;if($<Q&&(n=F,le=$),F.length>2){var ve=Gt(U,{x:F[2],y:F[3]});ve<le&&(n=[F[2],F[3]])}}}var me=wr(n,P,t.arrowShapes[u].spacing(e)+l),K=wr(n,P,t.arrowShapes[u].gap(e)+l);if(h.endX=K[0],h.endY=K[1],h.arrowEndX=me[0],h.arrowEndY=me[1],x==="inside-to-node")n=[i.x,i.y];else if(k.units)n=this.manualEndptToPx(r,k);else if(x==="outside-to-line")n=h.srcIntn;else if(x==="outside-to-node"||x==="outside-to-node-or-label"?B=M:(x==="outside-to-line"||x==="outside-to-line-or-label")&&(B=[o.x,o.y]),n=t.nodeShapes[this.getNodeShape(r)].intersectLine(i.x,i.y,r.outerWidth(),r.outerHeight(),B[0],B[1],0),x==="outside-to-node-or-label"||x==="outside-to-line-or-label"){var ae=r._private.rscratch,te=ae.labelWidth,ne=ae.labelHeight,oe=ae.labelX,de=ae.labelY,fe=te/2,ce=ne/2,xe=r.pstyle("text-valign").value;xe==="top"?de-=ce:xe==="bottom"&&(de+=ce);var E=r.pstyle("text-halign").value;E==="left"?oe-=fe:E==="right"&&(oe+=fe);var R=Qn(B[0],B[1],[oe-fe,de-ce,oe+fe,de-ce,oe+fe,de+ce,oe-fe,de+ce],i.x,i.y);if(R.length>0){var Z=o,X=Gt(Z,fn(n)),q=Gt(Z,fn(R)),he=X;if(q<X&&(n=[R[0],R[1]],he=q),R.length>2){var G=Gt(Z,{x:R[2],y:R[3]});G<he&&(n=[R[2],R[3]])}}}var ie=wr(n,M,t.arrowShapes[s].spacing(e)+c),be=wr(n,M,t.arrowShapes[s].gap(e)+c);h.startX=be[0],h.startY=be[1],h.arrowStartX=ie[0],h.arrowStartY=ie[1],w&&(!J(h.startX)||!J(h.startY)||!J(h.endX)||!J(h.endY)?h.badLine=!0:h.badLine=!1)};hr.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}};hr.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}};var li={};function Gv(e,t,n){for(var r=function(s,l,c,d){return je(s,l,c,d)},a=t._private,i=a.rstyle.bezierPts,o=0;o<e.bezierProjPcts.length;o++){var u=e.bezierProjPcts[o];i.push({x:r(n[0],n[2],n[4],u),y:r(n[1],n[3],n[5],u)})}}li.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,r=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,r==="multibezier"||r==="bezier"||r==="self"||r==="compound"){t.rstyle.bezierPts=[];for(var a=0;a+5<n.allpts.length;a+=4)Gv(this,e,n.allpts.slice(a,a+6))}else if(r==="segments")for(var i=t.rstyle.linePts=[],a=0;a+1<n.allpts.length;a+=2)i.push({x:n.allpts[a],y:n.allpts[a+1]});else if(r==="haystack"){var o=n.haystackPts;t.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth};li.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var kt={};kt.recalculateNodeLabelProjection=function(e){var t=e.pstyle("label").strValue;if(!Ft(t)){var n,r,a=e._private,i=e.width(),o=e.height(),u=e.padding(),s=e.position(),l=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,d=a.rscratch,h=a.rstyle;switch(l){case"left":n=s.x-i/2-u;break;case"right":n=s.x+i/2+u;break;default:n=s.x}switch(c){case"top":r=s.y-o/2-u;break;case"bottom":r=s.y+o/2+u;break;default:r=s.y}d.labelX=n,d.labelY=r,h.labelX=n,h.labelY=r,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}};var Us=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},Zs=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Us(n,r)},Kv=function(e,t,n,r){var a=$n(0,r-.001,1),i=$n(0,r+.001,1),o=vn(e,t,n,a),u=vn(e,t,n,i);return Zs(o,u)};kt.recalculateEdgeLabelProjections=function(e){var t,n=e._private,r=n.rscratch,a=this,i={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(i.mid||i.source||i.target){t={x:r.midX,y:r.midY};var o=function(c,d,h){zt(n.rscratch,c,d,h),zt(n.rstyle,c,d,h)};o("labelX",null,t.x),o("labelY",null,t.y);var u=Us(r.midDispX,r.midDispY);o("labelAutoAngle",null,u);var s=function c(){if(c.cache)return c.cache;for(var d=[],h=0;h+5<r.allpts.length;h+=4){var p={x:r.allpts[h],y:r.allpts[h+1]},f={x:r.allpts[h+2],y:r.allpts[h+3]},v={x:r.allpts[h+4],y:r.allpts[h+5]};d.push({p0:p,p1:f,p2:v,startDist:0,length:0,segments:[]})}var b=n.rstyle.bezierPts,g=a.bezierProjPcts.length;function m(x,C,D,P,M){var T=Jt(C,D),B=x.segments[x.segments.length-1],S={p0:C,p1:D,t0:P,t1:M,startDist:B?B.startDist+B.length:0,length:T};x.segments.push(S),x.length+=T}for(var y=0;y<d.length;y++){var w=d[y],_=d[y-1];_&&(w.startDist=_.startDist+_.length),m(w,w.p0,b[y*g],0,a.bezierProjPcts[0]);for(var k=0;k<g-1;k++)m(w,b[y*g+k],b[y*g+k+1],a.bezierProjPcts[k],a.bezierProjPcts[k+1]);m(w,b[y*g+g-1],w.p2,a.bezierProjPcts[g-1],1)}return c.cache=d},l=function(c){var d,h=c==="source";if(i[c]){var p=e.pstyle(c+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var f=s(),v,b=0,g=0,m=0;m<f.length;m++){for(var y=f[h?m:f.length-1-m],w=0;w<y.segments.length;w++){var _=y.segments[h?w:y.segments.length-1-w],k=m===f.length-1&&w===y.segments.length-1;if(b=g,g+=_.length,g>=p||k){v={cp:y,segment:_};break}}if(v)break}var x=v.cp,C=v.segment,D=(p-b)/C.length,P=C.t1-C.t0,M=h?C.t0+P*D:C.t1-P*D;M=$n(0,M,1),t=vn(x.p0,x.p1,x.p2,M),d=Kv(x.p0,x.p1,x.p2,M);break}case"straight":case"segments":case"haystack":{for(var T=0,B,S,A,N,O=r.allpts.length,I=0;I+3<O&&(h?(A={x:r.allpts[I],y:r.allpts[I+1]},N={x:r.allpts[I+2],y:r.allpts[I+3]}):(A={x:r.allpts[O-2-I],y:r.allpts[O-1-I]},N={x:r.allpts[O-4-I],y:r.allpts[O-3-I]}),B=Jt(A,N),S=T,T+=B,!(T>=p));I+=2);var z=p-S,Y=z/B;Y=$n(0,Y,1),t=hf(A,N,Y),d=Zs(A,N);break}}o("labelX",c,t.x),o("labelY",c,t.y),o("labelAutoAngle",c,d)}};l("source"),l("target"),this.applyLabelDimensions(e)}};kt.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))};kt.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),a=this.calculateLabelDimensions(e,r),i=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,u=yt(n.rscratch,"labelWrapCachedLines",t)||[],s=o!=="wrap"?1:Math.max(u.length,1),l=a.height/s,c=l*i,d=a.width,h=a.height+(s-1)*(i-1)*l;zt(n.rstyle,"labelWidth",t,d),zt(n.rscratch,"labelWidth",t,d),zt(n.rstyle,"labelHeight",t,h),zt(n.rscratch,"labelHeight",t,h),zt(n.rscratch,"labelLineHeight",t,c)};kt.getLabelText=function(e,t){var n=e._private,r=t?t+"-":"",a=e.pstyle(r+"label").strValue,i=e.pstyle("text-transform").value,o=function(z,Y){return Y?(zt(n.rscratch,z,t,Y),Y):yt(n.rscratch,z,t)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var u=e.pstyle("text-wrap").value;if(u==="wrap"){var s=o("labelKey");if(s!=null&&o("labelWrapKey")===s)return o("labelWrapCachedText");for(var l="​",c=a.split(`
`),d=e.pstyle("text-max-width").pfValue,h=e.pstyle("text-overflow-wrap").value,p=h==="anywhere",f=[],v=/[\s\u200b]+/,b=p?"":" ",g=0;g<c.length;g++){var m=c[g],y=this.calculateLabelDimensions(e,m),w=y.width;if(p){var _=m.split("").join(l);m=_}if(w>d){for(var k=m.split(v),x="",C=0;C<k.length;C++){var D=k[C],P=x.length===0?D:x+b+D,M=this.calculateLabelDimensions(e,P),T=M.width;T<=d?x+=D+b:(x&&f.push(x),x=D+b)}x.match(/^[\s\u200b]+$/)||f.push(x)}else f.push(m)}o("labelWrapCachedLines",f),a=o("labelWrapCachedText",f.join(`
`)),o("labelWrapKey",s)}else if(u==="ellipsis"){var B=e.pstyle("text-max-width").pfValue,S="",A="…",N=!1;if(this.calculateLabelDimensions(e,a).width<B)return a;for(var O=0;O<a.length;O++){var I=this.calculateLabelDimensions(e,S+a[O]+A).width;if(I>B)break;S+=a[O],O===a.length-1&&(N=!0)}return N||(S+=A),S}return a};kt.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,n=e.pstyle("text-halign").strValue;if(t==="auto")if(e.isNode())switch(n){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return t};kt.calculateLabelDimensions=function(e,t){var n=this,r=Qt(t,e._private.labelDimsKey),a=n.labelDimCache||(n.labelDimCache=[]),i=a[r];if(i!=null)return i;var o=0,u=e.pstyle("font-style").strValue,s=e.pstyle("font-size").pfValue,l=e.pstyle("font-family").strValue,c=e.pstyle("font-weight").strValue,d=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!d){d=this.labelCalcCanvas=document.createElement("canvas"),h=this.labelCalcCanvasContext=d.getContext("2d");var p=d.style;p.position="absolute",p.left="-9999px",p.top="-9999px",p.zIndex="-1",p.visibility="hidden",p.pointerEvents="none"}h.font="".concat(u," ").concat(c," ").concat(s,"px ").concat(l);for(var f=0,v=0,b=t.split(`
`),g=0;g<b.length;g++){var m=b[g],y=h.measureText(m),w=Math.ceil(y.width),_=s;f=Math.max(w,f),v+=_}return f+=o,v+=o,a[r]={width:f,height:v}};kt.calculateLabelAngle=function(e,t){var n=e._private,r=n.rscratch,a=e.isEdge(),i=t?t+"-":"",o=e.pstyle(i+"text-rotation"),u=o.strValue;return u==="none"?0:a&&u==="autorotate"?r.labelAutoAngle:u==="autorotate"?0:o.pfValue};kt.calculateLabelAngles=function(e){var t=this,n=e.isEdge(),r=e._private,a=r.rscratch;a.labelAngle=t.calculateLabelAngle(e),n&&(a.sourceLabelAngle=t.calculateLabelAngle(e,"source"),a.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var Gs={},xo=28,wo=!1;Gs.getNodeShape=function(e){var t=this,n=e.pstyle("shape").value;if(n==="cutrectangle"&&(e.width()<xo||e.height()<xo))return wo||(_e("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),wo=!0),"rectangle";if(e.isParent())return n==="rectangle"||n==="roundrectangle"||n==="round-rectangle"||n==="cutrectangle"||n==="cut-rectangle"||n==="barrel"?n:"rectangle";if(n==="polygon"){var r=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(r).name}return n};var ua={};ua.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),n=this,r=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.merge(i),o)for(var u=0;u<i.length;u++){var s=i[u],l=s._private,c=l.rstyle;c.clean=!1,c.cleanConnected=!1}};n.binder(e).on("bounds.* dirty.*",function(i){var o=i.target;r(o)}).on("style.* background.*",function(i){var o=i.target;r(o,!1)});var a=function(i){if(i){var o=n.onUpdateEleCalcsFns;t.cleanStyle();for(var u=0;u<t.length;u++){var s=t[u],l=s._private.rstyle;s.isNode()&&!l.cleanConnected&&(r(s.connectedEdges()),l.cleanConnected=!0)}if(o)for(var c=0;c<o.length;c++){var d=o[c];d(i,t)}n.recalculateRenderedStyle(t),t=e.collection()}};n.flushRenderedStyleQueue=function(){a(!0)},n.beforeRender(a,n.beforeRenderPriorities.eleCalcs)};ua.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)};ua.recalculateRenderedStyle=function(e,t){var n=function(y){return y._private.rstyle.cleanConnected},r=[],a=[];if(!this.destroyed){t===void 0&&(t=!0);for(var i=0;i<e.length;i++){var o=e[i],u=o._private,s=u.rstyle;o.isEdge()&&(!n(o.source())||!n(o.target()))&&(s.clean=!1),!(t&&s.clean||o.removed())&&o.pstyle("display").value!=="none"&&(u.group==="nodes"?a.push(o):r.push(o),s.clean=!0)}for(var l=0;l<a.length;l++){var c=a[l],d=c._private,h=d.rstyle,p=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=p.x,h.nodeY=p.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var f=0;f<r.length;f++){var v=r[f],b=v._private,g=b.rstyle,m=b.rscratch;g.srcX=m.arrowStartX,g.srcY=m.arrowStartY,g.tgtX=m.arrowEndX,g.tgtY=m.arrowEndY,g.midX=m.midX,g.midY=m.midY,g.labelAngle=m.labelAngle,g.sourceLabelAngle=m.sourceLabelAngle,g.targetLabelAngle=m.targetLabelAngle}}};var ca={};ca.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=e[n],a=r._private.rscratch;r.grabbed()&&!r.isParent()?t.push(r):a.inDragLayer?e.drag.push(r):e.nondrag.push(r)}for(var n=0;n<t.length;n++){var r=t[n];e.drag.push(r)}}};ca.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};ca.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(Os),t.interactive=t.filter(function(n){return n.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};var Ks={};[an,Yr,nt,hr,li,kt,Gs,ua,ca].forEach(function(e){ue(Ks,e)});var $s={};$s.getCachedImage=function(e,t,n){var r=this,a=r.imageCache=r.imageCache||{},i=a[e];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;i=a[e]=a[e]||{};var o=i.image=new Image;o.addEventListener("load",n),o.addEventListener("error",function(){o.error=!0});var u="data:",s=e.substring(0,u.length).toLowerCase()===u;return s||(o.crossOrigin=t),o.src=e,o};var Sn={};Sn.registerBinding=function(e,t,n,r){var a=Array.prototype.slice.apply(arguments,[1]),i=this.binder(e);return i.on.apply(i,a)};Sn.binder=function(e){var t=this,n=e===window||e===document||e===document.body||vp(e);if(t.supportsPassiveEvents==null){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});window.addEventListener("test",null,a)}catch{}t.supportsPassiveEvents=r}var i=function(o,u,s){var l=Array.prototype.slice.call(arguments);return n&&t.supportsPassiveEvents&&(l[2]={capture:s??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:l}),(e.addEventListener||e.on).apply(e,l),this};return{on:i,addEventListener:i,addListener:i,bind:i}};Sn.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()};Sn.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()};Sn.load=function(){var e=this,t=function(E){return E.selected()},n=function(E,R,Z,X){E==null&&(E=e.cy);for(var q=0;q<R.length;q++){var he=R[q];E.emit({originalEvent:Z,type:he,position:X})}},r=function(E){return E.shiftKey||E.metaKey||E.ctrlKey},a=function(E,R){var Z=!0;if(e.cy.hasCompoundNodes()&&E&&E.pannable())for(var X=0;R&&X<R.length;X++){var E=R[X];if(E.isNode()&&E.isParent()&&!E.pannable()){Z=!1;break}}else Z=!0;return Z},i=function(E){E[0]._private.grabbed=!0},o=function(E){E[0]._private.grabbed=!1},u=function(E){E[0]._private.rscratch.inDragLayer=!0},s=function(E){E[0]._private.rscratch.inDragLayer=!1},l=function(E){E[0]._private.rscratch.isGrabTarget=!0},c=function(E){E[0]._private.rscratch.isGrabTarget=!1},d=function(E,R){var Z=R.addToList,X=Z.has(E);!X&&E.grabbable()&&!E.locked()&&(Z.merge(E),i(E))},h=function(E,R){if(E.cy().hasCompoundNodes()&&!(R.inDragLayer==null&&R.addToList==null)){var Z=E.descendants();R.inDragLayer&&(Z.forEach(u),Z.connectedEdges().forEach(u)),R.addToList&&d(Z,R)}},p=function(E,R){R=R||{};var Z=E.cy().hasCompoundNodes();R.inDragLayer&&(E.forEach(u),E.neighborhood().stdFilter(function(X){return!Z||X.isEdge()}).forEach(u)),R.addToList&&E.forEach(function(X){d(X,R)}),h(E,R),b(E,{inDragLayer:R.inDragLayer}),e.updateCachedGrabbedEles()},f=p,v=function(E){E&&(e.getCachedZSortedEles().forEach(function(R){o(R),s(R),c(R)}),e.updateCachedGrabbedEles())},b=function(E,R){if(!(R.inDragLayer==null&&R.addToList==null)&&E.cy().hasCompoundNodes()){var Z=E.ancestors().orphans();if(!Z.same(E)){var X=Z.descendants().spawnSelf().merge(Z).unmerge(E).unmerge(E.descendants()),q=X.connectedEdges();R.inDragLayer&&(q.forEach(u),X.forEach(u)),R.addToList&&X.forEach(function(he){d(he,R)})}}},g=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},m=typeof MutationObserver<"u",y=typeof ResizeObserver<"u";m?(e.removeObserver=new MutationObserver(function(E){for(var R=0;R<E.length;R++){var Z=E[R],X=Z.removedNodes;if(X)for(var q=0;q<X.length;q++){var he=X[q];if(he===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(E){e.destroy()});var w=$r.default(function(){e.cy.resize()},100);m&&(e.styleObserver=new MutationObserver(w),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(window,"resize",w),y&&(e.resizeObserver=new ResizeObserver(w),e.resizeObserver.observe(e.container));var _=function(E,R){for(;E!=null;)R(E),E=E.parentNode},k=function(){e.invalidateContainerClientCoordsCache()};_(e.container,function(E){e.registerBinding(E,"transitionend",k),e.registerBinding(E,"animationend",k),e.registerBinding(E,"scroll",k)}),e.registerBinding(e.container,"contextmenu",function(E){E.preventDefault()});var x=function(){return e.selection[4]!==0},C=function(E){for(var R=e.findContainerClientCoords(),Z=R[0],X=R[1],q=R[2],he=R[3],G=E.touches?E.touches:[E],ie=!1,be=0;be<G.length;be++){var Pe=G[be];if(Z<=Pe.clientX&&Pe.clientX<=Z+q&&X<=Pe.clientY&&Pe.clientY<=X+he){ie=!0;break}}if(!ie)return!1;for(var ye=e.container,De=E.target,ge=De.parentNode,pe=!1;ge;){if(ge===ye){pe=!0;break}ge=ge.parentNode}return!!pe};e.registerBinding(e.container,"mousedown",function(E){if(C(E)){E.preventDefault(),g(),e.hoverData.capture=!0,e.hoverData.which=E.which;var R=e.cy,Z=[E.clientX,E.clientY],X=e.projectIntoViewport(Z[0],Z[1]),q=e.selection,he=e.findNearestElements(X[0],X[1],!0,!1),G=he[0],ie=e.dragData.possibleDragElements;e.hoverData.mdownPos=X,e.hoverData.mdownGPos=Z;var be=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var pe=e.hoverData.down;pe?pe.emit({originalEvent:E,type:"taphold",position:{x:X[0],y:X[1]}}):R.emit({originalEvent:E,type:"taphold",position:{x:X[0],y:X[1]}})}},e.tapholdDuration)};if(E.which==3){e.hoverData.cxtStarted=!0;var Pe={originalEvent:E,type:"cxttapstart",position:{x:X[0],y:X[1]}};G?(G.activate(),G.emit(Pe),e.hoverData.down=G):R.emit(Pe),e.hoverData.downTime=new Date().getTime(),e.hoverData.cxtDragged=!1}else if(E.which==1){G&&G.activate();{if(G!=null&&e.nodeIsGrabbable(G)){var ye=function(pe){return{originalEvent:E,type:pe,position:{x:X[0],y:X[1]}}},De=function(pe){pe.emit(ye("grab"))};if(l(G),!G.selected())ie=e.dragData.possibleDragElements=R.collection(),f(G,{addToList:ie}),G.emit(ye("grabon")).emit(ye("grab"));else{ie=e.dragData.possibleDragElements=R.collection();var ge=R.$(function(pe){return pe.isNode()&&pe.selected()&&e.nodeIsGrabbable(pe)});p(ge,{addToList:ie}),G.emit(ye("grabon")),ge.forEach(De)}e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=G,e.hoverData.downs=he,e.hoverData.downTime=new Date().getTime()}n(G,["mousedown","tapstart","vmousedown"],E,{x:X[0],y:X[1]}),G==null?(q[4]=1,e.data.bgActivePosistion={x:X[0],y:X[1]},e.redrawHint("select",!0),e.redraw()):G.pannable()&&(q[4]=1),be()}q[0]=q[2]=X[0],q[1]=q[3]=X[1]}},!1),e.registerBinding(window,"mousemove",function(E){var R=e.hoverData.capture;if(!(!R&&!C(E))){var Z=!1,X=e.cy,q=X.zoom(),he=[E.clientX,E.clientY],G=e.projectIntoViewport(he[0],he[1]),ie=e.hoverData.mdownPos,be=e.hoverData.mdownGPos,Pe=e.selection,ye=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(ye=e.findNearestElement(G[0],G[1],!0,!1));var De=e.hoverData.last,ge=e.hoverData.down,pe=[G[0]-Pe[2],G[1]-Pe[3]],qe=e.dragData.possibleDragElements,rt;if(be){var pt=he[0]-be[0],ft=pt*pt,Xe=he[1]-be[1],ct=Xe*Xe,Ge=ft+ct;e.hoverData.isOverThresholdDrag=rt=Ge>=e.desktopTapThreshold2}var Ut=r(E);rt&&(e.hoverData.tapholdCancelled=!0);var Bt=function(){var At=e.hoverData.dragDelta=e.hoverData.dragDelta||[];At.length===0?(At.push(pe[0]),At.push(pe[1])):(At[0]+=pe[0],At[1]+=pe[1])};Z=!0,n(ye,["mousemove","vmousemove","tapdrag"],E,{x:G[0],y:G[1]});var Nt=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||X.emit({originalEvent:E,type:"boxstart",position:{x:G[0],y:G[1]}}),Pe[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(e.hoverData.which===3){if(rt){var gr={originalEvent:E,type:"cxtdrag",position:{x:G[0],y:G[1]}};ge?ge.emit(gr):X.emit(gr),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||ye!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:E,type:"cxtdragout",position:{x:G[0],y:G[1]}}),e.hoverData.cxtOver=ye,ye&&ye.emit({originalEvent:E,type:"cxtdragover",position:{x:G[0],y:G[1]}}))}}else if(e.hoverData.dragging){if(Z=!0,X.panningEnabled()&&X.userPanningEnabled()){var sn;if(e.hoverData.justStartedPan){var vr=e.hoverData.mdownPos;sn={x:(G[0]-vr[0])*q,y:(G[1]-vr[1])*q},e.hoverData.justStartedPan=!1}else sn={x:pe[0]*q,y:pe[1]*q};X.panBy(sn),X.emit("dragpan"),e.hoverData.dragged=!0}G=e.projectIntoViewport(E.clientX,E.clientY)}else if(Pe[4]==1&&(ge==null||ge.pannable())){if(rt){if(!e.hoverData.dragging&&X.boxSelectionEnabled()&&(Ut||!X.panningEnabled()||!X.userPanningEnabled()))Nt();else if(!e.hoverData.selecting&&X.panningEnabled()&&X.userPanningEnabled()){var Zt=a(ge,e.hoverData.downs);Zt&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,Pe[4]=0,e.data.bgActivePosistion=fn(ie),e.redrawHint("select",!0),e.redraw())}ge&&ge.pannable()&&ge.active()&&ge.unactivate()}}else{if(ge&&ge.pannable()&&ge.active()&&ge.unactivate(),(!ge||!ge.grabbed())&&ye!=De&&(De&&n(De,["mouseout","tapdragout"],E,{x:G[0],y:G[1]}),ye&&n(ye,["mouseover","tapdragover"],E,{x:G[0],y:G[1]}),e.hoverData.last=ye),ge)if(rt){if(X.boxSelectionEnabled()&&Ut)ge&&ge.grabbed()&&(v(qe),ge.emit("freeon"),qe.emit("free"),e.dragData.didDrag&&(ge.emit("dragfreeon"),qe.emit("dragfree"))),Nt();else if(ge&&ge.grabbed()&&e.nodeIsDraggable(ge)){var at=!e.dragData.didDrag;at&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||p(qe,{inDragLayer:!0});var Ke={x:0,y:0};if(J(pe[0])&&J(pe[1])&&(Ke.x+=pe[0],Ke.y+=pe[1],at)){var it=e.hoverData.dragDelta;it&&J(it[0])&&J(it[1])&&(Ke.x+=it[0],Ke.y+=it[1])}e.hoverData.draggingEles=!0,qe.silentShift(Ke).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else Bt();Z=!0}if(Pe[2]=G[0],Pe[3]=G[1],Z)return E.stopPropagation&&E.stopPropagation(),E.preventDefault&&E.preventDefault(),!1}},!1);var D,P,M;e.registerBinding(window,"mouseup",function(E){var R=e.hoverData.capture;if(R){e.hoverData.capture=!1;var Z=e.cy,X=e.projectIntoViewport(E.clientX,E.clientY),q=e.selection,he=e.findNearestElement(X[0],X[1],!0,!1),G=e.dragData.possibleDragElements,ie=e.hoverData.down,be=r(E);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,ie&&ie.unactivate(),e.hoverData.which===3){var Pe={originalEvent:E,type:"cxttapend",position:{x:X[0],y:X[1]}};if(ie?ie.emit(Pe):Z.emit(Pe),!e.hoverData.cxtDragged){var ye={originalEvent:E,type:"cxttap",position:{x:X[0],y:X[1]}};ie?ie.emit(ye):Z.emit(ye)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(e.hoverData.which===1){if(n(he,["mouseup","tapend","vmouseup"],E,{x:X[0],y:X[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(n(ie,["click","tap","vclick"],E,{x:X[0],y:X[1]}),P=!1,E.timeStamp-M<=Z.multiClickDebounceTime()?(D&&clearTimeout(D),P=!0,M=null,n(ie,["dblclick","dbltap","vdblclick"],E,{x:X[0],y:X[1]})):(D=setTimeout(function(){P||n(ie,["oneclick","onetap","voneclick"],E,{x:X[0],y:X[1]})},Z.multiClickDebounceTime()),M=E.timeStamp)),ie==null&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!r(E)&&(Z.$(t).unselect(["tapunselect"]),G.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=G=Z.collection()),he==ie&&!e.dragData.didDrag&&!e.hoverData.selecting&&he!=null&&he._private.selectable&&(e.hoverData.dragging||(Z.selectionType()==="additive"||be?he.selected()?he.unselect(["tapunselect"]):he.select(["tapselect"]):be||(Z.$(t).unmerge(he).unselect(["tapunselect"]),he.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var De=Z.collection(e.getAllInBox(q[0],q[1],q[2],q[3]));e.redrawHint("select",!0),De.length>0&&e.redrawHint("eles",!0),Z.emit({type:"boxend",originalEvent:E,position:{x:X[0],y:X[1]}});var ge=function(qe){return qe.selectable()&&!qe.selected()};Z.selectionType()==="additive"||be||Z.$(t).unmerge(De).unselect(),De.emit("box").stdFilter(ge).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!q[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var pe=ie&&ie.grabbed();v(G),pe&&(ie.emit("freeon"),G.emit("free"),e.dragData.didDrag&&(ie.emit("dragfreeon"),G.emit("dragfree")))}}q[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}},!1);var T=function(E){if(!e.scrollingPage){var R=e.cy,Z=R.zoom(),X=R.pan(),q=e.projectIntoViewport(E.clientX,E.clientY),he=[q[0]*Z+X.x,q[1]*Z+X.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||x()){E.preventDefault();return}if(R.panningEnabled()&&R.userPanningEnabled()&&R.zoomingEnabled()&&R.userZoomingEnabled()){E.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var G;E.deltaY!=null?G=E.deltaY/-250:E.wheelDeltaY!=null?G=E.wheelDeltaY/1e3:G=E.wheelDelta/1e3,G=G*e.wheelSensitivity;var ie=E.deltaMode===1;ie&&(G*=33);var be=R.zoom()*Math.pow(10,G);E.type==="gesturechange"&&(be=e.gestureStartZoom*E.scale),R.zoom({level:be,renderedPosition:{x:he[0],y:he[1]}}),R.emit(E.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};e.registerBinding(e.container,"wheel",T,!0),e.registerBinding(window,"scroll",function(E){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function(E){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||E.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(E){e.hasTouchStarted||T(E)},!0),e.registerBinding(e.container,"mouseout",function(E){var R=e.projectIntoViewport(E.clientX,E.clientY);e.cy.emit({originalEvent:E,type:"mouseout",position:{x:R[0],y:R[1]}})},!1),e.registerBinding(e.container,"mouseover",function(E){var R=e.projectIntoViewport(E.clientX,E.clientY);e.cy.emit({originalEvent:E,type:"mouseover",position:{x:R[0],y:R[1]}})},!1);var B,S,A,N,O,I,z,Y,V,H,j,W,ee,L=function(E,R,Z,X){return Math.sqrt((Z-E)*(Z-E)+(X-R)*(X-R))},F=function(E,R,Z,X){return(Z-E)*(Z-E)+(X-R)*(X-R)},U;e.registerBinding(e.container,"touchstart",U=function(E){if(e.hasTouchStarted=!0,!!C(E)){g(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var R=e.cy,Z=e.touchData.now,X=e.touchData.earlier;if(E.touches[0]){var q=e.projectIntoViewport(E.touches[0].clientX,E.touches[0].clientY);Z[0]=q[0],Z[1]=q[1]}if(E.touches[1]){var q=e.projectIntoViewport(E.touches[1].clientX,E.touches[1].clientY);Z[2]=q[0],Z[3]=q[1]}if(E.touches[2]){var q=e.projectIntoViewport(E.touches[2].clientX,E.touches[2].clientY);Z[4]=q[0],Z[5]=q[1]}if(E.touches[1]){e.touchData.singleTouchMoved=!0,v(e.dragData.touchDragEles);var he=e.findContainerClientCoords();V=he[0],H=he[1],j=he[2],W=he[3],B=E.touches[0].clientX-V,S=E.touches[0].clientY-H,A=E.touches[1].clientX-V,N=E.touches[1].clientY-H,ee=0<=B&&B<=j&&0<=A&&A<=j&&0<=S&&S<=W&&0<=N&&N<=W;var G=R.pan(),ie=R.zoom();O=L(B,S,A,N),I=F(B,S,A,N),z=[(B+A)/2,(S+N)/2],Y=[(z[0]-G.x)/ie,(z[1]-G.y)/ie];var be=200,Pe=be*be;if(I<Pe&&!E.touches[2]){var ye=e.findNearestElement(Z[0],Z[1],!0,!0),De=e.findNearestElement(Z[2],Z[3],!0,!0);ye&&ye.isNode()?(ye.activate().emit({originalEvent:E,type:"cxttapstart",position:{x:Z[0],y:Z[1]}}),e.touchData.start=ye):De&&De.isNode()?(De.activate().emit({originalEvent:E,type:"cxttapstart",position:{x:Z[0],y:Z[1]}}),e.touchData.start=De):R.emit({originalEvent:E,type:"cxttapstart",position:{x:Z[0],y:Z[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,e.redraw();return}}if(E.touches[2])R.boxSelectionEnabled()&&E.preventDefault();else if(!E.touches[1]&&E.touches[0]){var ge=e.findNearestElements(Z[0],Z[1],!0,!0),pe=ge[0];if(pe!=null&&(pe.activate(),e.touchData.start=pe,e.touchData.starts=ge,e.nodeIsGrabbable(pe))){var qe=e.dragData.touchDragEles=R.collection(),rt=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),pe.selected()?(rt=R.$(function(Ge){return Ge.selected()&&e.nodeIsGrabbable(Ge)}),p(rt,{addToList:qe})):f(pe,{addToList:qe}),l(pe);var pt=function(Ge){return{originalEvent:E,type:Ge,position:{x:Z[0],y:Z[1]}}};pe.emit(pt("grabon")),rt?rt.forEach(function(Ge){Ge.emit(pt("grab"))}):pe.emit(pt("grab"))}n(pe,["touchstart","tapstart","vmousedown"],E,{x:Z[0],y:Z[1]}),pe==null&&(e.data.bgActivePosistion={x:q[0],y:q[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved===!1&&!e.pinching&&!e.touchData.selecting&&n(e.touchData.start,["taphold"],E,{x:Z[0],y:Z[1]})},e.tapholdDuration)}if(E.touches.length>=1){for(var ft=e.touchData.startPosition=[],Xe=0;Xe<Z.length;Xe++)ft[Xe]=X[Xe]=Z[Xe];var ct=E.touches[0];e.touchData.startGPosition=[ct.clientX,ct.clientY]}}},!1);var Q;e.registerBinding(window,"touchmove",Q=function(E){var R=e.touchData.capture;if(!(!R&&!C(E))){var Z=e.selection,X=e.cy,q=e.touchData.now,he=e.touchData.earlier,G=X.zoom();if(E.touches[0]){var ie=e.projectIntoViewport(E.touches[0].clientX,E.touches[0].clientY);q[0]=ie[0],q[1]=ie[1]}if(E.touches[1]){var ie=e.projectIntoViewport(E.touches[1].clientX,E.touches[1].clientY);q[2]=ie[0],q[3]=ie[1]}if(E.touches[2]){var ie=e.projectIntoViewport(E.touches[2].clientX,E.touches[2].clientY);q[4]=ie[0],q[5]=ie[1]}var be=e.touchData.startGPosition,Pe;if(R&&E.touches[0]&&be){for(var ye=[],De=0;De<q.length;De++)ye[De]=q[De]-he[De];var ge=E.touches[0].clientX-be[0],pe=ge*ge,qe=E.touches[0].clientY-be[1],rt=qe*qe,pt=pe+rt;Pe=pt>=e.touchTapThreshold2}if(R&&e.touchData.cxt){E.preventDefault();var ft=E.touches[0].clientX-V,Xe=E.touches[0].clientY-H,ct=E.touches[1].clientX-V,Ge=E.touches[1].clientY-H,Ut=F(ft,Xe,ct,Ge),Bt=Ut/I,Nt=150,gr=Nt*Nt,sn=1.5,vr=sn*sn;if(Bt>=vr||Ut>=gr){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Zt={originalEvent:E,type:"cxttapend",position:{x:q[0],y:q[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(Zt),e.touchData.start=null):X.emit(Zt)}}if(R&&e.touchData.cxt){var Zt={originalEvent:E,type:"cxtdrag",position:{x:q[0],y:q[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(Zt):X.emit(Zt),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var at=e.findNearestElement(q[0],q[1],!0,!0);(!e.touchData.cxtOver||at!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:E,type:"cxtdragout",position:{x:q[0],y:q[1]}}),e.touchData.cxtOver=at,at&&at.emit({originalEvent:E,type:"cxtdragover",position:{x:q[0],y:q[1]}}))}else if(R&&E.touches[2]&&X.boxSelectionEnabled())E.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||X.emit({originalEvent:E,type:"boxstart",position:{x:q[0],y:q[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,Z[4]=1,!Z||Z.length===0||Z[0]===void 0?(Z[0]=(q[0]+q[2]+q[4])/3,Z[1]=(q[1]+q[3]+q[5])/3,Z[2]=(q[0]+q[2]+q[4])/3+1,Z[3]=(q[1]+q[3]+q[5])/3+1):(Z[2]=(q[0]+q[2]+q[4])/3,Z[3]=(q[1]+q[3]+q[5])/3),e.redrawHint("select",!0),e.redraw();else if(R&&E.touches[1]&&!e.touchData.didSelect&&X.zoomingEnabled()&&X.panningEnabled()&&X.userZoomingEnabled()&&X.userPanningEnabled()){E.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Ke=e.dragData.touchDragEles;if(Ke){e.redrawHint("drag",!0);for(var it=0;it<Ke.length;it++){var At=Ke[it]._private;At.grabbed=!1,At.rscratch.inDragLayer=!1}}var mr=e.touchData.start,ft=E.touches[0].clientX-V,Xe=E.touches[0].clientY-H,ct=E.touches[1].clientX-V,Ge=E.touches[1].clientY-H,ci=L(ft,Xe,ct,Ge),pl=ci/O;if(ee){var fl=ft-B,gl=Xe-S,vl=ct-A,ml=Ge-N,yl=(fl+vl)/2,bl=(gl+ml)/2,An=X.zoom(),da=An*pl,yr=X.pan(),di=Y[0]*An+yr.x,hi=Y[1]*An+yr.y,xl={x:-da/An*(di-yr.x-yl)+di,y:-da/An*(hi-yr.y-bl)+hi};if(mr&&mr.active()){var Ke=e.dragData.touchDragEles;v(Ke),e.redrawHint("drag",!0),e.redrawHint("eles",!0),mr.unactivate().emit("freeon"),Ke.emit("free"),e.dragData.didDrag&&(mr.emit("dragfreeon"),Ke.emit("dragfree"))}X.viewport({zoom:da,pan:xl,cancelOnFailedZoom:!0}),X.emit("pinchzoom"),O=ci,B=ft,S=Xe,A=ct,N=Ge,e.pinching=!0}if(E.touches[0]){var ie=e.projectIntoViewport(E.touches[0].clientX,E.touches[0].clientY);q[0]=ie[0],q[1]=ie[1]}if(E.touches[1]){var ie=e.projectIntoViewport(E.touches[1].clientX,E.touches[1].clientY);q[2]=ie[0],q[3]=ie[1]}if(E.touches[2]){var ie=e.projectIntoViewport(E.touches[2].clientX,E.touches[2].clientY);q[4]=ie[0],q[5]=ie[1]}}else if(E.touches[0]&&!e.touchData.didSelect){var gt=e.touchData.start,ha=e.touchData.last,at;if(!e.hoverData.draggingEles&&!e.swipePanning&&(at=e.findNearestElement(q[0],q[1],!0,!0)),R&&gt!=null&&E.preventDefault(),R&&gt!=null&&e.nodeIsDraggable(gt))if(Pe){var Ke=e.dragData.touchDragEles,pi=!e.dragData.didDrag;pi&&p(Ke,{inDragLayer:!0}),e.dragData.didDrag=!0;var In={x:0,y:0};if(J(ye[0])&&J(ye[1])&&(In.x+=ye[0],In.y+=ye[1],pi)){e.redrawHint("eles",!0);var vt=e.touchData.dragDelta;vt&&J(vt[0])&&J(vt[1])&&(In.x+=vt[0],In.y+=vt[1])}e.hoverData.draggingEles=!0,Ke.silentShift(In).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==he[0]&&e.touchData.startPosition[1]==he[1]&&e.redrawHint("eles",!0),e.redraw()}else{var vt=e.touchData.dragDelta=e.touchData.dragDelta||[];vt.length===0?(vt.push(ye[0]),vt.push(ye[1])):(vt[0]+=ye[0],vt[1]+=ye[1])}if(n(gt||at,["touchmove","tapdrag","vmousemove"],E,{x:q[0],y:q[1]}),(!gt||!gt.grabbed())&&at!=ha&&(ha&&ha.emit({originalEvent:E,type:"tapdragout",position:{x:q[0],y:q[1]}}),at&&at.emit({originalEvent:E,type:"tapdragover",position:{x:q[0],y:q[1]}})),e.touchData.last=at,R)for(var it=0;it<q.length;it++)q[it]&&e.touchData.startPosition[it]&&Pe&&(e.touchData.singleTouchMoved=!0);if(R&&(gt==null||gt.pannable())&&X.panningEnabled()&&X.userPanningEnabled()){var wl=a(gt,e.touchData.starts);wl&&(E.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=fn(e.touchData.startPosition)),e.swipePanning?(X.panBy({x:ye[0]*G,y:ye[1]*G}),X.emit("dragpan")):Pe&&(e.swipePanning=!0,X.panBy({x:ge*G,y:qe*G}),X.emit("dragpan"),gt&&(gt.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));var ie=e.projectIntoViewport(E.touches[0].clientX,E.touches[0].clientY);q[0]=ie[0],q[1]=ie[1]}}for(var De=0;De<q.length;De++)he[De]=q[De];R&&E.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&e.data.bgActivePosistion!=null&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1);var $;e.registerBinding(window,"touchcancel",$=function(E){var R=e.touchData.start;e.touchData.capture=!1,R&&R.unactivate()});var le,ve,me,K;if(e.registerBinding(window,"touchend",le=function(E){var R=e.touchData.start,Z=e.touchData.capture;if(Z)E.touches.length===0&&(e.touchData.capture=!1),E.preventDefault();else return;var X=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var q=e.cy,he=q.zoom(),G=e.touchData.now,ie=e.touchData.earlier;if(E.touches[0]){var be=e.projectIntoViewport(E.touches[0].clientX,E.touches[0].clientY);G[0]=be[0],G[1]=be[1]}if(E.touches[1]){var be=e.projectIntoViewport(E.touches[1].clientX,E.touches[1].clientY);G[2]=be[0],G[3]=be[1]}if(E.touches[2]){var be=e.projectIntoViewport(E.touches[2].clientX,E.touches[2].clientY);G[4]=be[0],G[5]=be[1]}R&&R.unactivate();var Pe;if(e.touchData.cxt){if(Pe={originalEvent:E,type:"cxttapend",position:{x:G[0],y:G[1]}},R?R.emit(Pe):q.emit(Pe),!e.touchData.cxtDragged){var ye={originalEvent:E,type:"cxttap",position:{x:G[0],y:G[1]}};R?R.emit(ye):q.emit(ye)}e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,e.redraw();return}if(!E.touches[2]&&q.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var De=q.collection(e.getAllInBox(X[0],X[1],X[2],X[3]));X[0]=void 0,X[1]=void 0,X[2]=void 0,X[3]=void 0,X[4]=0,e.redrawHint("select",!0),q.emit({type:"boxend",originalEvent:E,position:{x:G[0],y:G[1]}});var ge=function(Nt){return Nt.selectable()&&!Nt.selected()};De.emit("box").stdFilter(ge).select().emit("boxselect"),De.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(R!=null&&R.unactivate(),E.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!E.touches[1]&&!E.touches[0]&&!E.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var pe=e.dragData.touchDragEles;if(R!=null){var qe=R._private.grabbed;v(pe),e.redrawHint("drag",!0),e.redrawHint("eles",!0),qe&&(R.emit("freeon"),pe.emit("free"),e.dragData.didDrag&&(R.emit("dragfreeon"),pe.emit("dragfree"))),n(R,["touchend","tapend","vmouseup","tapdragout"],E,{x:G[0],y:G[1]}),R.unactivate(),e.touchData.start=null}else{var rt=e.findNearestElement(G[0],G[1],!0,!0);n(rt,["touchend","tapend","vmouseup","tapdragout"],E,{x:G[0],y:G[1]})}var pt=e.touchData.startPosition[0]-G[0],ft=pt*pt,Xe=e.touchData.startPosition[1]-G[1],ct=Xe*Xe,Ge=ft+ct,Ut=Ge*he*he;e.touchData.singleTouchMoved||(R||q.$(":selected").unselect(["tapunselect"]),n(R,["tap","vclick"],E,{x:G[0],y:G[1]}),ve=!1,E.timeStamp-K<=q.multiClickDebounceTime()?(me&&clearTimeout(me),ve=!0,K=null,n(R,["dbltap","vdblclick"],E,{x:G[0],y:G[1]})):(me=setTimeout(function(){ve||n(R,["onetap","voneclick"],E,{x:G[0],y:G[1]})},q.multiClickDebounceTime()),K=E.timeStamp)),R!=null&&!e.dragData.didDrag&&R._private.selectable&&Ut<e.touchTapThreshold2&&!e.pinching&&(q.selectionType()==="single"?(q.$(t).unmerge(R).unselect(["tapunselect"]),R.select(["tapselect"])):R.selected()?R.unselect(["tapunselect"]):R.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var Bt=0;Bt<G.length;Bt++)ie[Bt]=G[Bt];e.dragData.didDrag=!1,E.touches.length===0&&(e.touchData.dragDelta=[],e.touchData.startPosition=null,e.touchData.startGPosition=null,e.touchData.didSelect=!1),E.touches.length<2&&(E.touches.length===1&&(e.touchData.startGPosition=[E.touches[0].clientX,E.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())},!1),typeof TouchEvent>"u"){var ae=[],te=function(E){return{clientX:E.clientX,clientY:E.clientY,force:1,identifier:E.pointerId,pageX:E.pageX,pageY:E.pageY,radiusX:E.width/2,radiusY:E.height/2,screenX:E.screenX,screenY:E.screenY,target:E.target}},ne=function(E){return{event:E,touch:te(E)}},oe=function(E){ae.push(ne(E))},de=function(E){for(var R=0;R<ae.length;R++){var Z=ae[R];if(Z.event.pointerId===E.pointerId){ae.splice(R,1);return}}},fe=function(E){var R=ae.filter(function(Z){return Z.event.pointerId===E.pointerId})[0];R.event=E,R.touch=te(E)},ce=function(E){E.touches=ae.map(function(R){return R.touch})},xe=function(E){return E.pointerType==="mouse"||E.pointerType===4};e.registerBinding(e.container,"pointerdown",function(E){xe(E)||(E.preventDefault(),oe(E),ce(E),U(E))}),e.registerBinding(e.container,"pointerup",function(E){xe(E)||(de(E),ce(E),le(E))}),e.registerBinding(e.container,"pointercancel",function(E){xe(E)||(de(E),ce(E),$(E))}),e.registerBinding(e.container,"pointermove",function(E){xe(E)||(E.preventDefault(),fe(E),ce(E),Q(E))})}};var Mt={};Mt.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(n,r,a,i,o){this.renderer.nodeShapeImpl("polygon",n,r,a,i,o,this.points)},intersectLine:function(n,r,a,i,o,u,s){return Qn(o,u,this.points,n,r,a/2,i/2,s)},checkPoint:function(n,r,a,i,o,u,s){return _t(n,r,this.points,u,s,i,o,[0,-1],a)}}};Mt.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,r,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},intersectLine:function(e,t,n,r,a,i,o){return Df(a,i,e,t,n/2+o,r/2+o)},checkPoint:function(e,t,n,r,a,i,o){return $t(e,t,r,a,i,o,n)}}};Mt.generateRoundPolygon=function(e,t){for(var n=new Array(t.length*2),r=0;r<t.length/2;r++){var a=r*2,i=void 0;r<t.length/2-1?i=(r+1)*2:i=0,n[r*4]=t[a],n[r*4+1]=t[a+1];var o=t[i]-t[a],u=t[i+1]-t[a+1],s=Math.sqrt(o*o+u*u);n[r*4+2]=o/s,n[r*4+3]=u/s}return this.nodeShapes[e]={renderer:this,name:e,points:n,draw:function(l,c,d,h,p){this.renderer.nodeShapeImpl("round-polygon",l,c,d,h,p,this.points)},intersectLine:function(l,c,d,h,p,f,v){return Tf(p,f,this.points,l,c,d,h)},checkPoint:function(l,c,d,h,p,f,v){return Cf(l,c,this.points,f,v,h,p)}}};Mt.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:tt(4,0),draw:function(e,t,n,r,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},intersectLine:function(e,t,n,r,a,i,o){return os(a,i,e,t,n,r,o)},checkPoint:function(e,t,n,r,a,i,o){var u=ur(r,a),s=u*2;return!!(_t(e,t,this.points,i,o,r,a-s,[0,-1],n)||_t(e,t,this.points,i,o,r-s,a,[0,-1],n)||$t(e,t,s,s,i-r/2+u,o-a/2+u,n)||$t(e,t,s,s,i+r/2-u,o-a/2+u,n)||$t(e,t,s,s,i+r/2-u,o+a/2-u,n)||$t(e,t,s,s,i-r/2+u,o+a/2-u,n))}}};Mt.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:cs(),points:tt(4,0),draw:function(e,t,n,r,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},generateCutTrianglePts:function(e,t,n,r){var a=this.cornerLength,i=t/2,o=e/2,u=n-o,s=n+o,l=r-i,c=r+i;return{topLeft:[u,l+a,u+a,l,u+a,l+a],topRight:[s-a,l,s,l+a,s-a,l+a],bottomRight:[s,c-a,s-a,c,s-a,c-a],bottomLeft:[u+a,c,u,c-a,u+a,c-a]}},intersectLine:function(e,t,n,r,a,i,o){var u=this.generateCutTrianglePts(n+2*o,r+2*o,e,t),s=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return Qn(a,i,s,e,t)},checkPoint:function(e,t,n,r,a,i,o){if(_t(e,t,this.points,i,o,r,a-2*this.cornerLength,[0,-1],n)||_t(e,t,this.points,i,o,r-2*this.cornerLength,a,[0,-1],n))return!0;var u=this.generateCutTrianglePts(r,a,i,o);return ot(e,t,u.topLeft)||ot(e,t,u.topRight)||ot(e,t,u.bottomRight)||ot(e,t,u.bottomLeft)}}};Mt.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:tt(4,0),draw:function(e,t,n,r,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},intersectLine:function(e,t,n,r,a,i,o){var u=.15,s=.5,l=.85,c=this.generateBarrelBezierPts(n+2*o,r+2*o,e,t),d=function(p){var f=vn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},u),v=vn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},s),b=vn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},l);return[p[0],p[1],f.x,f.y,v.x,v.y,b.x,b.y,p[4],p[5]]},h=[].concat(d(c.topLeft),d(c.topRight),d(c.bottomRight),d(c.bottomLeft));return Qn(a,i,h,e,t)},generateBarrelBezierPts:function(e,t,n,r){var a=t/2,i=e/2,o=n-i,u=n+i,s=r-a,l=r+a,c=Ma(e,t),d=c.heightOffset,h=c.widthOffset,p=c.ctrlPtOffsetPct*e,f={topLeft:[o,s+d,o+p,s,o+h,s],topRight:[u-h,s,u-p,s,u,s+d],bottomRight:[u,l-d,u-p,l,u-h,l],bottomLeft:[o+h,l,o+p,l,o,l-d]};return f.topLeft.isTop=!0,f.topRight.isTop=!0,f.bottomLeft.isBottom=!0,f.bottomRight.isBottom=!0,f},checkPoint:function(e,t,n,r,a,i,o){var u=Ma(r,a),s=u.heightOffset,l=u.widthOffset;if(_t(e,t,this.points,i,o,r,a-2*s,[0,-1],n)||_t(e,t,this.points,i,o,r-2*l,a,[0,-1],n))return!0;for(var c=this.generateBarrelBezierPts(r,a,i,o),d=function(_,k,x){var C=x[4],D=x[2],P=x[0],M=x[5],T=x[1],B=Math.min(C,P),S=Math.max(C,P),A=Math.min(M,T),N=Math.max(M,T);if(B<=_&&_<=S&&A<=k&&k<=N){var O=_f(C,D,P),I=xf(O[0],O[1],O[2],_),z=I.filter(function(Y){return 0<=Y&&Y<=1});if(z.length>0)return z[0]}return null},h=Object.keys(c),p=0;p<h.length;p++){var f=h[p],v=c[f],b=d(e,t,v);if(b!=null){var g=v[5],m=v[3],y=v[1],w=je(g,m,y,b);if(v.isTop&&w<=t||v.isBottom&&t<=w)return!0}}return!1}}};Mt.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:tt(4,0),draw:function(e,t,n,r,a){this.renderer.nodeShapeImpl(this.name,e,t,n,r,a)},intersectLine:function(e,t,n,r,a,i,o){var u=e-(n/2+o),s=t-(r/2+o),l=s,c=e+(n/2+o),d=Lt(a,i,e,t,u,s,c,l,!1);return d.length>0?d:os(a,i,e,t,n,r,o)},checkPoint:function(e,t,n,r,a,i,o){var u=ur(r,a),s=2*u;if(_t(e,t,this.points,i,o,r,a-s,[0,-1],n)||_t(e,t,this.points,i,o,r-s,a,[0,-1],n))return!0;var l=r/2+2*n,c=a/2+2*n,d=[i-l,o-c,i-l,o,i+l,o,i+l,o-c];return!!(ot(e,t,d)||$t(e,t,s,s,i+r/2-u,o+a/2-u,n)||$t(e,t,s,s,i-r/2+u,o+a/2-u,n))}}};Mt.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",tt(3,0)),this.generateRoundPolygon("round-triangle",tt(3,0)),this.generatePolygon("rectangle",tt(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n)}this.generatePolygon("pentagon",tt(5,0)),this.generateRoundPolygon("round-pentagon",tt(5,0)),this.generatePolygon("hexagon",tt(6,0)),this.generateRoundPolygon("round-hexagon",tt(6,0)),this.generatePolygon("heptagon",tt(7,0)),this.generateRoundPolygon("round-heptagon",tt(7,0)),this.generatePolygon("octagon",tt(8,0)),this.generateRoundPolygon("round-octagon",tt(8,0));var r=new Array(20);{var a=Pa(5,0),i=Pa(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var u=0;u<i.length/2;u++)i[u*2]*=o,i[u*2+1]*=o;for(var u=0;u<20/4;u++)r[u*4]=a[u*2],r[u*4+1]=a[u*2+1],r[u*4+2]=i[u*2],r[u*4+3]=i[u*2+1]}r=us(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var s=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",s),this.generateRoundPolygon("round-tag",s)}e.makePolygon=function(l){var c=l.join("$"),d="polygon-"+c,h;return(h=this[d])?h:t.generatePolygon(d,l)}};var pr={};pr.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};pr.redraw=function(e){e=e||ns();var t=this;t.averageRedrawTime===void 0&&(t.averageRedrawTime=0),t.lastRedrawTime===void 0&&(t.lastRedrawTime=0),t.lastDrawTime===void 0&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e};pr.beforeRender=function(e,t){if(!this.destroyed){t==null&&ze("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(r,a){return a.priority-r.priority})}};var Eo=function(e,t,n){for(var r=e.beforeRenderCallbacks,a=0;a<r.length;a++)r[a].fn(t,n)};pr.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var n=function r(a){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){Eo(e,!0,a);var i=Tt();e.render(e.renderOptions);var o=e.lastDrawTime=Tt();e.averageRedrawTime===void 0&&(e.averageRedrawTime=o-i),e.redrawCount===void 0&&(e.redrawCount=0),e.redrawCount++,e.redrawTotalTime===void 0&&(e.redrawTotalTime=0);var u=o-i;e.redrawTotalTime+=u,e.lastRedrawTime=u,e.averageRedrawTime=e.averageRedrawTime/2+u/2,e.requestedFrame=!1}else Eo(e,!1,a);e.skipFrame=!1,Rr(r)}};Rr(n)}};var $v=function(e){this.init(e)},Qs=$v,Bn=Qs.prototype;Bn.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Bn.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container();if(Ie){var r=Ie.document,a=r.head,i="__________cytoscape_stylesheet",o="__________cytoscape_container",u=r.getElementById(i)!=null;if(n.className.indexOf(o)<0&&(n.className=(n.className||"")+" "+o),!u){var s=r.createElement("style");s.id=i,s.innerHTML="."+o+" { position: relative; }",a.insertBefore(s,a.children[0])}var l=Ie.getComputedStyle(n),c=l.getPropertyValue("position");c==="static"&&_e("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=J(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()};Bn.notify=function(e,t){var n=this,r=n.cy;if(!this.destroyed){if(e==="init"){n.load();return}if(e==="destroy"){n.destroy();return}(e==="add"||e==="remove"||e==="move"&&r.hasCompoundNodes()||e==="load"||e==="zorder"||e==="mount")&&n.invalidateCachedZSortedEles(),e==="viewport"&&n.redrawHint("select",!0),(e==="load"||e==="resize"||e==="mount")&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Bn.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],r=n,a=r.target;(a.off||a.removeEventListener).apply(a,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}};Bn.isHeadless=function(){return!1};[si,Ks,$s,Sn,Mt,pr].forEach(function(e){ue(Bn,e)});var Ca=1e3/60,Js={setupDequeueing:function(e){return function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var r=$r.default(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),a=function(o,u){var s=Tt(),l=n.averageRedrawTime,c=n.lastRedrawTime,d=[],h=n.cy.extent(),p=n.getPixelRatio();for(o||n.flushRenderedStyleQueue();;){var f=Tt(),v=f-s,b=f-u;if(c<Ca){var g=Ca-(o?l:0);if(b>=e.deqFastCost*g)break}else if(o){if(v>=e.deqCost*c||v>=e.deqAvgCost*l)break}else if(b>=e.deqNoDrawCost*Ca)break;var m=e.deq(t,p,h);if(m.length>0)for(var y=0;y<m.length;y++)d.push(m[y]);else break}d.length>0&&(e.onDeqd(t,d),!o&&e.shouldRedraw(t,d,p,h)&&r())},i=e.priority||Ga;n.beforeRender(a,i(t))}}}},Qv=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vr;Ya(this,e),this.idsByKey=new wt,this.keyForId=new wt,this.cachesByLvl=new wt,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=n}return Ha(e,[{key:"getIdsFor",value:function(t){t==null&&ze("Can not get id list for null key");var n=this.idsByKey,r=this.idsByKey.get(t);return r||(r=new Tn,n.set(t,r)),r}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),r=this.keyForId.get(n),a=this.getKey(t);this.deleteIdForKey(r,n),this.addIdForKey(a,n),this.keyForId.set(n,a)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteIdForKey(r,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),r=this.keyForId.get(n),a=this.getKey(t);return r!==a}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,r=this.lvls,a=n.get(t);return a||(a=new wt,n.set(t,a),r.push(t)),a}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var r=this.getKey(t),a=this.getCache(r,n);return a!=null&&this.updateKeyMappingFor(t),a}},{key:"getForCachedKey",value:function(t,n){var r=this.keyForId.get(t.id()),a=this.getCache(r,n);return a}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var r=this.getKey(t);return this.hasCache(r,n)}},{key:"setCache",value:function(t,n,r){r.key=t,this.getCachesAt(n).set(t,r)}},{key:"set",value:function(t,n,r){var a=this.getKey(t);this.setCache(a,n,r),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var r=this.getKey(t);this.deleteCache(r,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(r){return n.deleteCache(t,r)})}},{key:"invalidate",value:function(t){var n=t.id(),r=this.keyForId.get(n);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);return a&&this.invalidateKey(r),a||this.getNumberOfIdsForKey(r)===0}}]),e}(),ko=25,Mr=50,zr=-4,za=3,Jv=7.99,e0=8,t0=1024,n0=1024,r0=1024,a0=.2,i0=.8,o0=10,s0=.15,l0=.1,u0=.9,c0=.9,d0=100,h0=1,gn={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},p0=Ue({getKey:null,doesEleInvalidateKey:Vr,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Jo,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Yn=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var r=p0(t);ue(n,r),n.lookup=new Qv(r.getKey,r.doesEleInvalidateKey),n.setupDequeueing()},Fe=Yn.prototype;Fe.reasons=gn;Fe.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]};Fe.getRetiredTextureQueue=function(e){var t=this,n=t.eleImgCaches.retired=t.eleImgCaches.retired||{},r=n[e]=n[e]||[];return r};Fe.getElementQueue=function(){var e=this,t=e.eleCacheQueue=e.eleCacheQueue||new or.default(function(n,r){return r.reqs-n.reqs});return t};Fe.getElementKeyToQueue=function(){var e=this,t=e.eleKeyToCacheQueue=e.eleKeyToCacheQueue||{};return t};Fe.getElement=function(e,t,n,r,a){var i=this,o=this.renderer,u=o.cy.zoom(),s=this.lookup;if(!t||t.w===0||t.h===0||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!i.allowEdgeTxrCaching&&e.isEdge()||!i.allowParentTxrCaching&&e.isParent())return null;if(r==null&&(r=Math.ceil($a(u*n))),r<zr)r=zr;else if(u>=Jv||r>za)return null;var l=Math.pow(2,r),c=t.h*l,d=t.w*l,h=o.eleTextBiggerThanMin(e,l);if(!this.isVisible(e,h))return null;var p=s.get(e,r);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;var f;if(c<=ko?f=ko:c<=Mr?f=Mr:f=Math.ceil(c/Mr)*Mr,c>r0||d>n0)return null;var v=i.getTextureQueue(f),b=v[v.length-2],g=function(){return i.recycleTexture(f,d)||i.addTexture(f,d)};b||(b=v[v.length-1]),b||(b=g()),b.width-b.usedWidth<d&&(b=g());for(var m=function(A){return A&&A.scaledLabelShown===h},y=a&&a===gn.dequeue,w=a&&a===gn.highQuality,_=a&&a===gn.downscale,k,x=r+1;x<=za;x++){var C=s.get(e,x);if(C){k=C;break}}var D=k&&k.level===r+1?k:null,P=function(){b.context.drawImage(D.texture.canvas,D.x,0,D.width,D.height,b.usedWidth,0,d,c)};if(b.context.setTransform(1,0,0,1,0,0),b.context.clearRect(b.usedWidth,0,d,f),m(D))P();else if(m(k))if(w){for(var M=k.level;M>r;M--)D=i.getElement(e,t,n,M,gn.downscale);P()}else return i.queueElement(e,k.level-1),k;else{var T;if(!y&&!w&&!_)for(var B=r-1;B>=zr;B--){var S=s.get(e,B);if(S){T=S;break}}if(m(T))return i.queueElement(e,r),T;b.context.translate(b.usedWidth,0),b.context.scale(l,l),this.drawElement(b.context,e,t,h,!1),b.context.scale(1/l,1/l),b.context.translate(-b.usedWidth,0)}return p={x:b.usedWidth,texture:b,level:r,scale:l,width:d,height:c,scaledLabelShown:h},b.usedWidth+=Math.ceil(d+e0),b.eleCaches.push(p),s.set(e,r,p),i.checkTextureFullness(b),p};Fe.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])};Fe.invalidateElement=function(e){var t=this,n=t.lookup,r=[],a=n.isInvalid(e);if(a){for(var i=zr;i<=za;i++){var o=n.getForCachedKey(e,i);o&&r.push(o)}var u=n.invalidate(e);if(u)for(var s=0;s<r.length;s++){var l=r[s],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,t.checkTextureUtility(c)}t.removeFromQueue(e)}};Fe.checkTextureUtility=function(e){e.invalidatedWidth>=a0*e.width&&this.retireTexture(e)};Fe.checkTextureFullness=function(e){var t=this,n=t.getTextureQueue(e.height);e.usedWidth/e.width>i0&&e.fullnessChecks>=o0?jt(n,e):e.fullnessChecks++};Fe.retireTexture=function(e){var t=this,n=e.height,r=t.getTextureQueue(n),a=this.lookup;jt(r,e),e.retired=!0;for(var i=e.eleCaches,o=0;o<i.length;o++){var u=i[o];a.deleteCache(u.key,u.level)}Ka(i);var s=t.getRetiredTextureQueue(n);s.push(e)};Fe.addTexture=function(e,t){var n=this,r=n.getTextureQueue(e),a={};return r.push(a),a.eleCaches=[],a.height=e,a.width=Math.max(t0,t),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=n.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};Fe.recycleTexture=function(e,t){for(var n=this,r=n.getTextureQueue(e),a=n.getRetiredTextureQueue(e),i=0;i<a.length;i++){var o=a[i];if(o.width>=t)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Ka(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),jt(a,o),r.push(o),o}};Fe.queueElement=function(e,t){var n=this,r=n.getElementQueue(),a=n.getElementKeyToQueue(),i=this.getKey(e),o=a[i];if(o)o.level=Math.max(o.level,t),o.eles.merge(e),o.reqs++,r.updateItem(o);else{var u={eles:e.spawn().merge(e),level:t,reqs:1,key:i};r.push(u),a[i]=u}};Fe.dequeue=function(e){for(var t=this,n=t.getElementQueue(),r=t.getElementKeyToQueue(),a=[],i=t.lookup,o=0;o<h0&&n.size()>0;o++){var u=n.pop(),s=u.key,l=u.eles[0],c=i.hasCache(l,u.level);if(r[s]=null,!c){a.push(u);var d=t.getBoundingBox(l);t.getElement(l,d,e,u.level,gn.dequeue)}}return a};Fe.removeFromQueue=function(e){var t=this,n=t.getElementQueue(),r=t.getElementKeyToQueue(),a=this.getKey(e),i=r[a];i!=null&&(i.eles.length===1?(i.reqs=Za,n.updateItem(i),n.pop(),r[a]=null):i.eles.unmerge(e))};Fe.onDequeue=function(e){this.onDequeues.push(e)};Fe.offDequeue=function(e){jt(this.onDequeues,e)};Fe.setupDequeueing=Js.setupDequeueing({deqRedrawThreshold:d0,deqCost:s0,deqAvgCost:l0,deqNoDrawCost:u0,deqFastCost:c0,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var r=e.onDequeues[n];r(t)}},shouldRedraw:function(e,t,n,r){for(var a=0;a<t.length;a++)for(var i=t[a].eles,o=0;o<i.length;o++){var u=i[o].boundingBox();if(Qa(u,r))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var f0=1,Wn=-4,Hr=2,g0=3.99,v0=50,m0=50,y0=.15,b0=.1,x0=.9,w0=.9,E0=1,Co=250,k0=4e3*4e3,C0=!0,el=function(e){var t=this,n=t.renderer=e,r=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Tt()-2*Co,t.skipping=!1,t.eleTxrDeqs=r.collection(),t.scheduleElementRefinement=$r.default(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},m0),n.beforeRender(function(i,o){o-t.lastInvalidationTime<=Co?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=function(i,o){return o.reqs-i.reqs};t.layersQueue=new or.default(a),t.setupDequeueing()},Ze=el.prototype,Do=0,D0=Math.pow(2,53)-1;Ze.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),a=Math.ceil(e.h*n),i=this.renderer.makeOffscreenCanvas(r,a),o={id:Do=++Do%D0,bb:e,level:t,width:r,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},u=o.context,s=-o.bb.x1,l=-o.bb.y1;return u.scale(n,n),u.translate(s,l),o};Ze.getLayers=function(e,t,n){var r=this,a=r.renderer,i=a.cy,o=i.zoom(),u=r.firstGet;if(r.firstGet=!1,n==null){if(n=Math.ceil($a(o*t)),n<Wn)n=Wn;else if(o>=g0||n>Hr)return null}r.validateLayersElesOrdering(n,e);var s=r.layersByLevel,l=Math.pow(2,n),c=s[n]=s[n]||[],d,h=r.levelIsComplete(n,e),p,f=function(){var D=function(B){if(r.validateLayersElesOrdering(B,e),r.levelIsComplete(B,e))return p=s[B],!0},P=function(B){if(!p)for(var S=n+B;Wn<=S&&S<=Hr&&!D(S);S+=B);};P(1),P(-1);for(var M=c.length-1;M>=0;M--){var T=c[M];T.invalid&&jt(c,T)}};if(!h)f();else return c;var v=function(){if(!d){d=st();for(var D=0;D<e.length;D++)gf(d,e[D].boundingBox())}return d},b=function(D){D=D||{};var P=D.after;v();var M=d.w*l*(d.h*l);if(M>k0)return null;var T=r.makeLayer(d,n);if(P!=null){var B=c.indexOf(P)+1;c.splice(B,0,T)}else(D.insert===void 0||D.insert)&&c.unshift(T);return T};if(r.skipping&&!u)return null;for(var g=null,m=e.length/f0,y=!u,w=0;w<e.length;w++){var _=e[w],k=_._private.rscratch,x=k.imgLayerCaches=k.imgLayerCaches||{},C=x[n];if(C){g=C;continue}if((!g||g.eles.length>=m||!is(g.bb,_.boundingBox()))&&(g=b({insert:!0,after:g}),!g))return null;p||y?r.queueLayer(g,_):r.drawEleInLayer(g,_,n,t),g.eles.push(_),x[n]=g}return p||(y?null:c)};Ze.getEleLevelForLayerLevel=function(e,t){return e};Ze.drawEleInLayer=function(e,t,n,r){var a=this,i=this.renderer,o=e.context,u=t.boundingBox();u.w===0||u.h===0||!t.visible()||(n=a.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(o,!1),i.drawCachedElement(o,t,null,null,n,C0),i.setImgSmoothing(o,!0))};Ze.levelIsComplete=function(e,t){var n=this,r=n.layersByLevel[e];if(!r||r.length===0)return!1;for(var a=0,i=0;i<r.length;i++){var o=r[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===t.length};Ze.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var a=n[r],i=-1,o=0;o<t.length;o++)if(a.eles[0]===t[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var u=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==t[u+o]){this.invalidateLayer(a);break}}};Ze.updateElementsInLayers=function(e,t){for(var n=this,r=lr(e[0]),a=0;a<e.length;a++)for(var i=r?null:e[a],o=r?e[a]:e[a].ele,u=o._private.rscratch,s=u.imgLayerCaches=u.imgLayerCaches||{},l=Wn;l<=Hr;l++){var c=s[l];c&&(i&&n.getEleLevelForLayerLevel(c.level)!==i.level||t(c,o,i))}};Ze.haveLayers=function(){for(var e=this,t=!1,n=Wn;n<=Hr;n++){var r=e.layersByLevel[n];if(r&&r.length>0){t=!0;break}}return t};Ze.invalidateElements=function(e){var t=this;e.length!==0&&(t.lastInvalidationTime=Tt(),!(e.length===0||!t.haveLayers())&&t.updateElementsInLayers(e,function(n,r,a){t.invalidateLayer(n)}))};Ze.invalidateLayer=function(e){if(this.lastInvalidationTime=Tt(),!e.invalid){var t=e.level,n=e.eles,r=this.layersByLevel[t];jt(r,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var a=0;a<n.length;a++){var i=n[a]._private.rscratch.imgLayerCaches;i&&(i[t]=null)}}};Ze.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(n,r,a){var i=n.replacement;if(i||(i=n.replacement=t.makeLayer(n.bb,n.level),i.replaces=n,i.eles=n.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)t.queueLayer(i,i.eles[o])})};Ze.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()};Ze.queueLayer=function(e,t){var n=this,r=n.layersQueue,a=e.elesQueue,i=a.hasId=a.hasId||{};if(!e.replacement){if(t){if(i[t.id()])return;a.push(t),i[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}};Ze.dequeue=function(e){for(var t=this,n=t.layersQueue,r=[],a=0;a<E0&&n.size()!==0;){var i=n.peek();if(i.replacement){n.pop();continue}if(i.replaces&&i!==i.replaces.replacement){n.pop();continue}if(i.invalid){n.pop();continue}var o=i.elesQueue.shift();o&&(t.drawEleInLayer(i,o,i.level,e),a++),r.length===0&&r.push(!0),i.elesQueue.length===0&&(n.pop(),i.reqs=0,i.replaces&&t.applyLayerReplacement(i),t.requestRedraw())}return r};Ze.applyLayerReplacement=function(e){var t=this,n=t.layersByLevel[e.level],r=e.replaces,a=n.indexOf(r);if(!(a<0||r.invalid)){n[a]=e;for(var i=0;i<e.eles.length;i++){var o=e.eles[i]._private,u=o.imgLayerCaches=o.imgLayerCaches||{};u&&(u[e.level]=e)}t.requestRedraw()}};Ze.requestRedraw=$r.default(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100);Ze.setupDequeueing=Js.setupDequeueing({deqRedrawThreshold:v0,deqCost:y0,deqAvgCost:b0,deqNoDrawCost:x0,deqFastCost:w0,deq:function(e,t){return e.dequeue(t)},onDeqd:Ga,shouldRedraw:Jo,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var tl={},To;function T0(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}}function _0(e,t,n){for(var r,a=0;a<t.length;a++){var i=t[a];a===0&&(r=i),e.lineTo(i.x,i.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)}function _o(e,t,n){e.beginPath&&e.beginPath();for(var r=t,a=0;a<r.length;a++){var i=r[a];e.lineTo(i.x,i.y)}var o=n,u=n[0];e.moveTo(u.x,u.y);for(var a=1;a<o.length;a++){var i=o[a];e.lineTo(i.x,i.y)}e.closePath&&e.closePath()}function P0(e,t,n,r,a){e.beginPath&&e.beginPath(),e.arc(n,r,a,0,Math.PI*2,!1);var i=t,o=i[0];e.moveTo(o.x,o.y);for(var u=0;u<i.length;u++){var s=i[u];e.lineTo(s.x,s.y)}e.closePath&&e.closePath()}function M0(e,t,n,r){e.arc(t,n,r,0,Math.PI*2,!1)}tl.arrowShapeImpl=function(e){return(To||(To={polygon:T0,"triangle-backcurve":_0,"triangle-tee":_o,"circle-triangle":P0,"triangle-cross":_o,circle:M0}))[e]};var Ct={};Ct.drawElement=function(e,t,n,r,a,i){var o=this;t.isNode()?o.drawNode(e,t,n,r,a,i):o.drawEdge(e,t,n,r,a,i)};Ct.drawElementOverlay=function(e,t){var n=this;t.isNode()?n.drawNodeOverlay(e,t):n.drawEdgeOverlay(e,t)};Ct.drawElementUnderlay=function(e,t){var n=this;t.isNode()?n.drawNodeUnderlay(e,t):n.drawEdgeUnderlay(e,t)};Ct.drawCachedElementPortion=function(e,t,n,r,a,i,o,u){var s=this,l=n.getBoundingBox(t);if(!(l.w===0||l.h===0)){var c=n.getElement(t,l,r,a,i);if(c!=null){var d=u(s,t);if(d===0)return;var h=o(s,t),p=l.x1,f=l.y1,v=l.w,b=l.h,g,m,y,w,_;if(h!==0){var k=n.getRotationPoint(t);y=k.x,w=k.y,e.translate(y,w),e.rotate(h),_=s.getImgSmoothing(e),_||s.setImgSmoothing(e,!0);var x=n.getRotationOffset(t);g=x.x,m=x.y}else g=p,m=f;var C;d!==1&&(C=e.globalAlpha,e.globalAlpha=C*d),e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,g,m,v,b),d!==1&&(e.globalAlpha=C),h!==0&&(e.rotate(-h),e.translate(-y,-w),_||s.setImgSmoothing(e,!1))}else n.drawElement(e,t)}};var S0=function(){return 0},B0=function(e,t){return e.getTextAngle(t,null)},N0=function(e,t){return e.getTextAngle(t,"source")},A0=function(e,t){return e.getTextAngle(t,"target")},I0=function(e,t){return t.effectiveOpacity()},Da=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};Ct.drawCachedElement=function(e,t,n,r,a,i){var o=this,u=o.data,s=u.eleTxrCache,l=u.lblTxrCache,c=u.slbTxrCache,d=u.tlbTxrCache,h=t.boundingBox(),p=i===!0?s.reasons.highQuality:null;if(!(h.w===0||h.h===0||!t.visible())&&(!r||Qa(h,r))){var f=t.isEdge(),v=t.element()._private.rscratch.badLine;o.drawElementUnderlay(e,t),o.drawCachedElementPortion(e,t,s,n,a,p,S0,I0),(!f||!v)&&o.drawCachedElementPortion(e,t,l,n,a,p,B0,Da),f&&!v&&(o.drawCachedElementPortion(e,t,c,n,a,p,N0,Da),o.drawCachedElementPortion(e,t,d,n,a,p,A0,Da)),o.drawElementOverlay(e,t)}};Ct.drawElements=function(e,t){for(var n=this,r=0;r<t.length;r++){var a=t[r];n.drawElement(e,a)}};Ct.drawCachedElements=function(e,t,n,r){for(var a=this,i=0;i<t.length;i++){var o=t[i];a.drawCachedElement(e,o,n,r)}};Ct.drawCachedNodes=function(e,t,n,r){for(var a=this,i=0;i<t.length;i++){var o=t[i];o.isNode()&&a.drawCachedElement(e,o,n,r)}};Ct.drawLayeredElements=function(e,t,n,r){var a=this,i=a.data.lyrTxrCache.getLayers(t,n);if(i)for(var o=0;o<i.length;o++){var u=i[o],s=u.bb;s.w===0||s.h===0||e.drawImage(u.canvas,s.x1,s.y1,s.w,s.h)}else a.drawCachedElements(e,t,n,r)};var St={};St.drawEdge=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,u=t._private.rscratch;if(!(i&&!t.visible())&&!(u.badLine||u.allpts==null||isNaN(u.allpts[0]))){var s;n&&(s=n,e.translate(-s.x1,-s.y1));var l=i?t.pstyle("opacity").value:1,c=i?t.pstyle("line-opacity").value:1,d=t.pstyle("curve-style").value,h=t.pstyle("line-style").value,p=t.pstyle("width").pfValue,f=t.pstyle("line-cap").value,v=l*c,b=l*c,g=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;d==="straight-triangle"?(o.eleStrokeStyle(e,t,M),o.drawEdgeTrianglePath(t,e,u.allpts)):(e.lineWidth=p,e.lineCap=f,o.eleStrokeStyle(e,t,M),o.drawEdgePath(t,e,u.allpts,h),e.lineCap="butt")},m=function(){a&&o.drawEdgeOverlay(e,t)},y=function(){a&&o.drawEdgeUnderlay(e,t)},w=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;o.drawArrowheads(e,t,M)},_=function(){o.drawElementText(e,t,null,r)};e.lineJoin="round";var k=t.pstyle("ghost").value==="yes";if(k){var x=t.pstyle("ghost-offset-x").pfValue,C=t.pstyle("ghost-offset-y").pfValue,D=t.pstyle("ghost-opacity").value,P=v*D;e.translate(x,C),g(P),w(P),e.translate(-x,-C)}y(),g(),w(),m(),_(),n&&e.translate(s.x1,s.y1)}};var nl=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var r=n.pstyle("".concat(e,"-opacity")).value;if(r!==0){var a=this,i=a.usePaths(),o=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,s=2*u,l=n.pstyle("".concat(e,"-color")).value;t.lineWidth=s,o.edgeType==="self"&&!i?t.lineCap="butt":t.lineCap="round",a.colorStrokeStyle(t,l[0],l[1],l[2],r),a.drawEdgePath(n,t,o.allpts,"solid")}}}};St.drawEdgeOverlay=nl("overlay");St.drawEdgeUnderlay=nl("underlay");St.drawEdgePath=function(e,t,n,r){var a=e._private.rscratch,i=t,o,u=!1,s=this.usePaths(),l=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(s){var d=n.join("$"),h=a.pathCacheKey&&a.pathCacheKey===d;h?(o=t=a.pathCache,u=!0):(o=t=new Path2D,a.pathCacheKey=d,a.pathCache=o)}if(i.setLineDash)switch(r){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(l),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!u&&!a.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var p=2;p+3<n.length;p+=4)t.quadraticCurveTo(n[p],n[p+1],n[p+2],n[p+3]);break;case"straight":case"segments":case"haystack":for(var f=2;f+1<n.length;f+=2)t.lineTo(n[f],n[f+1]);break}t=i,s?t.stroke(o):t.stroke(),t.setLineDash&&t.setLineDash([])};St.drawEdgeTrianglePath=function(e,t,n){t.fillStyle=t.strokeStyle;for(var r=e.pstyle("width").pfValue,a=0;a+1<n.length;a+=2){var i=[n[a+2]-n[a],n[a+3]-n[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),u=[i[1]/o,-i[0]/o],s=[u[0]*r/2,u[1]*r/2];t.beginPath(),t.moveTo(n[a]-s[0],n[a+1]-s[1]),t.lineTo(n[a]+s[0],n[a+1]+s[1]),t.lineTo(n[a+2],n[a+3]),t.closePath(),t.fill()}};St.drawArrowheads=function(e,t,n){var r=t._private.rscratch,a=r.edgeType==="haystack";a||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),a||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)};St.drawArrowhead=function(e,t,n,r,a,i,o){if(!(isNaN(r)||r==null||isNaN(a)||a==null||isNaN(i)||i==null)){var u=this,s=t.pstyle(n+"-arrow-shape").value;if(s!=="none"){var l=t.pstyle(n+"-arrow-fill").value==="hollow"?"both":"filled",c=t.pstyle(n+"-arrow-fill").value,d=t.pstyle("width").pfValue,h=t.pstyle("opacity").value;o===void 0&&(o=h);var p=e.globalCompositeOperation;(o!==1||c==="hollow")&&(e.globalCompositeOperation="destination-out",u.colorFillStyle(e,255,255,255,1),u.colorStrokeStyle(e,255,255,255,1),u.drawArrowShape(t,e,l,d,s,r,a,i),e.globalCompositeOperation=p);var f=t.pstyle(n+"-arrow-color").value;u.colorFillStyle(e,f[0],f[1],f[2],o),u.colorStrokeStyle(e,f[0],f[1],f[2],o),u.drawArrowShape(t,e,c,d,s,r,a,i)}}};St.drawArrowShape=function(e,t,n,r,a,i,o,u){var s=this,l=this.usePaths()&&a!=="triangle-cross",c=!1,d,h=t,p={x:i,y:o},f=e.pstyle("arrow-scale").value,v=this.getArrowWidth(r,f),b=s.arrowShapes[a];if(l){var g=s.arrowPathCache=s.arrowPathCache||[],m=Qt(a),y=g[m];y!=null?(d=t=y,c=!0):(d=t=new Path2D,g[m]=d)}c||(t.beginPath&&t.beginPath(),l?b.draw(t,1,0,{x:0,y:0},1):b.draw(t,v,u,p,r),t.closePath&&t.closePath()),t=h,l&&(t.translate(i,o),t.rotate(u),t.scale(v,v)),(n==="filled"||n==="both")&&(l?t.fill(d):t.fill()),(n==="hollow"||n==="both")&&(t.lineWidth=(b.matchEdgeWidth?r:1)/(l?v:1),t.lineJoin="miter",l?t.stroke(d):t.stroke()),l&&(t.scale(1/v,1/v),t.rotate(-u),t.translate(-i,-o))};var ui={};ui.safeDrawImage=function(e,t,n,r,a,i,o,u,s,l){if(!(a<=0||i<=0||s<=0||l<=0))try{e.drawImage(t,n,r,a,i,o,u,s,l)}catch(c){_e(c)}};ui.drawInscribedImage=function(e,t,n,r,a){var i=this,o=n.position(),u=o.x,s=o.y,l=n.cy().style(),c=l.getIndexedStyle.bind(l),d=c(n,"background-fit","value",r),h=c(n,"background-repeat","value",r),p=n.width(),f=n.height(),v=n.padding()*2,b=p+(c(n,"background-width-relative-to","value",r)==="inner"?0:v),g=f+(c(n,"background-height-relative-to","value",r)==="inner"?0:v),m=n._private.rscratch,y=c(n,"background-clip","value",r),w=y==="node",_=c(n,"background-image-opacity","value",r)*a,k=c(n,"background-image-smoothing","value",r),x=t.width||t.cachedW,C=t.height||t.cachedH;(x==null||C==null)&&(document.body.appendChild(t),x=t.cachedW=t.width||t.offsetWidth,C=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var D=x,P=C;if(c(n,"background-width","value",r)!=="auto"&&(c(n,"background-width","units",r)==="%"?D=c(n,"background-width","pfValue",r)*b:D=c(n,"background-width","pfValue",r)),c(n,"background-height","value",r)!=="auto"&&(c(n,"background-height","units",r)==="%"?P=c(n,"background-height","pfValue",r)*g:P=c(n,"background-height","pfValue",r)),!(D===0||P===0)){if(d==="contain"){var M=Math.min(b/D,g/P);D*=M,P*=M}else if(d==="cover"){var M=Math.max(b/D,g/P);D*=M,P*=M}var T=u-b/2,B=c(n,"background-position-x","units",r),S=c(n,"background-position-x","pfValue",r);B==="%"?T+=(b-D)*S:T+=S;var A=c(n,"background-offset-x","units",r),N=c(n,"background-offset-x","pfValue",r);A==="%"?T+=(b-D)*N:T+=N;var O=s-g/2,I=c(n,"background-position-y","units",r),z=c(n,"background-position-y","pfValue",r);I==="%"?O+=(g-P)*z:O+=z;var Y=c(n,"background-offset-y","units",r),V=c(n,"background-offset-y","pfValue",r);Y==="%"?O+=(g-P)*V:O+=V,m.pathCache&&(T-=u,O-=s,u=0,s=0);var H=e.globalAlpha;e.globalAlpha=_;var j=i.getImgSmoothing(e),W=!1;if(k==="no"&&j?(i.setImgSmoothing(e,!1),W=!0):k==="yes"&&!j&&(i.setImgSmoothing(e,!0),W=!0),h==="no-repeat")w&&(e.save(),m.pathCache?e.clip(m.pathCache):(i.nodeShapes[i.getNodeShape(n)].draw(e,u,s,b,g),e.clip())),i.safeDrawImage(e,t,0,0,x,C,T,O,D,P),w&&e.restore();else{var ee=e.createPattern(t,h);e.fillStyle=ee,i.nodeShapes[i.getNodeShape(n)].draw(e,u,s,b,g),e.translate(T,O),e.fill(),e.translate(-T,-O)}e.globalAlpha=H,W&&i.setImgSmoothing(e,j)}};var on={};on.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),r=this.getPixelRatio(),a=Math.ceil($a(n*r));t=Math.pow(2,a)}var i=e.pstyle("font-size").pfValue*t,o=e.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};on.drawElementText=function(e,t,n,r,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(r==null){if(i&&!o.eleTextBiggerThanMin(t))return}else if(r===!1)return;if(t.isNode()){var u=t.pstyle("label");if(!u||!u.value)return;var s=o.getLabelJustification(t);e.textAlign=s,e.textBaseline="bottom"}else{var l=t.element()._private.rscratch.badLine,c=t.pstyle("label"),d=t.pstyle("source-label"),h=t.pstyle("target-label");if(l||(!c||!c.value)&&(!d||!d.value)&&(!h||!h.value))return;e.textAlign="center",e.textBaseline="bottom"}var p=!n,f;n&&(f=n,e.translate(-f.x1,-f.y1)),a==null?(o.drawText(e,t,null,p,i),t.isEdge()&&(o.drawText(e,t,"source",p,i),o.drawText(e,t,"target",p,i))):o.drawText(e,t,a,p,i),n&&e.translate(f.x1,f.y1)};on.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(t=this.fontCaches[n],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t};on.setupTextStyle=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=t.pstyle("font-style").strValue,a=t.pstyle("font-size").pfValue+"px",i=t.pstyle("font-family").strValue,o=t.pstyle("font-weight").strValue,u=n?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,s=t.pstyle("text-outline-opacity").value*u,l=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=r+" "+o+" "+a+" "+i,e.lineJoin="round",this.colorFillStyle(e,l[0],l[1],l[2],u),this.colorStrokeStyle(e,c[0],c[1],c[2],s)};function O0(e,t,n,r,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5;e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+r-i,n),e.quadraticCurveTo(t+r,n,t+r,n+i),e.lineTo(t+r,n+a-i),e.quadraticCurveTo(t+r,n+a,t+r-i,n+a),e.lineTo(t+i,n+a),e.quadraticCurveTo(t,n+a,t,n+a-i),e.lineTo(t,n+i),e.quadraticCurveTo(t,n,t+i,n),e.closePath(),e.fill()}on.getTextAngle=function(e,t){var n,r=e._private,a=r.rscratch,i=t?t+"-":"",o=e.pstyle(i+"text-rotation"),u=yt(a,"labelAngle",t);return o.strValue==="autorotate"?n=e.isEdge()?u:0:o.strValue==="none"?n=0:n=o.pfValue,n};on.drawText=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=t._private,o=i.rscratch,u=a?t.effectiveOpacity():1;if(!(a&&(u===0||t.pstyle("text-opacity").value===0))){n==="main"&&(n=null);var s=yt(o,"labelX",n),l=yt(o,"labelY",n),c,d,h=this.getLabelText(t,n);if(h!=null&&h!==""&&!isNaN(s)&&!isNaN(l)){this.setupTextStyle(e,t,a);var p=n?n+"-":"",f=yt(o,"labelWidth",n),v=yt(o,"labelHeight",n),b=t.pstyle(p+"text-margin-x").pfValue,g=t.pstyle(p+"text-margin-y").pfValue,m=t.isEdge(),y=t.pstyle("text-halign").value,w=t.pstyle("text-valign").value;m&&(y="center",w="center"),s+=b,l+=g;var _;switch(r?_=this.getTextAngle(t,n):_=0,_!==0&&(c=s,d=l,e.translate(c,d),e.rotate(_),s=0,l=0),w){case"top":break;case"center":l+=v/2;break;case"bottom":l+=v;break}var k=t.pstyle("text-background-opacity").value,x=t.pstyle("text-border-opacity").value,C=t.pstyle("text-border-width").pfValue,D=t.pstyle("text-background-padding").pfValue;if(k>0||C>0&&x>0){var P=s-D;switch(y){case"left":P-=f;break;case"center":P-=f/2;break}var M=l-v-D,T=f+2*D,B=v+2*D;if(k>0){var S=e.fillStyle,A=t.pstyle("text-background-color").value;e.fillStyle="rgba("+A[0]+","+A[1]+","+A[2]+","+k*u+")";var N=t.pstyle("text-background-shape").strValue;N.indexOf("round")===0?O0(e,P,M,T,B,2):e.fillRect(P,M,T,B),e.fillStyle=S}if(C>0&&x>0){var O=e.strokeStyle,I=e.lineWidth,z=t.pstyle("text-border-color").value,Y=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+z[0]+","+z[1]+","+z[2]+","+x*u+")",e.lineWidth=C,e.setLineDash)switch(Y){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=C/4,e.setLineDash([]);break;case"solid":e.setLineDash([]);break}if(e.strokeRect(P,M,T,B),Y==="double"){var V=C/2;e.strokeRect(P+V,M+V,T-V*2,B-V*2)}e.setLineDash&&e.setLineDash([]),e.lineWidth=I,e.strokeStyle=O}}var H=2*t.pstyle("text-outline-width").pfValue;if(H>0&&(e.lineWidth=H),t.pstyle("text-wrap").value==="wrap"){var j=yt(o,"labelWrapCachedLines",n),W=yt(o,"labelLineHeight",n),ee=f/2,L=this.getLabelJustification(t);switch(L==="auto"||(y==="left"?L==="left"?s+=-f:L==="center"&&(s+=-ee):y==="center"?L==="left"?s+=-ee:L==="right"&&(s+=ee):y==="right"&&(L==="center"?s+=ee:L==="right"&&(s+=f))),w){case"top":l-=(j.length-1)*W;break;case"center":case"bottom":l-=(j.length-1)*W;break}for(var F=0;F<j.length;F++)H>0&&e.strokeText(j[F],s,l),e.fillText(j[F],s,l),l+=W}else H>0&&e.strokeText(h,s,l),e.fillText(h,s,l);_!==0&&(e.rotate(-_),e.translate(-c,-d))}}};var Nn={};Nn.drawNode=function(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,u,s,l=t._private,c=l.rscratch,d=t.position();if(!(!J(d.x)||!J(d.y))&&!(i&&!t.visible())){var h=i?t.effectiveOpacity():1,p=o.usePaths(),f,v=!1,b=t.padding();u=t.width()+2*b,s=t.height()+2*b;var g;n&&(g=n,e.translate(-g.x1,-g.y1));for(var m=t.pstyle("background-image"),y=m.value,w=new Array(y.length),_=new Array(y.length),k=0,x=0;x<y.length;x++){var C=y[x],D=w[x]=C!=null&&C!=="none";if(D){var P=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",x);k++,_[x]=o.getCachedImage(C,P,function(){l.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var M=t.pstyle("background-blacken").value,T=t.pstyle("border-width").pfValue,B=t.pstyle("background-opacity").value*h,S=t.pstyle("border-color").value,A=t.pstyle("border-style").value,N=t.pstyle("border-opacity").value*h;e.lineJoin="miter";var O=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B;o.eleFillStyle(e,t,ne)},I=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N;o.colorStrokeStyle(e,S[0],S[1],S[2],ne)},z=t.pstyle("shape").strValue,Y=t.pstyle("shape-polygon-points").pfValue;if(p){e.translate(d.x,d.y);var V=o.nodePathCache=o.nodePathCache||[],H=Qo(z==="polygon"?z+","+Y.join(","):z,""+s,""+u),j=V[H];j!=null?(f=j,v=!0,c.pathCache=f):(f=new Path2D,V[H]=c.pathCache=f)}var W=function(){if(!v){var ne=d;p&&(ne={x:0,y:0}),o.nodeShapes[o.getNodeShape(t)].draw(f||e,ne.x,ne.y,u,s)}p?e.fill(f):e.fill()},ee=function(){for(var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,de=l.backgrounding,fe=0,ce=0;ce<_.length;ce++){var xe=t.cy().style().getIndexedStyle(t,"background-image-containment","value",ce);if(oe&&xe==="over"||!oe&&xe==="inside"){fe++;continue}w[ce]&&_[ce].complete&&!_[ce].error&&(fe++,o.drawInscribedImage(e,_[ce],t,ce,ne))}l.backgrounding=fe!==k,de!==l.backgrounding&&t.updateStyle(!1)},L=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;o.hasPie(t)&&(o.drawPie(e,t,oe),ne&&(p||o.nodeShapes[o.getNodeShape(t)].draw(e,d.x,d.y,u,s)))},F=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,oe=(M>0?M:-M)*ne,de=M>0?0:255;M!==0&&(o.colorFillStyle(e,de,de,de,oe),p?e.fill(f):e.fill())},U=function(){if(T>0){if(e.lineWidth=T,e.lineCap="butt",e.setLineDash)switch(A){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([]);break}if(p?e.stroke(f):e.stroke(),A==="double"){e.lineWidth=T/3;var ne=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",p?e.stroke(f):e.stroke(),e.globalCompositeOperation=ne}e.setLineDash&&e.setLineDash([])}},Q=function(){a&&o.drawNodeOverlay(e,t,d,u,s)},$=function(){a&&o.drawNodeUnderlay(e,t,d,u,s)},le=function(){o.drawElementText(e,t,null,r)},ve=t.pstyle("ghost").value==="yes";if(ve){var me=t.pstyle("ghost-offset-x").pfValue,K=t.pstyle("ghost-offset-y").pfValue,ae=t.pstyle("ghost-opacity").value,te=ae*h;e.translate(me,K),O(ae*B),W(),ee(te,!0),I(ae*N),U(),L(M!==0||T!==0),ee(te,!1),F(te),e.translate(-me,-K)}p&&e.translate(-d.x,-d.y),$(),p&&e.translate(d.x,d.y),O(),W(),ee(h,!0),I(),U(),L(M!==0||T!==0),ee(h,!1),F(),p&&e.translate(-d.x,-d.y),le(),Q(),n&&e.translate(g.x1,g.y1)}};var rl=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,r,a,i){var o=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,s=n.pstyle("".concat(e,"-opacity")).value,l=n.pstyle("".concat(e,"-color")).value,c=n.pstyle("".concat(e,"-shape")).value;if(s>0){if(r=r||n.position(),a==null||i==null){var d=n.padding();a=n.width()+2*d,i=n.height()+2*d}o.colorFillStyle(t,l[0],l[1],l[2],s),o.nodeShapes[c].draw(t,r.x,r.y,a+u*2,i+u*2),t.fill()}}}};Nn.drawNodeOverlay=rl("overlay");Nn.drawNodeUnderlay=rl("underlay");Nn.hasPie=function(e){return e=e[0],e._private.hasPie};Nn.drawPie=function(e,t,n,r){t=t[0],r=r||t.position();var a=t.cy().style(),i=t.pstyle("pie-size"),o=r.x,u=r.y,s=t.width(),l=t.height(),c=Math.min(s,l)/2,d=0,h=this.usePaths();h&&(o=0,u=0),i.units==="%"?c=c*i.pfValue:i.pfValue!==void 0&&(c=i.pfValue/2);for(var p=1;p<=a.pieBackgroundN;p++){var f=t.pstyle("pie-"+p+"-background-size").value,v=t.pstyle("pie-"+p+"-background-color").value,b=t.pstyle("pie-"+p+"-background-opacity").value*n,g=f/100;g+d>1&&(g=1-d);var m=1.5*Math.PI+2*Math.PI*d,y=2*Math.PI*g,w=m+y;f===0||d>=1||d+g>1||(e.beginPath(),e.moveTo(o,u),e.arc(o,u,c,m,w),e.closePath(),this.colorFillStyle(e,v[0],v[1],v[2],b),e.fill(),d+=g)}};var ut={},z0=100;ut.getPixelRatio=function(){var e=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t};ut.paintCache=function(e){for(var t=this.paintCaches=this.paintCaches||[],n=!0,r,a=0;a<t.length;a++)if(r=t[a],r.context===e){n=!1;break}return n&&(r={context:e},t.push(r)),r};ut.createGradientStyleFor=function(e,t,n,r,a){var i,o=this.usePaths(),u=n.pstyle(t+"-gradient-stop-colors").value,s=n.pstyle(t+"-gradient-stop-positions").pfValue;if(r==="radial-gradient")if(n.isEdge()){var l=n.sourceEndpoint(),c=n.targetEndpoint(),d=n.midpoint(),h=Jt(l,d),p=Jt(c,d);i=e.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(h,p))}else{var f=o?{x:0,y:0}:n.position(),v=n.paddedWidth(),b=n.paddedHeight();i=e.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(v,b))}else if(n.isEdge()){var g=n.sourceEndpoint(),m=n.targetEndpoint();i=e.createLinearGradient(g.x,g.y,m.x,m.y)}else{var y=o?{x:0,y:0}:n.position(),w=n.paddedWidth(),_=n.paddedHeight(),k=w/2,x=_/2,C=n.pstyle("background-gradient-direction").value;switch(C){case"to-bottom":i=e.createLinearGradient(y.x,y.y-x,y.x,y.y+x);break;case"to-top":i=e.createLinearGradient(y.x,y.y+x,y.x,y.y-x);break;case"to-left":i=e.createLinearGradient(y.x+k,y.y,y.x-k,y.y);break;case"to-right":i=e.createLinearGradient(y.x-k,y.y,y.x+k,y.y);break;case"to-bottom-right":case"to-right-bottom":i=e.createLinearGradient(y.x-k,y.y-x,y.x+k,y.y+x);break;case"to-top-right":case"to-right-top":i=e.createLinearGradient(y.x-k,y.y+x,y.x+k,y.y-x);break;case"to-bottom-left":case"to-left-bottom":i=e.createLinearGradient(y.x+k,y.y-x,y.x-k,y.y+x);break;case"to-top-left":case"to-left-top":i=e.createLinearGradient(y.x+k,y.y+x,y.x-k,y.y-x);break}}if(!i)return null;for(var D=s.length===u.length,P=u.length,M=0;M<P;M++)i.addColorStop(D?s[M]:M/(P-1),"rgba("+u[M][0]+","+u[M][1]+","+u[M][2]+","+a+")");return i};ut.gradientFillStyle=function(e,t,n,r){var a=this.createGradientStyleFor(e,"background",t,n,r);if(!a)return null;e.fillStyle=a};ut.colorFillStyle=function(e,t,n,r,a){e.fillStyle="rgba("+t+","+n+","+r+","+a+")"};ut.eleFillStyle=function(e,t,n){var r=t.pstyle("background-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientFillStyle(e,t,r,n);else{var a=t.pstyle("background-color").value;this.colorFillStyle(e,a[0],a[1],a[2],n)}};ut.gradientStrokeStyle=function(e,t,n,r){var a=this.createGradientStyleFor(e,"line",t,n,r);if(!a)return null;e.strokeStyle=a};ut.colorStrokeStyle=function(e,t,n,r,a){e.strokeStyle="rgba("+t+","+n+","+r+","+a+")"};ut.eleStrokeStyle=function(e,t,n){var r=t.pstyle("line-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientStrokeStyle(e,t,r,n);else{var a=t.pstyle("line-color").value;this.colorStrokeStyle(e,a[0],a[1],a[2],n)}};ut.matchCanvasSize=function(e){var t=this,n=t.data,r=t.findContainerClientCoords(),a=r[2],i=r[3],o=t.getPixelRatio(),u=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(o=u);var s=a*o,l=i*o,c;if(!(s===t.canvasWidth&&l===t.canvasHeight)){t.fontCaches=null;var d=n.canvasContainer;d.style.width=a+"px",d.style.height=i+"px";for(var h=0;h<t.CANVAS_LAYERS;h++)c=n.canvases[h],c.width=s,c.height=l,c.style.width=a+"px",c.style.height=i+"px";for(var h=0;h<t.BUFFER_COUNT;h++)c=n.bufferCanvases[h],c.width=s,c.height=l,c.style.width=a+"px",c.style.height=i+"px";t.textureMult=1,o<=1&&(c=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,c.width=s*t.textureMult,c.height=l*t.textureMult),t.canvasWidth=s,t.canvasHeight=l}};ut.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})};ut.render=function(e){e=e||ns();var t=e.forcedContext,n=e.drawAllLayers,r=e.drawOnlyNodeLayer,a=e.forcedZoom,i=e.forcedPan,o=this,u=e.forcedPxRatio===void 0?this.getPixelRatio():e.forcedPxRatio,s=o.cy,l=o.data,c=l.canvasNeedsRedraw,d=o.textureOnViewport&&!t&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),h=e.motionBlur!==void 0?e.motionBlur:o.motionBlur,p=o.motionBlurPxRatio,f=s.hasCompoundNodes(),v=o.hoverData.draggingEles,b=!!(o.hoverData.selecting||o.touchData.selecting);h=h&&!t&&o.motionBlurEnabled&&!b;var g=h;t||(o.prevPxRatio!==u&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=u),!t&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),h&&(o.mbFrames==null&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(g=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!d&&(c[o.NODE]=!0,c[o.SELECT_BOX]=!0);var m=s.style(),y=s.zoom(),w=a!==void 0?a:y,_=s.pan(),k={x:_.x,y:_.y},x={zoom:y,pan:{x:_.x,y:_.y}},C=o.prevViewport,D=C===void 0||x.zoom!==C.zoom||x.pan.x!==C.pan.x||x.pan.y!==C.pan.y;!D&&!(v&&!f)&&(o.motionBlurPxRatio=1),i&&(k=i),w*=u,k.x*=u,k.y*=u;var P=o.getCachedZSortedEles();function M(K,ae,te,ne,oe){var de=K.globalCompositeOperation;K.globalCompositeOperation="destination-out",o.colorFillStyle(K,255,255,255,o.motionBlurTransparency),K.fillRect(ae,te,ne,oe),K.globalCompositeOperation=de}function T(K,ae){var te,ne,oe,de;!o.clearingMotionBlur&&(K===l.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]||K===l.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG])?(te={x:_.x*p,y:_.y*p},ne=y*p,oe=o.canvasWidth*p,de=o.canvasHeight*p):(te=k,ne=w,oe=o.canvasWidth,de=o.canvasHeight),K.setTransform(1,0,0,1,0,0),ae==="motionBlur"?M(K,0,0,oe,de):!t&&(ae===void 0||ae)&&K.clearRect(0,0,oe,de),n||(K.translate(te.x,te.y),K.scale(ne,ne)),i&&K.translate(i.x,i.y),a&&K.scale(a,a)}if(d||(o.textureDrawLastFrame=!1),d){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=s.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var B=o.data.bufferContexts[o.TEXTURE_BUFFER];B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:B,drawOnlyNodeLayer:!0,forcedPxRatio:u*o.textureMult});var x=o.textureCache.viewport={zoom:s.zoom(),pan:s.pan(),width:o.canvasWidth,height:o.canvasHeight};x.mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[o.DRAG]=!1,c[o.NODE]=!1;var S=l.contexts[o.NODE],A=o.textureCache.texture,x=o.textureCache.viewport;S.setTransform(1,0,0,1,0,0),h?M(S,0,0,x.width,x.height):S.clearRect(0,0,x.width,x.height);var N=m.core("outside-texture-bg-color").value,O=m.core("outside-texture-bg-opacity").value;o.colorFillStyle(S,N[0],N[1],N[2],O),S.fillRect(0,0,x.width,x.height);var y=s.zoom();T(S,!1),S.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/u,x.height/x.zoom/u),S.drawImage(A,x.mpan.x,x.mpan.y,x.width/x.zoom/u,x.height/x.zoom/u)}else o.textureOnViewport&&!t&&(o.textureCache=null);var I=s.extent(),z=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),Y=o.hideEdgesOnViewport&&z,V=[];if(V[o.NODE]=!c[o.NODE]&&h&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,V[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),V[o.DRAG]=!c[o.DRAG]&&h&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,V[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),c[o.NODE]||n||r||V[o.NODE]){var H=h&&!V[o.NODE]&&p!==1,S=t||(H?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:l.contexts[o.NODE]),j=h&&!H?"motionBlur":void 0;T(S,j),Y?o.drawCachedNodes(S,P.nondrag,u,I):o.drawLayeredElements(S,P.nondrag,u,I),o.debug&&o.drawDebugPoints(S,P.nondrag),!n&&!h&&(c[o.NODE]=!1)}if(!r&&(c[o.DRAG]||n||V[o.DRAG])){var H=h&&!V[o.DRAG]&&p!==1,S=t||(H?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:l.contexts[o.DRAG]);T(S,h&&!H?"motionBlur":void 0),Y?o.drawCachedNodes(S,P.drag,u,I):o.drawCachedElements(S,P.drag,u,I),o.debug&&o.drawDebugPoints(S,P.drag),!n&&!h&&(c[o.DRAG]=!1)}if(o.showFps||!r&&c[o.SELECT_BOX]&&!n){var S=t||l.contexts[o.SELECT_BOX];if(T(S),o.selection[4]==1&&(o.hoverData.selecting||o.touchData.selecting)){var y=o.cy.zoom(),W=m.core("selection-box-border-width").value/y;S.lineWidth=W,S.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",S.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),W>0&&(S.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",S.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(l.bgActivePosistion&&!o.hoverData.selecting){var y=o.cy.zoom(),ee=l.bgActivePosistion;S.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",S.beginPath(),S.arc(ee.x,ee.y,m.core("active-bg-size").pfValue/y,0,2*Math.PI),S.fill()}var L=o.lastRedrawTime;if(o.showFps&&L){L=Math.round(L);var F=Math.round(1e3/L);S.setTransform(1,0,0,1,0,0),S.fillStyle="rgba(255, 0, 0, 0.75)",S.strokeStyle="rgba(255, 0, 0, 0.75)",S.lineWidth=1,S.fillText("1 frame = "+L+" ms = "+F+" fps",0,20);var U=60;S.strokeRect(0,30,250,20),S.fillRect(0,30,250*Math.min(F/U,1),20)}n||(c[o.SELECT_BOX]=!1)}if(h&&p!==1){var Q=l.contexts[o.NODE],$=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],le=l.contexts[o.DRAG],ve=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],me=function(K,ae,te){K.setTransform(1,0,0,1,0,0),te||!g?K.clearRect(0,0,o.canvasWidth,o.canvasHeight):M(K,0,0,o.canvasWidth,o.canvasHeight);var ne=p;K.drawImage(ae,0,0,o.canvasWidth*ne,o.canvasHeight*ne,0,0,o.canvasWidth,o.canvasHeight)};(c[o.NODE]||V[o.NODE])&&(me(Q,$,V[o.NODE]),c[o.NODE]=!1),(c[o.DRAG]||V[o.DRAG])&&(me(le,ve,V[o.DRAG]),c[o.DRAG]=!1)}o.prevViewport=x,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),h&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!d,o.mbFrames=0,c[o.NODE]=!0,c[o.DRAG]=!0,o.redraw()},z0)),t||s.emit("render")};var Wt={};Wt.drawPolygonPath=function(e,t,n,r,a,i){var o=r/2,u=a/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*i[0],n+u*i[1]);for(var s=1;s<i.length/2;s++)e.lineTo(t+o*i[s*2],n+u*i[s*2+1]);e.closePath()};Wt.drawRoundPolygonPath=function(e,t,n,r,a,i){var o=r/2,u=a/2,s=Ja(r,a);e.beginPath&&e.beginPath();for(var l=0;l<i.length/4;l++){var c=void 0,d=void 0;l===0?c=i.length-2:c=l*4-2,d=l*4+2;var h=t+o*i[l*4],p=n+u*i[l*4+1],f=-i[c]*i[d]-i[c+1]*i[d+1],v=s/Math.tan(Math.acos(f)/2),b=h-v*i[c],g=p-v*i[c+1],m=h+v*i[d],y=p+v*i[d+1];l===0?e.moveTo(b,g):e.lineTo(b,g),e.arcTo(h,p,m,y,s)}e.closePath()};Wt.drawRoundRectanglePath=function(e,t,n,r,a){var i=r/2,o=a/2,u=ur(r,a);e.beginPath&&e.beginPath(),e.moveTo(t,n-o),e.arcTo(t+i,n-o,t+i,n,u),e.arcTo(t+i,n+o,t,n+o,u),e.arcTo(t-i,n+o,t-i,n,u),e.arcTo(t-i,n-o,t,n-o,u),e.lineTo(t,n-o),e.closePath()};Wt.drawBottomRoundRectanglePath=function(e,t,n,r,a){var i=r/2,o=a/2,u=ur(r,a);e.beginPath&&e.beginPath(),e.moveTo(t,n-o),e.lineTo(t+i,n-o),e.lineTo(t+i,n),e.arcTo(t+i,n+o,t,n+o,u),e.arcTo(t-i,n+o,t-i,n,u),e.lineTo(t-i,n-o),e.lineTo(t,n-o),e.closePath()};Wt.drawCutRectanglePath=function(e,t,n,r,a){var i=r/2,o=a/2,u=cs();e.beginPath&&e.beginPath(),e.moveTo(t-i+u,n-o),e.lineTo(t+i-u,n-o),e.lineTo(t+i,n-o+u),e.lineTo(t+i,n+o-u),e.lineTo(t+i-u,n+o),e.lineTo(t-i+u,n+o),e.lineTo(t-i,n+o-u),e.lineTo(t-i,n-o+u),e.closePath()};Wt.drawBarrelPath=function(e,t,n,r,a){var i=r/2,o=a/2,u=t-i,s=t+i,l=n-o,c=n+o,d=Ma(r,a),h=d.widthOffset,p=d.heightOffset,f=d.ctrlPtOffsetPct*h;e.beginPath&&e.beginPath(),e.moveTo(u,l+p),e.lineTo(u,c-p),e.quadraticCurveTo(u+f,c,u+h,c),e.lineTo(s-h,c),e.quadraticCurveTo(s-f,c,s,c-p),e.lineTo(s,l+p),e.quadraticCurveTo(s-f,l,s-h,l),e.lineTo(u+h,l),e.quadraticCurveTo(u+f,l,u,l+p),e.closePath()};var Po=Math.sin(0),Mo=Math.cos(0),La={},Ra={},al=Math.PI/40;for(var hn=0*Math.PI;hn<2*Math.PI;hn+=al)La[hn]=Math.sin(hn),Ra[hn]=Math.cos(hn);Wt.drawEllipsePath=function(e,t,n,r,a){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,a/2,0,0,2*Math.PI);else for(var i,o,u=r/2,s=a/2,l=0*Math.PI;l<2*Math.PI;l+=al)i=t-u*La[l]*Po+u*Ra[l]*Mo,o=n+s*Ra[l]*Po+s*La[l]*Mo,l===0?e.moveTo(i,o):e.lineTo(i,o);e.closePath()};var fr={};fr.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]};fr.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements(),r=n.boundingBox(),a=this.findContainerClientCoords(),i=e.full?Math.ceil(r.w):a[2],o=e.full?Math.ceil(r.h):a[3],u=J(e.maxWidth)||J(e.maxHeight),s=this.getPixelRatio(),l=1;if(e.scale!==void 0)i*=e.scale,o*=e.scale,l=e.scale;else if(u){var c=1/0,d=1/0;J(e.maxWidth)&&(c=l*e.maxWidth/i),J(e.maxHeight)&&(d=l*e.maxHeight/o),l=Math.min(c,d),i*=l,o*=l}u||(i*=s,o*=s,l*=s);var h=document.createElement("canvas");h.width=i,h.height=o,h.style.width=i+"px",h.style.height=o+"px";var p=h.getContext("2d");if(i>0&&o>0){p.clearRect(0,0,i,o),p.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(e.full)p.translate(-r.x1*l,-r.y1*l),p.scale(l,l),this.drawElements(p,f),p.scale(1/l,1/l),p.translate(r.x1*l,r.y1*l);else{var v=t.pan(),b={x:v.x*l,y:v.y*l};l*=t.zoom(),p.translate(b.x,b.y),p.scale(l,l),this.drawElements(p,f),p.scale(1/l,1/l),p.translate(-b.x,-b.y)}e.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=e.bg,p.rect(0,0,i,o),p.fill())}return h};function L0(e,t){for(var n=atob(e),r=new ArrayBuffer(n.length),a=new Uint8Array(r),i=0;i<n.length;i++)a[i]=n.charCodeAt(i);return new Blob([r],{type:t})}function So(e){var t=e.indexOf(",");return e.substr(t+1)}function il(e,t,n){var r=function(){return t.toDataURL(n,e.quality)};switch(e.output){case"blob-promise":return new _n(function(a,i){try{t.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,e.quality)}catch(o){i(o)}});case"blob":return L0(So(r()),n);case"base64":return So(r());case"base64uri":default:return r()}}fr.png=function(e){return il(e,this.bufferCanvasImage(e),"image/png")};fr.jpg=function(e){return il(e,this.bufferCanvasImage(e),"image/jpeg")};var ol={};ol.nodeShapeImpl=function(e,t,n,r,a,i,o){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,a,i);case"polygon":return this.drawPolygonPath(t,n,r,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(t,n,r,a,i,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,r,a,i);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,r,a,i);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,r,a,i);case"barrel":return this.drawBarrelPath(t,n,r,a,i)}};var R0=sl,ke=sl.prototype;ke.CANVAS_LAYERS=3;ke.SELECT_BOX=0;ke.DRAG=1;ke.NODE=2;ke.BUFFER_COUNT=3;ke.TEXTURE_BUFFER=0;ke.MOTIONBLUR_BUFFER_NODE=1;ke.MOTIONBLUR_BUFFER_DRAG=2;function sl(e){var t=this;t.data={canvases:new Array(ke.CANVAS_LAYERS),contexts:new Array(ke.CANVAS_LAYERS),canvasNeedsRedraw:new Array(ke.CANVAS_LAYERS),bufferCanvases:new Array(ke.BUFFER_COUNT),bufferContexts:new Array(ke.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",r="rgba(0,0,0,0)";t.data.canvasContainer=document.createElement("div");var a=t.data.canvasContainer.style;t.data.canvasContainer.style[n]=r,a.position="relative",a.zIndex="0",a.overflow="hidden";var i=e.cy.container();i.appendChild(t.data.canvasContainer),i.style[n]=r;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};bp()&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var u=0;u<ke.CANVAS_LAYERS;u++){var s=t.data.canvases[u]=document.createElement("canvas");t.data.contexts[u]=s.getContext("2d"),Object.keys(o).forEach(function(L){s.style[L]=o[L]}),s.style.position="absolute",s.setAttribute("data-id","layer"+u),s.style.zIndex=String(ke.CANVAS_LAYERS-u),t.data.canvasContainer.appendChild(s),t.data.canvasNeedsRedraw[u]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[ke.NODE].setAttribute("data-id","layer"+ke.NODE+"-node"),t.data.canvases[ke.SELECT_BOX].setAttribute("data-id","layer"+ke.SELECT_BOX+"-selectbox"),t.data.canvases[ke.DRAG].setAttribute("data-id","layer"+ke.DRAG+"-drag");for(var u=0;u<ke.BUFFER_COUNT;u++)t.data.bufferCanvases[u]=document.createElement("canvas"),t.data.bufferContexts[u]=t.data.bufferCanvases[u].getContext("2d"),t.data.bufferCanvases[u].style.position="absolute",t.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),t.data.bufferCanvases[u].style.zIndex=String(-u-1),t.data.bufferCanvases[u].style.visibility="hidden";t.pathsEnabled=!0;var l=st(),c=function(L){return{x:(L.x1+L.x2)/2,y:(L.y1+L.y2)/2}},d=function(L){return{x:-L.w/2,y:-L.h/2}},h=function(L){var F=L[0]._private,U=F.oldBackgroundTimestamp===F.backgroundTimestamp;return!U},p=function(L){return L[0]._private.nodeKey},f=function(L){return L[0]._private.labelStyleKey},v=function(L){return L[0]._private.sourceLabelStyleKey},b=function(L){return L[0]._private.targetLabelStyleKey},g=function(L,F,U,Q,$){return t.drawElement(L,F,U,!1,!1,$)},m=function(L,F,U,Q,$){return t.drawElementText(L,F,U,Q,"main",$)},y=function(L,F,U,Q,$){return t.drawElementText(L,F,U,Q,"source",$)},w=function(L,F,U,Q,$){return t.drawElementText(L,F,U,Q,"target",$)},_=function(L){return L.boundingBox(),L[0]._private.bodyBounds},k=function(L){return L.boundingBox(),L[0]._private.labelBounds.main||l},x=function(L){return L.boundingBox(),L[0]._private.labelBounds.source||l},C=function(L){return L.boundingBox(),L[0]._private.labelBounds.target||l},D=function(L,F){return F},P=function(L){return c(_(L))},M=function(L,F,U){var Q=L?L+"-":"";return{x:F.x+U.pstyle(Q+"text-margin-x").pfValue,y:F.y+U.pstyle(Q+"text-margin-y").pfValue}},T=function(L,F,U){var Q=L[0]._private.rscratch;return{x:Q[F],y:Q[U]}},B=function(L){return M("",T(L,"labelX","labelY"),L)},S=function(L){return M("source",T(L,"sourceLabelX","sourceLabelY"),L)},A=function(L){return M("target",T(L,"targetLabelX","targetLabelY"),L)},N=function(L){return d(_(L))},O=function(L){return d(x(L))},I=function(L){return d(C(L))},z=function(L){var F=k(L),U=d(k(L));if(L.isNode()){switch(L.pstyle("text-halign").value){case"left":U.x=-F.w;break;case"right":U.x=0;break}switch(L.pstyle("text-valign").value){case"top":U.y=-F.h;break;case"bottom":U.y=0;break}}return U},Y=t.data.eleTxrCache=new Yn(t,{getKey:p,doesEleInvalidateKey:h,drawElement:g,getBoundingBox:_,getRotationPoint:P,getRotationOffset:N,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),V=t.data.lblTxrCache=new Yn(t,{getKey:f,drawElement:m,getBoundingBox:k,getRotationPoint:B,getRotationOffset:z,isVisible:D}),H=t.data.slbTxrCache=new Yn(t,{getKey:v,drawElement:y,getBoundingBox:x,getRotationPoint:S,getRotationOffset:O,isVisible:D}),j=t.data.tlbTxrCache=new Yn(t,{getKey:b,drawElement:w,getBoundingBox:C,getRotationPoint:A,getRotationOffset:I,isVisible:D}),W=t.data.lyrTxrCache=new el(t);t.onUpdateEleCalcs(function(L,F){Y.invalidateElements(F),V.invalidateElements(F),H.invalidateElements(F),j.invalidateElements(F),W.invalidateElements(F);for(var U=0;U<F.length;U++){var Q=F[U]._private;Q.oldBackgroundTimestamp=Q.backgroundTimestamp}});var ee=function(L){for(var F=0;F<L.length;F++)W.enqueueElementRefinement(L[F].ele)};Y.onDequeue(ee),V.onDequeue(ee),H.onDequeue(ee),j.onDequeue(ee)}ke.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[ke.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[ke.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[ke.SELECT_BOX]=t;break}};var V0=typeof Path2D<"u";ke.path2dEnabled=function(e){if(e===void 0)return this.pathsEnabled;this.pathsEnabled=!!e};ke.usePaths=function(){return V0&&this.pathsEnabled};ke.setImgSmoothing=function(e,t){e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)};ke.getImgSmoothing=function(e){return e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled};ke.makeOffscreenCanvas=function(e,t){var n;return(typeof OffscreenCanvas>"u"?"undefined":Ve(OffscreenCanvas))!=="undefined"?n=new OffscreenCanvas(e,t):(n=document.createElement("canvas"),n.width=e,n.height=t),n};[tl,Ct,St,ui,on,Nn,ut,Wt,fr,ol].forEach(function(e){ue(ke,e)});var F0=[{name:"null",impl:Hs},{name:"base",impl:Qs},{name:"canvas",impl:R0}],j0=[{type:"layout",extensions:Zv},{type:"renderer",extensions:F0}],ll={},ul={};function cl(e,t,n){var r=n,a=function(x){_e("Can not register `"+t+"` for `"+e+"` since `"+x+"` already exists in the prototype and can not be overridden")};if(e==="core"){if(nr.prototype[t])return a(t);nr.prototype[t]=n}else if(e==="collection"){if(We.prototype[t])return a(t);We.prototype[t]=n}else if(e==="layout"){for(var i=function(x){this.options=x,n.call(this,x),Ee(this._private)||(this._private={}),this._private.cy=x.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(n.prototype),u=[],s=0;s<u.length;s++){var l=u[s];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=n.prototype.stop;o.stop=function(){var x=this.options;if(x&&x.animate){var C=this.animations;if(C)for(var D=0;D<C.length;D++)C[D].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var d=function(x){return x._private.cy},h={addEventFields:function(x,C){C.layout=x,C.cy=d(x),C.target=x},bubble:function(){return!0},parent:function(x){return d(x)}};ue(o,{createEmitter:function(){return this._private.emitter=new ra(h,this),this},emitter:function(){return this._private.emitter},on:function(x,C){return this.emitter().on(x,C),this},one:function(x,C){return this.emitter().one(x,C),this},once:function(x,C){return this.emitter().one(x,C),this},removeListener:function(x,C){return this.emitter().removeListener(x,C),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(x,C){return this.emitter().emit(x,C),this}}),Te.eventAliasesOn(o),r=i}else if(e==="renderer"&&t!=="null"&&t!=="base"){var p=dl("renderer","base"),f=p.prototype,v=n,b=n.prototype,g=function(){p.apply(this,arguments),v.apply(this,arguments)},m=g.prototype;for(var y in f){var w=f[y],_=b[y]!=null;if(_)return a(y);m[y]=w}for(var k in b)m[k]=b[k];f.clientFunctions.forEach(function(x){m[x]=m[x]||function(){ze("Renderer does not implement `renderer."+x+"()` on its prototype")}}),r=g}else if(e==="__proto__"||e==="constructor"||e==="prototype")return ze(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return Uo({map:ll,keys:[e,t],value:r})}function dl(e,t){return Zo({map:ll,keys:[e,t]})}function q0(e,t,n,r,a){return Uo({map:ul,keys:[e,t,n,r],value:a})}function X0(e,t,n,r){return Zo({map:ul,keys:[e,t,n,r]})}var Va=function(){if(arguments.length===2)return dl.apply(null,arguments);if(arguments.length===3)return cl.apply(null,arguments);if(arguments.length===4)return X0.apply(null,arguments);if(arguments.length===5)return q0.apply(null,arguments);ze("Invalid extension access syntax")};nr.prototype.extension=Va;j0.forEach(function(e){e.extensions.forEach(function(t){cl(e.type,t.name,t.impl)})});var hl=function e(){if(!(this instanceof e))return new e;this.length=0},nn=hl.prototype;nn.instanceString=function(){return"stylesheet"};nn.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this};nn.css=function(e,t){var n=this.length-1;if(se(e))this[n].properties.push({name:e,value:t});else if(Ee(e))for(var r=e,a=Object.keys(r),i=0;i<a.length;i++){var o=a[i],u=r[o];if(u!=null){var s=$e.properties[o]||$e.properties[Qr(o)];if(s!=null){var l=s.name,c=u;this[n].properties.push({name:l,value:c})}}}return this};nn.style=nn.css;nn.generateStyle=function(e){var t=new $e(e);return this.appendToStyle(t)};nn.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n.selector,a=n.properties;e.selector(r);for(var i=0;i<a.length;i++){var o=a[i];e.css(o.name,o.value)}}return e};var Y0="3.23.0",rn=function(e){if(e===void 0&&(e={}),Ee(e))return new nr(e);if(se(e))return Va.apply(Va,arguments)};rn.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(rn),e.apply(null,t),this};rn.warnings=function(e){return es(e)};rn.version=Y0;rn.stylesheet=rn.Stylesheet=hl;var Bo=rn;const Z0=El({__proto__:null,default:Bo},[Bo]);export{Z0 as c};
