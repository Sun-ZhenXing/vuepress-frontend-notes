import{_ as r,r as e,o as c,c as D,d as s,e as n,b as a,w as o,f as t}from"./app-d727cbc2.js";const i={},y={id:"usecolormode",tabindex:"-1"},d=s("a",{class:"header-anchor",href:"#usecolormode","aria-hidden":"true"},"#",-1),C={href:"https://vueuse.org/core/useColorMode/",target:"_blank",rel:"noopener noreferrer"},u={class:"table-of-contents"},v=t(`<h2 id="_1-介绍" tabindex="-1"><a class="header-anchor" href="#_1-介绍" aria-hidden="true">#</a> 1. 介绍</h2><p>响应式设置颜色模式。</p><h2 id="_2-nuxt-示例" tabindex="-1"><a class="header-anchor" href="#_2-nuxt-示例" aria-hidden="true">#</a> 2. Nuxt 示例</h2><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// plugins/darkTheme.ts</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">storeToRefs</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;pinia&#39;</span></span>
<span class="line"><span style="color:#6A9955;">// import type { ConfigProviderTheme } from &#39;vant&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ConfigProviderTheme</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;light&#39;</span><span style="color:#D4D4D4;"> | </span><span style="color:#CE9178;">&#39;dark&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">defineNuxtPlugin</span><span style="color:#D4D4D4;">((</span><span style="color:#9CDCFE;">_</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 响应式获取系统偏好</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">colorMode</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">useColorMode</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">appStore</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">useAppStore</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;">// 响应式获取用户偏好设置</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> { </span><span style="color:#4FC1FF;">isDarkTheme</span><span style="color:#D4D4D4;">, </span><span style="color:#4FC1FF;">isUsingSystemDarkMode</span><span style="color:#D4D4D4;"> } = </span><span style="color:#DCDCAA;">storeToRefs</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">appStore</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">provide:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">darkTheme:</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">computed</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">ConfigProviderTheme</span><span style="color:#D4D4D4;">&gt;(() </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">isUsingSystemDarkMode</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#D4D4D4;">          </span><span style="color:#6A9955;">// 如果用户设置了跟随系统，则返回系统偏好</span></span>
<span class="line"><span style="color:#D4D4D4;">          </span><span style="color:#6A9955;">// 如果没有在预设中，则默认为浅色</span></span>
<span class="line"><span style="color:#D4D4D4;">          </span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> ([</span><span style="color:#CE9178;">&#39;dark&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;light&#39;</span><span style="color:#D4D4D4;">].</span><span style="color:#DCDCAA;">includes</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">colorMode</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">))</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">colorMode</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">as</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">ConfigProviderTheme</span></span>
<span class="line"><span style="color:#D4D4D4;">          </span><span style="color:#C586C0;">else</span></span>
<span class="line"><span style="color:#D4D4D4;">            </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;light&#39;</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">else</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">          </span><span style="color:#6A9955;">// 否则返回用户设置的偏好</span></span>
<span class="line"><span style="color:#D4D4D4;">          </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">isDarkTheme</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;"> ? </span><span style="color:#CE9178;">&#39;dark&#39;</span><span style="color:#D4D4D4;"> : </span><span style="color:#CE9178;">&#39;light&#39;</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;">      }),</span></span>
<span class="line"><span style="color:#D4D4D4;">    },</span></span>
<span class="line"><span style="color:#D4D4D4;">  }</span></span>
<span class="line"><span style="color:#D4D4D4;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4);function m(b,h){const p=e("ExternalLinkIcon"),l=e("router-link");return c(),D("div",null,[s("h1",y,[d,n(),s("a",C,[n("useColorMode"),a(p)])]),s("nav",u,[s("ul",null,[s("li",null,[a(l,{to:"#_1-介绍"},{default:o(()=>[n("1. 介绍")]),_:1})]),s("li",null,[a(l,{to:"#_2-nuxt-示例"},{default:o(()=>[n("2. Nuxt 示例")]),_:1})])])]),v])}const E=r(i,[["render",m],["__file","useColorMode.html.vue"]]);export{E as default};
